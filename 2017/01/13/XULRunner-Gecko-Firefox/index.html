<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="https://huangxok.github.io">
  <title>xulrunner-gecko-firefox | HKBlog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="XULRunner软件和工具发行版下载下载站点 http:&#x2F;&#x2F;ftp.mozilla.org&#x2F;pub&#x2F;firefox&#x2F; http:&#x2F;&#x2F;download.cdn.mozilla.net&#x2F;pub&#x2F;mozilla.org&#x2F; xulrunner 在这里： http:&#x2F;&#x2F;ftp.mozilla.org&#x2F;pub&#x2F;mozilla.org&#x2F;xulrunner&#x2F;releases&#x2F;latest&#x2F;runtimes&#x2F; –">
<meta property="og:type" content="article">
<meta property="og:title" content="xulrunner-gecko-firefox">
<meta property="og:url" content="https://huangxok.github.io/2017/01/13/XULRunner-Gecko-Firefox/index.html">
<meta property="og:site_name" content="HKBlog">
<meta property="og:description" content="XULRunner软件和工具发行版下载下载站点 http:&#x2F;&#x2F;ftp.mozilla.org&#x2F;pub&#x2F;firefox&#x2F; http:&#x2F;&#x2F;download.cdn.mozilla.net&#x2F;pub&#x2F;mozilla.org&#x2F; xulrunner 在这里： http:&#x2F;&#x2F;ftp.mozilla.org&#x2F;pub&#x2F;mozilla.org&#x2F;xulrunner&#x2F;releases&#x2F;latest&#x2F;runtimes&#x2F; –">
<meta property="article:published_time" content="2017-01-13T02:03:15.000Z">
<meta property="article:modified_time" content="2017-01-13T02:03:15.000Z">
<meta property="article:author" content="HKmaster">
<meta property="article:tag" content="XUL">
<meta property="article:tag" content="XULRunner">
<meta property="article:tag" content="Firefox">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="HKBlog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" type="text/css" href="/./main.0cf68a.css">
  <style type="text/css">
  
    #container.show {
      background: linear-gradient(200deg,#a0cfe4,#e8c37e);
    }
  </style>
  

  

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      
<div class="overlay" style="background: #4d4d4d"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="" class="js-avatar">
		</a>
		<hgroup>
		  <h1 class="header-author"><a href="/">HKmaster</a></h1>
		</hgroup>
		
		<p class="header-subtitle">努力不一定成功，放弃一定会很轻松</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
    		
    			
    			<a q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'friends')" href="javascript:void(0)">友链</a>
    			
            
    			
    			<a q-on="click: openSlider(e, 'aboutme')" href="javascript:void(0)">关于我</a>
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/huangxok" title="github"><i class="icon-github"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      
<nav id="mobile-nav">
  	<div class="overlay js-overlay" style="background: #4d4d4d"></div>
	<div class="btnctn js-mobile-btnctn">
  		<div class="slider-trigger list" q-on="click: openSlider(e)"><i class="icon icon-sort"></i></div>
	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author js-header-author">HKmaster</h1>
			</hgroup>
			
			<p class="header-subtitle"><i class="icon icon-quo-left"></i>努力不一定成功，放弃一定会很轻松<i class="icon icon-quo-right"></i></p>
			
			
			
				
			
				
			
			
			
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/huangxok" title="github"><i class="icon-github"></i></a>
			        
				</div>
			</nav>

			<nav class="header-menu js-header-menu">
				<ul style="width: 50%">
				
				
					<li style="width: 50%"><a href="/">主页</a></li>
		        
					<li style="width: 50%"><a href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></li>
		        
				</ul>
			</nav>
		</header>				
	</div>
	<div class="mobile-mask" style="display:none" q-show="isShow"></div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            <article id="post-XULRunner-Gecko-Firefox" class="article article-type-post " itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      xulrunner-gecko-firefox
    </h1>
  

        
        <a href="/2017/01/13/XULRunner-Gecko-Firefox/" class="archive-article-date">
  	<time datetime="2017-01-13T02:03:15.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-13</time>
</a>
        
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="XULRunner"><a href="#XULRunner" class="headerlink" title="XULRunner"></a>XULRunner</h2><h3 id="软件和工具"><a href="#软件和工具" class="headerlink" title="软件和工具"></a>软件和工具</h3><p>发行版下载<br>下载站点</p>
<p><a href="http://ftp.mozilla.org/pub/firefox/" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/firefox/</a></p>
<p><a href="http://download.cdn.mozilla.net/pub/mozilla.org/" target="_blank" rel="noopener">http://download.cdn.mozilla.net/pub/mozilla.org/</a></p>
<p>xulrunner 在这里：</p>
<p><a href="http://ftp.mozilla.org/pub/mozilla.org/xulrunner/releases/latest/runtimes/" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/mozilla.org/xulrunner/releases/latest/runtimes/</a> – 稳定版</p>
<p><a href="http://ftp.mozilla.org/pub/mozilla.org/xulrunner/candidates/" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/mozilla.org/xulrunner/candidates/</a> – beta版</p>
<p><a href="http://ftp.mozilla.org/pub/mozilla.org/xulrunner/nightly/latest-mozilla-aurora/" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/mozilla.org/xulrunner/nightly/latest-mozilla-aurora/</a> – aurora版</p>
<p><a href="http://ftp.mozilla.org/pub/mozilla.org/xulrunner/nightly/latest-mozilla-central/" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/mozilla.org/xulrunner/nightly/latest-mozilla-central/</a> – central版</p>
<p>firefox 在这里：</p>
<p><a href="http://ftp.mozilla.org/pub/mozilla.org/firefox/" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/mozilla.org/firefox/</a></p>
<p>注意，xulrunner 只提供英文版，而 firefox 则有各种本地化版本，例如</p>
<p><a href="http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-mozilla-aurora-l10n/" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/mozilla.org/firefox/nightly/latest-mozilla-aurora-l10n/</a></p>
<p>firefox sdk 只在 aurora 里面有，如<br><a href="http://ftp.mozilla.org/pub/firefox/nightly/latest-mozilla-aurora/firefox-47.0a2.en-US.win32.sdk.zip" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/firefox/nightly/latest-mozilla-aurora/firefox-47.0a2.en-US.win32.sdk.zip</a></p>
<p>可以利用后者的资源文件本地化前者，详见“本地化”。</p>
<h3 id="XULRunner-参考"><a href="#XULRunner-参考" class="headerlink" title="XULRunner 参考"></a>XULRunner 参考</h3><p>Creating Applications with Mozilla<br>  <a href="http://books.mozdev.org/html/index.html" target="_blank" rel="noopener">http://books.mozdev.org/html/index.html</a></p>
<p>XULRunner in large projects<br>  <a href="https://adblockplus.org/blog/xulrunner-in-large-projects-part-1-what-is-that-xulrunner-thingy-anyway" target="_blank" rel="noopener">https://adblockplus.org/blog/xulrunner-in-large-projects-part-1-what-is-that-xulrunner-thingy-anyway</a><br>  <a href="https://adblockplus.org/blog/xulrunner-in-large-projects-part-2-why-xulrunner-isn-t-like-java" target="_blank" rel="noopener">https://adblockplus.org/blog/xulrunner-in-large-projects-part-2-why-xulrunner-isn-t-like-java</a><br>  <a href="https://adblockplus.org/blog/xulrunner-in-large-projects-part-3-bugs-bugs-and-more-bugs" target="_blank" rel="noopener">https://adblockplus.org/blog/xulrunner-in-large-projects-part-3-bugs-bugs-and-more-bugs</a><br>  <a href="https://adblockplus.org/blog/xulrunner-in-large-projects-part-4-localization-pitfalls" target="_blank" rel="noopener">https://adblockplus.org/blog/xulrunner-in-large-projects-part-4-localization-pitfalls</a></p>
<p>Getting_started_with_XULRunner<br>  <a href="https://developer.mozilla.org/zh-CN/docs/Getting_started_with_XULRunner" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Getting_started_with_XULRunner</a><br>Structure_of_an_installable_bundle<br>  <a href="https://developer.mozilla.org/zh-CN/docs/Structure_of_an_installable_bundle" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Structure_of_an_installable_bundle</a><br>XULRunner_tips<br>  <a href="https://developer.mozilla.org/en-US/docs/XULRunner_tips" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XULRunner_tips</a><br>JavaScript code modules<br>  <a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules</a><br>Windows_and_menus<br>  <a href="https://developer.mozilla.org/zh-CN/docs/Windows_and_menus_in_XULRunner" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Windows_and_menus_in_XULRunner</a><br>Dialogs<br>  <a href="https://developer.mozilla.org/en-US/docs/Dialogs_in_XULRunner" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Dialogs_in_XULRunner</a><br>browser<br>  <a href="https://developer.mozilla.org/en-US/docs/XUL/browser" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XUL/browser</a><br>Stream<br>  <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Stream_Guide" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Stream_Guide</a><br>Using JavaScript code modules<br>  <a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Using#Importing_CommonJS_modules" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Using#Importing_CommonJS_modules</a><br>nsIDirectoryService<br>  <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Using_nsIDirectoryService" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Using_nsIDirectoryService</a></p>
<p>A Brief Introduction To XULRunner<br>  <a href="http://www.kodewerx.org/wiki/A_Brief_Introduction_To_XULRunner:_Part_1" target="_blank" rel="noopener">http://www.kodewerx.org/wiki/A_Brief_Introduction_To_XULRunner:_Part_1</a><br>  <a href="http://www.kodewerx.org/wiki/A_Brief_Introduction_To_XULRunner:_Part_2" target="_blank" rel="noopener">http://www.kodewerx.org/wiki/A_Brief_Introduction_To_XULRunner:_Part_2</a></p>
<p>Mozilla 错误代码表 error codes<br>  <a href="https://developer.mozilla.org/en-US/docs/Table_Of_Errors" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Table_Of_Errors</a><br>  <a href="http://james-ross.co.uk/mozilla/misc/nserror_list" target="_blank" rel="noopener">http://james-ross.co.uk/mozilla/misc/nserror_list</a></p>
<p>使用XPCOM:实现高级处理<br>  <a href="http://caoyue.sinaapp.com/?p=430" target="_blank" rel="noopener">http://caoyue.sinaapp.com/?p=430</a></p>
<p>样例代码<br>  <a href="https://github.com/matthewkastor/XULRunner-Examples" target="_blank" rel="noopener">https://github.com/matthewkastor/XULRunner-Examples</a></p>
<p>Mozilla研究<br>  Mozilla研究—用户界面的基本要素 <a href="http://www.cnblogs.com/faunus/archive/2009/04/12/1434213.html" target="_blank" rel="noopener">http://www.cnblogs.com/faunus/archive/2009/04/12/1434213.html</a><br>  Mozilla研究—XUL窗口创建和事件处理 <a href="http://www.cnblogs.com/faunus/archive/2009/04/12/1434214.html" target="_blank" rel="noopener">http://www.cnblogs.com/faunus/archive/2009/04/12/1434214.html</a></p>
<p>Add-ons/Extension Signing<br>  <a href="https://wiki.mozilla.org/Addons/Extension_Signing" target="_blank" rel="noopener">https://wiki.mozilla.org/Addons/Extension_Signing</a>  </p>
<p>system/child_process<br>  <a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/system_child_process" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/system_child_process</a></p>
<h3 id="XUL-应用结构"><a href="#XUL-应用结构" class="headerlink" title="XUL 应用结构"></a>XUL 应用结构</h3><ul>
<li>myapp/<br>|</li>
<li>-+ chrome/<br>| |<br>| +-+ content/<br>| | |<br>| | +– main.xul<br>| | |<br>| | +– main.js<br>| |<br>| +– chrome.manifest //用于向下兼容，可以没有<br>|</li>
<li>-+ defaults/<br>| |<br>| +-+ preferences/<br>|   |<br>|   +– prefs.js<br>|</li>
<li>– application.ini<br>|</li>
<li>– chrome.manifest </li>
</ul>
<p>与 extension 相比，XUL 应用只是多出了 application.ini 文件，但少了intall.rdf。<br>其它部分，如 chrome.manifest 与 extension 中的写法相同。</p>
<ul>
<li>默认执行的 xul<br>The prefs.js file tells XULRunner the name of the XUL file to use as the main window. Here is mine:</li>
</ul>
<p>pref(“toolkit.defaultChromeURI”, “chrome://myapp/content/main.xul”);</p>
<p>如果没有指定，xulrunner 会试图查找 content （chrome.manifest 中，content 指令指明的目录）中与 package 同名的 xul 文件，例如chrome/content/myapp.xul。</p>
<ul>
<li>application.ini<br><a href="https://developer.mozilla.org/en-US/docs/XUL_Application_Packaging" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XUL_Application_Packaging</a></li>
</ul>
<p>注意  Profile=MyAppData 可以指定Profile目录。在linux上是 $HOME/.MyAppData。</p>
<h3 id="Deploying"><a href="#Deploying" class="headerlink" title="Deploying"></a>Deploying</h3><p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Deploying_XULRunner_1.8" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Deploying_XULRunner_1.8</a></p>
<pre><code>installdir/
    application.ini
    components/
        ... components which are part of the application
    chrome/
        ... chrome which is part of the application
    ... additional application files such as icons, etc
    myapplicationname.exe (This is the &quot;stub executable&quot;... you should copy and rename this file from xulrunner-stub.exe in your XULRunner installation.)
    xulrunner/
        ... copy xulrunner/ to this directory</code></pre><p>When deploying with XULRunner 2.0 and above do the following:</p>
<pre><code>Move chrome.manifest to the root directory, and adjust resource paths inside chrome.manifest accordingly

With XULRunner 9.0 or 10.0 you may need to copy &quot;mozutils.dll&quot; and/or &quot;mozcrt19.dll&quot; from the xulrunner directory to the root directory. This should be fixed with XULRunner 11.0

With XULRunner 11.0 you may need to copy &quot;gkmedias.dll&quot; from the xulrunner directory to the root directory</code></pre><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>linux/windows：<br>xulrunner <path_to_app>/application.ini</p>
<p>使用firefox:<br>firefox -app path/to/application.ini</p>
<h3 id="全屏-fullscreen"><a href="#全屏-fullscreen" class="headerlink" title="全屏/fullscreen"></a>全屏/fullscreen</h3><p>xul 26 可支持全屏，但默认没有打开，mybrowser例子可以在about:config中搜索full-screen打开。<br>相关选项：<br>full-screen-api.enabled;true<br>full-screen-api.allow-trusted-requests-only;true<br>full-screen-api.approval-required;true<br>full-screen-api.content-only;false<br>full-screen-api.pointer-lock.enabled;true</p>
<p>一般只需要改 full-screen-api.enabled 一项。</p>
<p>不过窗口管理似乎需要自己实现，mybrowser例子的全屏只是占满整个viewport。</p>
<h3 id="给-xulrunner-安装扩展"><a href="#给-xulrunner-安装扩展" class="headerlink" title="给 xulrunner 安装扩展"></a>给 xulrunner 安装扩展</h3><ul>
<li>FF 扩展的兼容性<br><a href="http://stackoverflow.com/questions/18588542/run-firefox-extensions-in-xulrunner" target="_blank" rel="noopener">http://stackoverflow.com/questions/18588542/run-firefox-extensions-in-xulrunner</a><br>Existing extensions may run, with or without modifications in such a xulrunner app. Well, likely with modifications, as most extensions use APIs specific to Firefox or Thunderbird or …</li>
</ul>
<p>The add-on SDK is not generally isn’t a good fit for generic xulrunner apps: It is too much tailered against Firefox specifically.<br><a href="http://stackoverflow.com/questions/8334415/adding-add-on-bar-to-a-custom-xulrunner-application" target="_blank" rel="noopener">http://stackoverflow.com/questions/8334415/adding-add-on-bar-to-a-custom-xulrunner-application</a></p>
<ul>
<li><p>将扩展安装到 xulrunner 本身中<br>在 xulrunner 目录下建立如下子目录<br>distribution/bundles/&lt;扩展的名字&gt;<br>然后将扩展的文件放到&lt;扩展的名字&gt;下面，让install.rdf、chrome.manifest等文件位于&lt;扩展的名字&gt;目录下；如果是xpi文件则要解压。<br>&lt;扩展的名字&gt; 应该可以随便取。</p>
</li>
<li><p>将扩展安装到 xulrunner app 中<br>在 xulrunner 应用的目录下建立如下子目录：<br>extensions/&lt;扩展的名字&gt;<br>将扩展的文件放到&lt;扩展的名字&gt;下面，让install.rdf、chrome.manifest等文件位于&lt;扩展的名字&gt;目录下。<br>或者将扩展的xpi文件直接放到extensions/下面，例如<br>extensions/&lt;扩展的名字&gt;.xpi<br>注意 &lt;扩展的名字&gt; 不可随便取，应当等于 install.rdf 中的 em:id 的值。</p>
</li>
<li><p>Extension Manager<br><a href="https://developer.mozilla.org/en-US/docs/XULRunner_tips#Extension_Manager" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XULRunner_tips#Extension_Manager</a></p>
</li>
<li><p>扩展的更新<br><a href="http://stackoverflow.com/questions/12055985/updating-extensions-in-a-xulrunner-application" target="_blank" rel="noopener">http://stackoverflow.com/questions/12055985/updating-extensions-in-a-xulrunner-application</a><br>可以设置自动更新扩展</p>
</li>
</ul>
<h3 id="XUL-语法和控件"><a href="#XUL-语法和控件" class="headerlink" title="XUL 语法和控件"></a>XUL 语法和控件</h3><ul>
<li>样式表<?xml-stylesheet href="chrome://global/skin" type="text/css"?>
这个引用的是默认样式表。如果要自定义，可以在自定义样式表中引入，例如<br>in xul:<?xml-stylesheet href="chrome://basicapp/skin/main.css" type="text/css"?>
in basicapp/skin/main.css:<br>@import url(chrome://global/skin/);</li>
</ul>
<p>html 样式表是怎样的？</p>
<ul>
<li><p>namespace<br>xmlns:xul =”<a href="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;" target="_blank" rel="noopener">http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;</a><br>xmlns:html=”<a href="http://www.w3.org/1999/xhtml&quot;" target="_blank" rel="noopener">http://www.w3.org/1999/xhtml&quot;</a><br>注意 xul 中允许混合 html标签。</p>
</li>
<li><p>window<br>这是顶层元素<br>&lt;xul:window title     =”&amp;mybrowser.title;”</p>
<pre><code>xmlns:xul =&quot;http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul&quot;
xmlns:html=&quot;http://www.w3.org/1999/xhtml&quot;
id        =&quot;mybrowser&quot;
width     =&quot;800&quot;
height    =&quot;600&quot;&gt;</code></pre></li>
<li><p>script<br>&lt;xul:script type=”application/javascript”</p>
<pre><code>src=&quot;chrome://myapp/content/mybrowser.js&quot; /&gt;</code></pre><p>html script 可以吗？</p>
</li>
<li><p>browser 组件<br>&lt;xul:browser flex=”1”</p>
<pre><code>id  =&quot;browser&quot;
src =&quot;&quot;
type=&quot;content-primary&quot; /&gt;</code></pre></li>
</ul>
<h2 id="profile"><a href="#profile" class="headerlink" title="profile"></a>profile</h2><p><a href="http://kb.mozillazine.org/Starting_your_Mozilla_application_with_a_specified_profile#Bypassing_the_Profile_Manager" target="_blank" rel="noopener">http://kb.mozillazine.org/Starting_your_Mozilla_application_with_a_specified_profile#Bypassing_the_Profile_Manager</a></p>
<p>启动profile管理器来选择一个profile：<br>  <xul_app> -P<br>直接选择指定的 profile 名字：<br>  <xul_app> -P profileName<br>直接选择指定的 profile 路径。如果是个空目录，则会在该目录中创建新 profile。<br>  <xul_app> -profile path_to_profile</p>
<p><xul_app> 可以是 firefox，xulrunner，xulrunner-stub 等。</p>
<p><xul_app> 最终是调用 XRE_main(argc, argv, …) 函数，以上参数都是传给这个函数的。<br>以编程的方式增加 XRE_main() 的参数也可以实现自定义 profile 路径，例如 duanyao/xulrunner-stub。</p>
<p>另一个自定义 profile 路径的方法是使用 nsIDirectoryServiceProvider，自定义 “ProfD”。geckofx 采用此方法。</p>
<h2 id="extension"><a href="#extension" class="headerlink" title="extension"></a>extension</h2><h3 id="签名"><a href="#签名" class="headerlink" title="签名"></a>签名</h3><p>从 FF 43 起，扩展将被要求有数字签名才能运行。<br>普通版的 FF 没有可以关闭签名验证的选项，而 developer edition 可以通过修改 xpinstall.signatures.required 偏好来关闭签名验证。<br>签名的方法见[Add-ons/Extension Signing]。</p>
<h3 id="Comparing-Extension-Toolchains"><a href="#Comparing-Extension-Toolchains" class="headerlink" title="Comparing_Extension_Toolchains"></a>Comparing_Extension_Toolchains</h3><p><a href="https://developer.mozilla.org/en-US/Add-ons/Comparing_Extension_Toolchains" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Comparing_Extension_Toolchains</a></p>
<p>There are three common methods of developing extensions: the Add-on SDK, manually bootstrapped restartless extensions, and legacy, overlay-based restartful extensions.</p>
<h3 id="传统-extention"><a href="#传统-extention" class="headerlink" title="传统 extention"></a>传统 extention</h3><p>Building_an_Extension<br>  <a href="https://developer.mozilla.org/en-US/docs/Building_an_Extension" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Building_an_Extension</a></p>
<p>Getting_Started_with_Firefox_Extensions<br>  <a href="https://developer.mozilla.org/en-US/Add-ons/Overlay_Extensions/XUL_School/Getting_Started_with_Firefox_Extensions" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Overlay_Extensions/XUL_School/Getting_Started_with_Firefox_Extensions</a></p>
<p>The_Essentials_of_an_Extension<br>  <a href="https://developer.mozilla.org/en-US/Add-ons/Overlay_Extensions/XUL_School/The_Essentials_of_an_Extension" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Overlay_Extensions/XUL_School/The_Essentials_of_an_Extension</a><br>  install.rdf</p>
<p>Setting_up_extension_development_environment<br>  <a href="https://developer.mozilla.org/en-US/Add-ons/Setting_up_extension_development_environment" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Setting_up_extension_development_environment</a></p>
<p>Install_Manifests (intall.rdf)<br>  <a href="https://developer.mozilla.org/en-US/Add-ons/Install_Manifests" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Install_Manifests</a></p>
<p>Chrome_Registration (chrome.manifest)<br>  <a href="https://developer.mozilla.org/en-US/docs/Chrome_Registration" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Chrome_Registration</a></p>
<h3 id="设置开发环境"><a href="#设置开发环境" class="headerlink" title="设置开发环境"></a>设置开发环境</h3><ul>
<li>新建开发 profile<br>firefox -no-remote -P dev</li>
</ul>
<p>-no-remote 是必要的，这样可以同时运行多个ff进程。</p>
<ul>
<li>链接开发中的扩展到 profile<br>定位到刚才创建的 profile 下的 extensions 目录，创建一个文本文件，名字是你的 extension 的 id （在install.rdf中），<br>内容是到你的 extension 的全路径，而且要以 /或\结尾。</li>
</ul>
<h3 id="Bootstrapped-extensions"><a href="#Bootstrapped-extensions" class="headerlink" title="Bootstrapped extensions"></a>Bootstrapped extensions</h3><p><a href="https://developer.mozilla.org/en-US/Add-ons/Bootstrapped_extensions" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Bootstrapped_extensions</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Extensions/bootstrap.js" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Extensions/bootstrap.js</a></p>
<p><a href="http://www.oxymoronical.com/blog/2011/01/Playing-with-windows-in-restartless-bootstrapped-extensions" target="_blank" rel="noopener">http://www.oxymoronical.com/blog/2011/01/Playing-with-windows-in-restartless-bootstrapped-extensions</a></p>
<h3 id="Add-on-SDK"><a href="#Add-on-SDK" class="headerlink" title="Add-on SDK"></a>Add-on SDK</h3><p>The Add-on SDK consists of two things:</p>
<pre><code>a command-line tool to help test and package extensions
a set of JavaScript APIs, built into Firefox, to create extensions, including APIs to build user interfaces, to interact with the browser and to interact with web content</code></pre><p><a href="https://developer.mozilla.org/en-US/Add-ons/SDK" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK</a><br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Installation" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Installation</a><br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Tools/cfx" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Tools/cfx</a><br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials</a><br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/XUL_Migration_Guide" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/XUL_Migration_Guide</a><br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Add_a_Menu_Item_to_Firefox" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Add_a_Menu_Item_to_Firefox</a></p>
<ul>
<li>command line tool<br>If you give –profiledir a path to a nonexistent profile, cfx will create a profile there for you. So you just have to make up a path and name the first time, and keep using it:</li>
</ul>
<p>cfx run –profiledir=”~/addon-dev/profiles/boogaloo”</p>
<ul>
<li>resource<br>属于扩展的资源放在data/目录下，其url的解析要使用<br>self.data.url() 函数，例如：<br>var self = require(“sdk/self”);<br>var url = self.data.url(“content.htm”);<br>得到的结果类似：<br>resource://jid1-mf8k5xsb2s4vng-at-jetpack/hello/data/content.htm</li>
</ul>
<p>注意 resource: 协议下的文档默认是没有特权的。</p>
<ul>
<li><p>High/Low-Level APIs<br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs</a><br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs</a></p>
</li>
<li><p>package.json<br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Tools/package_json" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Tools/package_json</a></p>
</li>
<li><p>chrome<br>chrome.manifest 文件默认是没有的，也没有可以用 chrome: 协议访问的资源。<br>可以在工程根目录下自行建立这些文件，例如<br>chrome.manifest<br>chrome/<br>content/<br>locale/<br>skin/</p>
</li>
</ul>
<p>chrome.manifest 的内容是：<br>content  hello  chrome/content/<br>…</p>
<p>注意，chrome 目录的名字是固定的，否则 SDK 认不出来（其它情况下不要求）。</p>
<ul>
<li>io_file<br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/io_file" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/io_file</a><br><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/io_byte-streams" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/io_byte-streams</a></li>
</ul>
<p>功能不是很强，不适合高效地处理二进制文件。</p>
<h3 id="update"><a href="#update" class="headerlink" title="update"></a>update</h3><p><a href="https://developer.mozilla.org/en/extension_versioning,_update_and_compatibility" target="_blank" rel="noopener">https://developer.mozilla.org/en/extension_versioning,_update_and_compatibility</a></p>
<h3 id="打包和安装"><a href="#打包和安装" class="headerlink" title="打包和安装"></a>打包和安装</h3><p><a href="https://developer.mozilla.org/en-US/Add-ons/Extension_Packaging" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Extension_Packaging</a></p>
<p>An XPI (XPInstall) file is simply a ZIP file containing the extension files, with the install.rdf file at the root of the ZIP. Users can download and install XPI files off a website or from a local file, by opening it or dragging it into the Extension Manager window.</p>
<p>Install extension files directly</p>
<p>If you know the location of the application (if you are installing an extension as part of the application installer, for example), you can install the extension files directly to <appdir>/extensions/<extensionID>. The extension will be found automatically by the extension manager the next time the application is launched.</p>
<h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><p><a href="https://developer.mozilla.org/en-US/Add-ons/Extension_Frequently_Asked_Questions" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Extension_Frequently_Asked_Questions</a></p>
<h2 id="特殊协议chrome-和resource"><a href="#特殊协议chrome-和resource" class="headerlink" title="特殊协议chrome:和resource:"></a>特殊协议chrome:和resource:</h2><p>参考：<br><a href="https://developer.mozilla.org/en-US/docs/Chrome_Registration" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Chrome_Registration</a><br><a href="https://developer.mozilla.org/en-US/docs/XUL/Tutorial/The_Chrome_URL" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XUL/Tutorial/The_Chrome_URL</a></p>
<p>两者都可以用 chrome.manifest 文件来注册</p>
<h3 id="chrome"><a href="#chrome" class="headerlink" title="chrome"></a>chrome</h3><p>content</p>
<p>A content package is registered with the line</p>
<p>content packagename uri/to/files/ [flags]</p>
<p>This will register a location to use when resolving the URI chrome://packagename/content/…. The URI may be absolute or relative to the location of the manifest file. Note: it must end with a ‘/‘.</p>
<p>注意包名（packagename）只能用小写字母，否则会引起大小写不一致的问题，因为<br>FF 会在读取 src/href 等 WebIDL 属性时将包名部分都转化为小写。参考：<br><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=132183" target="_blank" rel="noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=132183</a></p>
<p>chrome 协议下的页面有特权，但是不可以访问 DOM storage。详见 DOM Storage。</p>
<h3 id="resource"><a href="#resource" class="headerlink" title="resource"></a>resource</h3><h3 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h3><ul>
<li>chrome.manifest 注册法<br>在 chrome.manifest 文件中，Aliases can be created using the resource instruction:</li>
</ul>
<p>resource aliasname uri/to/files/ [flags]</p>
<p>This will create a mapping for resource://<aliasname>/ URIs to the path given.</p>
<p>当前目录的写法是 ‘./‘。</p>
<p>chrome.manifest 也可以动态注册、删除，即利用 nsIComponentManager<br><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIComponentManager" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIComponentManager</a></p>
<p>addBootstrappedManifestLocation((in nsILocalFile aLocation)<br>  Loads a “bootstrapped” chrome.manifest file from the specified directory or XPI file. A “bootstrapped” chrome manifest supports some of the instructions allowed in a regular chrome manifest, see the Chrome Registration documentation for details.</p>
<p>void removeBootstrappedManifestLocation(in interface nsILocalFile aLocation);</p>
<p>在 JS 中，可以用 Components.manager 获得实例。<br>在 geckofx 中，可以通过 Xpcom.ComponentManager 属性得到实例。</p>
<ul>
<li>resource 动态注册法<br>也可以在js代码中注册 resource alias<br>参考 <a href="https://developer.mozilla.org/en/Using_JavaScript_code_modules#Programmatically_adding_aliases" target="_blank" rel="noopener">https://developer.mozilla.org/en/Using_JavaScript_code_modules#Programmatically_adding_aliases</a><br>中 Extending resource: URLs 一节。</li>
</ul>
<p>这个方法也可以注册本地磁盘目录为 resource alias。</p>
<p>用于 bootstrap addon 时（参考 <a href="http://starkravingfinkle.org/blog/2011/01/restartless-add-ons-more-resources/）：" target="_blank" rel="noopener">http://starkravingfinkle.org/blog/2011/01/restartless-add-ons-more-resources/）：</a></p>
<p>function startup(aData, aReason) {<br>  let resource = Services.io.getProtocolHandler(“resource”).QueryInterface(Ci.nsIResProtocolHandler);<br>  let alias = Services.io.newFileURI(aData.installPath);<br>  if (!aData.installPath.isDirectory())<br>    alias = Services.io.newURI(“jar:” + alias.spec + “!/“, null, null);<br>  resource.setSubstitution(“myaddonpackage”, alias);<br>  …<br>}</p>
<p>function shutdown(aData, aReason) {<br>  if (aReason == APP_SHUTDOWN) return;</p>
<p>  let resource = Services.io.getProtocolHandler(“resource”).QueryInterface(Ci.nsIResProtocolHandler);<br>  resource.setSubstitution(“myaddonpackage”, null);<br>  …</p>
<p>The isDirectory check is needed because it is possible for add-ons to be installed in folders or XPI bundles, which require the jar: URI syntax. The code adds a resource alias, after which you can use URIs like this:</p>
<p>resource://myaddonpackage/images/someimage.png<br>resource://myaddonpackage/content/somescript.js</p>
<p>注：可以注册多个 resource: 别名。</p>
<ul>
<li><p>限制<br>resource: 映射的路径似乎必须在 addon 的根目录下，否则虽然能注册成功，但访问会失败，xhr访问的时候得到onerror事件，但没有写出原因。</p>
</li>
<li><p>addon-sdk<br>注意：addon-sdk开发的扩展不用 chrome.manifest 注册，即使在 chrome.manifest 写了 resource 指令也是无效的。<br>参考：<a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/XUL_Migration_Guide" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Guides/XUL_Migration_Guide</a><br><a href="https://blog.mozilla.org/addons/2012/01/11/sdk-1-4-known-issue-with-hard-coding-resource-uris/" target="_blank" rel="noopener">https://blog.mozilla.org/addons/2012/01/11/sdk-1-4-known-issue-with-hard-coding-resource-uris/</a><br>addon-sdk 的资源总是在 data 目录下，构建的时候复制到 resources 目录下。<br>addon-sdk 采用动态注册法。</p>
</li>
<li><p>权限<br>resource 协议下的页面没有特权，但是可以访问 DOM storage。详见 DOM Storage。<br>There are no security restrictions preventing web content from including content at resource: URIs, so take care what you make visible there.<br>[似乎是说，任意的web页面也可以访问 resource: URIs，所以不要放敏感内容在这里]</p>
</li>
</ul>
<h2 id="manifest-的其他特性"><a href="#manifest-的其他特性" class="headerlink" title="manifest 的其他特性"></a>manifest 的其他特性</h2><h3 id="chrome-1"><a href="#chrome-1" class="headerlink" title="chrome"></a>chrome</h3><p>chrome path_to_manifest<br>chrome 指令可以用来引入另一个 .manifest 文件，这个文件就不一定要叫 chrome.manifest 了。例如<br>  chrome components.manifest</p>
<h3 id="locale"><a href="#locale" class="headerlink" title="locale"></a>locale</h3><p>  locale branding zh-CN zh-CN/locale/branding/</p>
<h3 id="override"><a href="#override" class="headerlink" title="override"></a>override</h3><p>用来覆盖一个之前（如在omni.ja中）定义的文件，例如<br>  override chrome://global/locale/dom/dom.properties zh-CN/locale/global/dom/dom.properties</p>
<h3 id="interfaces"><a href="#interfaces" class="headerlink" title="interfaces"></a>interfaces</h3><p>用来引入 JS 的 XPCOM 接口定义文件（.xpt），它决定了 Components.interfaces 的内容。<br>  interfaces interfaces.xpt</p>
<h3 id="使用-jar-协议"><a href="#使用-jar-协议" class="headerlink" title="使用 jar 协议"></a>使用 jar 协议</h3><p>manifest 也可以引用位于 zip 包中的位置，这需要在路径部分使用 jar 协议，例如：<br>  content devtools jar:devtools.zip!/chrome/devtools/content/</p>
<p>“jar:” 后面跟上 zip 文件的相对路径，”!” 后面跟上 zip 内部的路径。<br>jar 协议适用于 content, resource, locale 等指令，但似乎不适用 chrome 和 interfaces 指令。</p>
<h2 id="XULRunner-net绑定"><a href="#XULRunner-net绑定" class="headerlink" title="XULRunner .net绑定"></a>XULRunner .net绑定</h2><h3 id="geckofx"><a href="#geckofx" class="headerlink" title="geckofx"></a>geckofx</h3><ul>
<li>源码<br>源码库在此：<a href="https://bitbucket.org/geckofx" target="_blank" rel="noopener">https://bitbucket.org/geckofx</a><br>最新版：<a href="https://bitbucket.org/geckofx/geckofx-29.0" target="_blank" rel="noopener">https://bitbucket.org/geckofx/geckofx-29.0</a></li>
</ul>
<p>已经包含以前的版本，可以导出版本历史：<br>hg log &gt; log.txt<br>然后查找版本号“13.0”之类的tag，然后用hg转到该版本：<br>hg update v13.0-0.1</p>
<ul>
<li>编译</li>
</ul>
<p>下载XULRunner发行版，解压到PutXulRunnerFolderHere中。<br>注意geckofx的版本要和xulrunner一致，它没有向下兼容性。</p>
<p>VS /monodevelpe直接编译即可。运行GeckoFxTest工程。</p>
<ul>
<li>profile 目录<br>默认的是在 local application data directory下，例如<br>C:\Users\duanyao\AppData\Local\Geckofx\DefaultProfile<br>可以通过 Xpcom.ProfileDirectory 设置和读取。</li>
</ul>
<ul>
<li>注册xulrunner应用、扩展<br>geckofx 不会像 xulrunner 可执行程序那样自动注册 xulrunner 应用及其扩展。<br>如果 xulrunner 自带扩展，则扩展仍要逐一注册，不会自动注册。<br>注册至少包括以下3个步骤（顺序应该没关系）：</li>
</ul>
<ul>
<li><p>注册 chrome: 协议映射<br>仍用 chrome.manifest 文件来定义映射，然后调用：<br>Xpcom.ComponentManager.AddBootstrappedManifestLocation(chromeDir)<br>chromeDir 指向 chrome.manifest 文件所在的目录。</p>
</li>
<li><p>注册 XPCOM 组件<br>仍用 chrome.manifest 文件登记组件。<br>Xpcom.ComponentRegistrar.AutoRegister(chromeFile);<br>chromeFile 指向 chrome.manifest 文件（不是目录）。</p>
</li>
<li><p>注册 preference<br>GeckoPreferences.Load(preffile);<br>preffile 指向包含 pref 调用的 js 文件。</p>
</li>
</ul>
<p>注意，这个方法是有副作用的：将preffile设置为用户的pref文件，这样，当用户通过 about:config 修改偏好后，会把用户设置的偏好都写入该文件。<br>不过，通过 GeckoPreferences.User[] 设置的偏好则不会触发写入，但写入时会包括GeckoPreferences.User[]设置的值。<br>为了避免覆盖 preffile，可以多次调用 GeckoPreferences.Load，在最后一次传入一个临时文件。<br>GeckoPreferences.Load 最终调用 xpcom 接口 nsIPrefService::ReadUserPrefs()，ReadUserPrefs 的这个行为可能是bug。<br>nsIPrefService::ReadUserPrefs() 的实现在：<br><a href="http://mxr.mozilla.org/mozilla-central/source/modules/libpref/src/Preferences.cpp#581" target="_blank" rel="noopener">http://mxr.mozilla.org/mozilla-central/source/modules/libpref/src/Preferences.cpp#581</a><br>  ReadAndOwnUserPrefFile(aFile); //这应该是原因所在，故意的。<br>虽然文档上说可以给 nsIPrefService::ReadUserPrefs() 传入 null，将读取默认的 pref.js，但实际上会抛出异常。我们注意到在geckofx的profile目录下，没有pref.js，这可能是geckofx的bug。<br>所以，为了避免麻烦，在geckofx上不要通过 about:config 修改偏好。</p>
<ul>
<li>窗口</li>
</ul>
<ul>
<li>创建隐藏窗口<br>AppShellService.CreateHiddenWindow() </li>
</ul>
<ul>
<li>mozilla IDL 到 C# 的翻译器 IDLImp or IDLImporter<br><a href="https://bitbucket.org/geckofx/idlimp" target="_blank" rel="noopener">https://bitbucket.org/geckofx/idlimp</a><br>如果要使用自定义的 XPCOM 组件，可以用这个工具生成 C# 接口。不过好像有一些错误。</li>
</ul>
<h3 id="OpenGeckoSharp"><a href="#OpenGeckoSharp" class="headerlink" title="OpenGeckoSharp"></a>OpenGeckoSharp</h3><p><a href="https://github.com/quantum1423/OpenGeckoSharp" target="_blank" rel="noopener">https://github.com/quantum1423/OpenGeckoSharp</a></p>
<h2 id="JSM"><a href="#JSM" class="headerlink" title="JSM"></a>JSM</h2><p>Using_JavaScript_code_modules <a href="https://developer.mozilla.org/en/Using_JavaScript_code_modules" target="_blank" rel="noopener">https://developer.mozilla.org/en/Using_JavaScript_code_modules</a><br>通过Javascript code modules在XUL文件之间使用全局变量  <a href="http://blog.csdn.net/forumz/article/details/5719678" target="_blank" rel="noopener">http://blog.csdn.net/forumz/article/details/5719678</a></p>
<p>var EXPORTED_SYMBOLS = [“foo”, “bar”];<br>function foo() {<br>  return “foo”;<br>}<br>var bar = {<br>  name : “bar”,<br>  size : “3”<br>};<br>var dummy = “dummy”;</p>
<p>注意：对于 xulrunner 应用，如果修改了 jsm 文件，则必需修改 application.ini 中的 BuildID，否则实际加载的总是旧版本！</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Services.jsm" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Services.jsm</a></p>
<p>Services.jsm<br>In This Article</p>
<p>The Services.jsm JavaScript code module offers a wide assortment of lazy getters that simplify the process of obtaining references to commonly used services.</p>
<h3 id="使用-CommonJS-模块"><a href="#使用-CommonJS-模块" class="headerlink" title="使用 CommonJS 模块"></a>使用 CommonJS 模块</h3><p>// import require() into your scope.<br>const { require } = Cu.import(“resource://gre/modules/commonjs/toolkit/require.js”, {})<br>// import the SDK’s base64 module<br>var base64 = require(“sdk/base64”);<br>base64.encode(“hello”); // “aGVsbG8=”<br>// import my module<br>var myModule = require(“resource://path/to/my/module.js”);</p>
<h2 id="preference"><a href="#preference" class="headerlink" title="preference"></a>preference</h2><p><a href="https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Preferences" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Preferences</a><br><a href="http://stackoverflow.com/questions/3796084/about-config-preferences-and-js" target="_blank" rel="noopener">http://stackoverflow.com/questions/3796084/about-config-preferences-and-js</a></p>
<p>// Get the “accessibility.” branch<br>var prefs = Components.classes[“@mozilla.org/preferences-service;1”]<br>                    .getService(Components.interfaces.nsIPrefService).getBranch(“accessibility.”);</p>
<p>// prefs is an nsIPrefBranch.<br>// Look in the above section for examples of getting one.<br>var value = prefs.getBoolPref(“typeaheadfind”); // get a pref (accessibility.typeaheadfind)<br>prefs.setBoolPref(“typeaheadfind”, !value); // set a pref (accessibility.typeaheadfind)</p>
<p>preference 条目的文档<br><a href="http://kb.mozillazine.org/About%3aconfig_entries" target="_blank" rel="noopener">http://kb.mozillazine.org/About%3aconfig_entries</a></p>
<p>defaults/preferences/prefs.js 不支持编程结构，参考<br>  <a href="https://developer.mozilla.org/en-US/docs/Default_Preferences" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Default_Preferences</a></p>
<p>保存 prefs<br>var prefService = Components.classes[“@mozilla.org/preferences-service;1”]<br>                               .getService(Components.interfaces.nsIPrefService);<br>prefService.savePrefFile(null);</p>
<h2 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h2><p>File I/O<br>  <a href="https://developer.mozilla.org/en-US/Add-ons/Code_snippets/File_I_O" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Code_snippets/File_I_O</a></p>
<p>nsIFile<br>  <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIFile" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIFile</a></p>
<p>FileUtils.jsm<br>  <a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/FileUtils.jsm?redirectlocale=en-US&amp;redirectslug=JavaScript_code_modules%2FFileUtils.jsm" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/FileUtils.jsm?redirectlocale=en-US&amp;redirectslug=JavaScript_code_modules%2FFileUtils.jsm</a></p>
<ul>
<li>OS.File<br><a href="https://developer.mozilla.org/en-US/docs/JavaScript_OS.File" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/JavaScript_OS.File</a></li>
</ul>
<p>OS.File is a new API designed for efficient, off-main thread, manipulation of files by privileged JavaScript code. This API is intended to replace, in time, most XPCOM-based manipulation of files (nsIFile, subsets of nsIIOService, etc.) by JavaScript code.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/JavaScript_OS.File/OS.File_for_the_main_thread" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/JavaScript_OS.File/OS.File_for_the_main_thread</a><br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/OSFile.jsm/OS.File.DirectoryIterator_for_the_main_thread</a><br><a href="https://developer.mozilla.org/en-US/docs/JavaScript_OS.File/OS.Path" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/JavaScript_OS.File/OS.Path</a></p>
<p>XUL环境下的文件 IO 用这个库应该就足够了，不需要再与 sream 打交道。</p>
<p>OS.File.copy(sourcePath, destPath) 函数可以用于复制文件，不过似乎存在bug，在复制完成前promise就会完成：<br><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1166027" target="_blank" rel="noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=1166027</a></p>
<p>一些有用的路径：<br>  OS.Constants.Path.profileDir profile 的路径。如果在 application.ini 中设置了 Profile=MyAppData，则 OS.Constants.Path.profileDir 为 $HOME/.MyAppData/xxx.default。<br>  tmpDir 临时目录<br>  homeDir 用户主目录</p>
<ul>
<li>特殊路径<br>var iop = Components.classes[“@mozilla.org/file/directory_service;1”]<pre><code>.getService(Components.interfaces.nsIProperties);</code></pre>var dir = iop.get(“ProfD”, Components.interfaces.nsIFile);</li>
</ul>
<p>其中 ProfD 可以替换为：<br>CurProcD     Current working directory (usually the application’s installation directory).<br>ProfD     The profile directory.<br>Home     The user’s home directory (for example, /home/username).<br>更多的值可以参考：<br><a href="https://developer.mozilla.org/en-US/Add-ons/Code_snippets/File_I_O" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Code_snippets/File_I_O</a></p>
<ul>
<li><p>HTML5 File API<br><a href="https://developer.mozilla.org/en-US/docs/Web/API/File" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/File</a><br>Gecko notes</p>
<p>  In Gecko, you can use this(File) API from chrome code. See Using the DOM File API in chrome code for details.<br>  Starting in Gecko 6.0 (Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3), privileged code (such as extensions) can pass an nsIFile object to the DOM File constructor to specify the file to reference.<br>  Starting in Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5), you can use new File to create File objects from XPCOM component code instead of having to instantiate the nsIDOMFile object directly.</p>
</li>
</ul>
<p><a href="https://developer.mozilla.org/en-US/docs/Extensions/Using_the_DOM_File_API_in_chrome_code" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Extensions/Using_the_DOM_File_API_in_chrome_code</a></p>
<p>不过，看来这种用法只适于读文件，而不是写文件。</p>
<p>在特权代码中，File.mozFullPath 属性表示 File 对象的全路径。</p>
<ul>
<li><p>Channel<br><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChannel" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChannel</a><br>This interface allows clients to construct ‘GET’ requests for specific protocols, and manage them in a uniform way. </p>
</li>
<li><p>Stream<br>Binary Stream<br><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIBinaryOutputStream" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIBinaryOutputStream</a><br><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIBinaryInputStream" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIBinaryInputStream</a></p>
</li>
</ul>
<p>Stream_Guide<br>  <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Stream_Guide" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Stream_Guide</a><br>ScriptableInputStream<br>  <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIScriptableInputStream" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIScriptableInputStream</a></p>
<ul>
<li><p>NetUtil<br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/NetUtil.jsm" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/NetUtil.jsm</a></p>
<p>asyncFetch()</p>
</li>
</ul>
<p>The asyncFetch() method opens an input source, asynchronously, and gives an nsIInputStream containing the data obtained to the callback provided. The callback may then consume data from the input stream passed to the callback.</p>
<p>readInputStreamToString()</p>
<h2 id="DOM-Storage"><a href="#DOM-Storage" class="headerlink" title="DOM Storage"></a>DOM Storage</h2><p>chrome: 协议代码中无法使用 localStorage/sessionStorage 等。尽管这些对象是存在的，但访问它们会出现异常。参考：<br>Can’t access localStorage from chrome:// <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=495747" target="_blank" rel="noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=495747</a> 未来可能会解决。</p>
<p>注意，也无法将 localStorage 替换为自定义实现，赋值无效。<br>可能的变通是：</p>
<ol>
<li><p>使用 resource: 协议代码。但这种代码没有特权。参考<br><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=562646" target="_blank" rel="noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=562646</a></p>
</li>
<li><p>1 另一个变体是，使用http等协议，但是拦截请求。</p>
</li>
<li><p>将自定义实现绑定到另一个名字，例如 xxxLocalStorage。<br>具体的，可以使用 XPCOM 获得一个绑定到普通域的 localStorage，然后绑定到 xxxLocalStorage。参考<br><a href="http://stackoverflow.com/questions/20195541/html-5-local-storage-in-xul-application" target="_blank" rel="noopener">http://stackoverflow.com/questions/20195541/html-5-local-storage-in-xul-application</a></p>
</li>
</ol>
<p>var url = “<a href="http://example.com&quot;" target="_blank" rel="noopener">http://example.com&quot;</a>;<br>var ios = Components.classes[“@mozilla.org/network/io-service;1”]<br>          .getService(Components.interfaces.nsIIOService);<br>var ssm = Components.classes[“@mozilla.org/scriptsecuritymanager;1”]<br>          .getService(Components.interfaces.nsIScriptSecurityManager);<br>var dsm = Components.classes[“@mozilla.org/dom/storagemanager;1”]<br>          .getService(Components.interfaces.nsIDOMStorageManager);</p>
<p>var uri = ios.newURI(url, “”, null);<br>var principal = ssm.getCodebasePrincipal(uri);<br>var storage = dsm.getLocalStorageForPrincipal(principal, “”);</p>
<p>storage.setItem(“chromekey”, “chromevalue”);</p>
<h2 id="Javascript-集成"><a href="#Javascript-集成" class="headerlink" title="Javascript 集成"></a>Javascript 集成</h2><p>XPConnect<br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/XPConnect" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/XPConnect</a></p>
<p>mozIJSSubScriptLoader<br><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/mozIJSSubScriptLoader" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/mozIJSSubScriptLoader</a><br>This interface can be used from privileged JavaScript to load and run JavaScript code from the given URL at runtime.<br>var mozIJSSubScriptLoader = Components.classes[“@mozilla.org/moz/jssubscript-loader;1”]<br>                            .getService(Components.interfaces.mozIJSSubScriptLoader);</p>
<h3 id="geckofx-js-and-native-interop"><a href="#geckofx-js-and-native-interop" class="headerlink" title="geckofx js and native interop"></a>geckofx js and native interop</h3><p>D:\project\geckofx-29.0.hg\Geckofx-Core\AutoJSContext.cs<br>D:\project\geckofx-29.0.hg\Geckofx-Core\JQuery\JQueryExecutor.cs<br>D:\project\geckofx-29.0.hg\Geckofx-Core\Interop\SpiderMonkey\SpiderMonkey.cs</p>
<p>D:\project\geckofx-29.0.hg\GeckofxUnitTests\GeckoWebBrowserTests.cs<br>D:\project\geckofx-29.0.hg\GeckofxUnitTests\XPConnectTests.cs<br>D:\project\geckofx-29.0.hg\GeckofxUnitTests\XpComTests.cs</p>
<pre><code>public void EvaluateScript_SimpleJavascript_ScriptExecutesAndReturnsExpectedResult()
{
    browser.TestLoadHtml(&quot;&quot;);

    using (AutoJSContext context = new AutoJSContext(browser.Window.JSContext))
    {                
        string result;
        Assert.IsTrue(context.EvaluateScript(&quot;3 + 2;&quot;, out result));
        Assert.AreEqual(5, Int32.Parse(result));

        Assert.IsTrue(context.EvaluateScript(&quot;&apos;hello&apos; + &apos; &apos; + &apos;world&apos;;&quot;, out result));
        Assert.AreEqual(&quot;hello world&quot;, result);
    }                
}</code></pre><p>var instance = Xpcom.CreateInstance<nsISupports>(“@mozilla.org/byte-buffer;1”);</p>
<h2 id="页面加载状态监视和错误处理"><a href="#页面加载状态监视和错误处理" class="headerlink" title="页面加载状态监视和错误处理"></a>页面加载状态监视和错误处理</h2><p><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebProgressListener" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIWebProgressListener</a></p>
<p>LOCATION_CHANGE_ERROR_PAGE This flag indicates that aWebProgress redirected from the requested document to an internal page to show error status, such as about:neterror, about:certerror and so on. </p>
<h3 id="geckofx-1"><a href="#geckofx-1" class="headerlink" title="geckofx"></a>geckofx</h3><p>GeckoWebBrowser 有以下.net事件：<br>browser.Navigating<br>  开始导航到某个页面。注意这个事件也会在页面内导航、子框架（frame）导航时产生。<br>  GeckoNavigatingEventArgs.DomWindowTopLevel表示是否是顶层窗口的导航事件, GeckoNavigatingEventArgs.DomWindow 为事件相关的窗口。<br>  这时可以取消导航，GeckoNavigatingEventArgs 是 CancelEventArgs 的子类。<br>browser.Navigated<br>  导航结束，页面将开始解析（如果是新页面）。注意这个事件也会在错误页面、页面内导航、子框架（frame）导航时产生。<br>  （1）如果是新页面，这时JS上下文已经创建，可以注入和执行JS（AutoJSContext.EvaluateScript）；但页面本身尚未解析，html中的JS都还没有开始执行，<br>  因此这是注入跨语言交互代码的理想时机。<br>  （2）如果加载页面时发生网络错误，并且启用了内置错误页面（设置偏好 browser.xul.error_pages.enabled = true），则 GeckoNavigatedEventArgs.IsErrorPage == true；但HTTP错误（4xx, 5xx）不会反映在这里（TODO 如何检测）。顺提，如果没有启用了内置错误页面，则网络错误会通过对话框报告，详见PromptService。<br>  （3）GeckoNavigatedEventArgs.IsSameDocument 表示结局是否仍为原来的文档（即页面内跳转）；GeckoNavigatedEventArgs.DomWindowTopLevel 表示是否是顶层窗口的导航事件，<br>    GeckoNavigatedEventArgs.DomWindow 为事件相关的窗口。<br>browser.Load<br>  类似于 js window.onload 事件，不过会在 js window.onload 事件之前执行。所以如果有要在网页加载完后做处理，更好的时机是 DocumentCompleted 事件。<br>browser.ReadyStateChange<br>  等效于 JS 中的 document 的 readystatechange 事件，可以通过 browser.Window.Document.ReadyState:string 查询状态，有interactive, complete等。<br>browser.DocumentCompleted<br>  新页面、无网络错误时，在 Load 和 JS load 事件之后触发。<br>  如果要对加载完的页面做修改，这是个合适的地方。<br>  GeckoDocumentCompletedEventArgs 与 GeckoNavigatedEventArgs 类似，注意区分错误页面（无此参数）、页面内导航、子框架导航，HTTP错误。<br>  注意，如果有网络错误，并加载了错误页面，这个事件会在 Navigated 事件之前发生。</p>
<p>总结一下网络错误、并加载了错误页面时的事件：</p>
<p>使用服务器上关闭的端口时，此方法被调用<br>void nsIWebProgressListener.OnStatusChange(nsIWebProgress aWebProgress, nsIRequest aRequest, int aStatus, string aMessage)<br>aMessage    aStatus<br>Looking up <a href="http://www.baidu.com…">www.baidu.com…</a>   -2142568445<br>Connecting to <a href="http://www.baidu.com…">www.baidu.com…</a>    -2142568441</p>
<p>void nsIWebProgressListener.OnStateChange(nsIWebProgress aWebProgress, nsIRequest aRequest, uint aStateFlags, int aStatus)</p>
<p>PromptService : nsIPromptService2,nsIPrompt</p>
<h2 id="Clipboard"><a href="#Clipboard" class="headerlink" title="Clipboard"></a>Clipboard</h2><p><a href="https://developer.mozilla.org/en-US/docs/Using_the_Clipboard" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Using_the_Clipboard</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Jetpack/docs/System/Clipboard" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Jetpack/docs/System/Clipboard</a></p>
<h2 id="Debugging-调试"><a href="#Debugging-调试" class="headerlink" title="Debugging/调试"></a>Debugging/调试</h2><p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Debugging_XULRunner_applications" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Debugging_XULRunner_applications</a></p>
<h3 id="prefs"><a href="#prefs" class="headerlink" title="prefs"></a>prefs</h3><p>/* debugging prefs */<br>pref(“browser.dom.window.dump.enabled”, true);<br>pref(“javascript.options.showInConsole”, true);<br>pref(“javascript.options.strict”, true);<br>pref(“nglayout.debug.disable_xul_cache”, true);<br>pref(“nglayout.debug.disable_xul_fastload”, true);</p>
<p>也可以打开 about:config 来设置。</p>
<h3 id="本地控制台"><a href="#本地控制台" class="headerlink" title="本地控制台"></a>本地控制台</h3><p>也就是window.dump()方法，打印到操作系统控制台。默认情况下，dump没有启用，要设置偏好：<br>pref(“browser.dom.window.dump.enabled”, true);</p>
<p>在windows上，GUI程序默认没有控制台，要采用 -console 参数来启动 FF/xulrunner 才可以打开控制台。<br>此外，windows 的控制台默认编码不是UTF-8，中文系统上是 GBK，这会导致 dump 输出的中文乱码。</p>
<p>启动控制台编码  重定向文件编码 控制台编码 控制台是否乱码<br>utf8    utf8  gbk 是<br>gbk utf8    gbk 是</p>
<h3 id="debug-server"><a href="#debug-server" class="headerlink" title="debug server"></a>debug server</h3><p>参考<br>[1] <a href="https://developer.mozilla.org/en-US/docs/Tools/Remote_Debugging/Debugging_Firefox_Desktop" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Tools/Remote_Debugging/Debugging_Firefox_Desktop</a><br>[2]（37+已过时） <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Debugging_XULRunner_applications" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Debugging_XULRunner_applications</a></p>
<p>怎样跟踪 firefox 中调试服务代码的变化？</p>
<ul>
<li>调试服务的源码是 devtools 的一部分，在 devtools/ 目录下；发布后则在 omni.ja!/modules/devtools 中。</li>
<li>可以在 mxr 搜索源码中的关键字：start-debugger-server（启动调试服务的命令行参数）, DebuggerServer, 6000 (调试服务的默认端口), &quot;devtools&quot;, debugger 等。</li>
</ul>
<p>在xul应用中，要打开DebuggerServer[2]（这个方法对 37+ 就不适用了）：<br>Components.utils.import(‘resource://gre/modules/devtools/dbg-server.jsm’);<br>if (!DebuggerServer.initialized) {<br>  DebuggerServer.init();<br>  DebuggerServer.addBrowserActors(null);<br>}<br>DebuggerServer.openListener(6000);<br>并设置属性允许远程调试：<br>pref(“devtools.debugger.remote-enabled”, true);</p>
<p>对于geckofx来说，每个进程只需要运行这个过程一次即可，不需要在每个窗口中运行。</p>
<p>然后用ff的 web开发者-&gt;连接 来进行远程调试。</p>
<p>远程调试 firefox 37+ 时，用<br>firefox.exe -P a_profile -no-remote -start-debugger-server 6101<br>启动被调试进程，设定允许chrome调试和远程调试，然后用另一个 firefox 实例连接调试。</p>
<p>或者，在浏览器中打开 chrome://browser/content/browser.xul 直接调试。</p>
<p>对于 xulrunner 37+，可以参考 firefox 的代码：</p>
<p>function startDebugNew() {<br>//<a href="http://mxr.mozilla.org/mozilla-central/search?string=start-debugger-server" target="_blank" rel="noopener">http://mxr.mozilla.org/mozilla-central/search?string=start-debugger-server</a><br>//<a href="http://mxr.mozilla.org/mozilla-central/source/browser/devtools/devtools-clhandler.js#28" target="_blank" rel="noopener">http://mxr.mozilla.org/mozilla-central/source/browser/devtools/devtools-clhandler.js#28</a><br>    var portOrPath = 6101;<br>    let { DevToolsLoader } =<br>      Cu.import(“resource://gre/modules/devtools/Loader.jsm”, {});</p>
<pre><code>try {
  // Create a separate loader instance, so that we can be sure to receive
  // a separate instance of the DebuggingServer from the rest of the
  // devtools.  This allows us to safely use the tools against even the
  // actors and DebuggingServer itself, especially since we can mark
  // serverLoader as invisible to the debugger (unlike the usual loader
  // settings).
  let serverLoader = new DevToolsLoader();
  serverLoader.invisibleToDebugger = true;
  serverLoader.main(&quot;devtools/server/main&quot;);
  let debuggerServer = serverLoader.DebuggerServer;
  debuggerServer.init();
  debuggerServer.addBrowserActors();
  debuggerServer.allowChromeProcess = true;

  let listener = debuggerServer.createListener();
  listener.portOrPath = portOrPath;
  listener.open();
  dump(&quot;startDebugNew:Started debugger server on &quot; + portOrPath + &quot;\n&quot;);
} catch(e) {
  dump(&quot;startDebugNew:Unable to start debugger server on &quot; + portOrPath + &quot;: &quot; + e);
}</code></pre><p>}</p>
<p>对于 xulrunner 45+ （实际上是firefox 45+ 伪装的），xulrunner 的 omni.ja 缺少了</p>
<h3 id="JavaScript-Console"><a href="#JavaScript-Console" class="headerlink" title="JavaScript Console"></a>JavaScript Console</h3><p>To enable the JS console, start XULRunner with the -jsconsole argument.<br>Note: If you are not using the stub executable to launch the application, the -jsconsole argument is after the application.ini argument: e.g. xulrunner.exe /path/to/application.ini -jsconsole</p>
<p>By default the JS console only shows errors from web content. To show errors in chrome JavaScript, the pref pref(“javascript.options.showInConsole”, true) must be set.</p>
<p>不过，console.log/error 输出的信息似乎无法显示在 JavaScript Console 中，eval也无法访问执行上下文中的对象，只有未捕获异常才会显示出来。</p>
<h3 id="本地js调试器"><a href="#本地js调试器" class="headerlink" title="本地js调试器"></a>本地js调试器</h3><ul>
<li>Venkman<br>这个扩展可以弹出一个gui调试器，不过需要在应用中去调用 Venkman 的函数，因此有特权代码可以启动它。<br>安装到 xulrunner 中的办法参考本文”给 xulrunner 安装扩展“一节。<br>按照此处的指引安装 Venkman 是可以的（注意装到xulrunner目录下），注意Troubleshooting一节。<br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Debugging_XULRunner_applications" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Projects/XULRunner/Debugging_XULRunner_applications</a></li>
</ul>
<h3 id="mozrepl"><a href="#mozrepl" class="headerlink" title="mozrepl"></a>mozrepl</h3><p><a href="https://github.com/bard/mozrepl/" target="_blank" rel="noopener">https://github.com/bard/mozrepl/</a> – 原版<br><a href="https://github.com/duanyao/mozrepl" target="_blank" rel="noopener">https://github.com/duanyao/mozrepl</a> – 打补丁适配 geckofx 的版本</p>
<p>这个扩展可以安装到FF、xulrunner app 或 xulrunner 本身当中。运行时，它在被调试的进程中开启一个telnet服务（端口4242），用telnet客户端连结上去以后可以执行js表达式和语句。<br>不过，它目前似乎在 geckofx 中跑不起来。</p>
<p>安装到 xulrunner 中的办法参考本文”给 xulrunner 安装扩展“一节。</p>
<p>运行 app 时，追加 -repl 参数即可启动 mozrepl。<br>如果要自动启动，设置 pref extensions.mozrepl.autoStart = true（mozrepl/defaults/preferences/mozrepl.js中）。</p>
<p>连接：<br>localhost 4242</p>
<p>在Windows上，如果没有 telnet 命令，可以安装 netcat 来代替：<br><a href="http://code.google.com/p/yesanshare/downloads/detail?name=nc111nt.zip&amp;can=2&amp;q=" target="_blank" rel="noopener">http://code.google.com/p/yesanshare/downloads/detail?name=nc111nt.zip&amp;can=2&amp;q=</a><br>安装 nc.exe 到 path 中，然后<br>nc localhost 4242</p>
<p>命令参考：<br><a href="https://github.com/bard/mozrepl/wiki/Tutorial" target="_blank" rel="noopener">https://github.com/bard/mozrepl/wiki/Tutorial</a></p>
<ul>
<li>geckofx 适配<br>在.net代码中，首先要按照geckofx一节中”注册xulrunner应用、扩展“的描述注册 mozrepl，然后启动服务器：<br>var mozrepl = Xpcom.CreateInstance&lt;MozRepl.nsIMozRepl&gt;(“@hyperstruct.net/mozlab/mozrepl;1”);<br>mozrepl.Start(4242, true | false);</li>
</ul>
<p>geckofx 的一个问题是 nsIWindowMediator 没有包含任何窗口，所以要查询 nsIWindowWatcher 来代替，详见：<br><a href="https://github.com/duanyao/mozrepl" target="_blank" rel="noopener">https://github.com/duanyao/mozrepl</a></p>
<ul>
<li>代码分析<br>mozrepl 监听 profile-after-change 事件（似乎会在程序启动时触发），如果设置了 autoStart = true，则启动服务器。</li>
</ul>
<p>profile-after-change 监听是在 chrome.manifest 中注册的，参考：<br><a href="http://stackoverflow.com/questions/3169852/how-to-listen-to-profile-after-change-in-xpcom-component-for-ff4" target="_blank" rel="noopener">http://stackoverflow.com/questions/3169852/how-to-listen-to-profile-after-change-in-xpcom-component-for-ff4</a><br>监听的实现代码在 mozrepl/chrome/content/server.js:observe</p>
<p>服务器是个 XPCOM 组件。<br>接口：nsIMozRepl（MozRepl.idl）<br>实现：mozrepl/chrome/content/server.js<br>CONTRACT_ID = ‘@hyperstruct.net/mozlab/mozrepl;1’<br>CLASS_ID = 57f4284b-1f9b-4990-8525-9ed5cbb23e01<br>启动、停止服务器的方法是<br>void start(in short port, in boolean loopbackOnly);<br>void stop();</p>
<h3 id="本地代码调试"><a href="#本地代码调试" class="headerlink" title="本地代码调试"></a>本地代码调试</h3><p>VS 中设置 Mozilla symbol server<br><a href="https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_symbol_server" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_symbol_server</a></p>
<p>对于 xulrunner 设置 symbol server<br><a href="http://symbols.mozilla.org/xulrunner" target="_blank" rel="noopener">http://symbols.mozilla.org/xulrunner</a></p>
<p>并且只允许加载下面的符号，以免太慢<br>xul.dll<br>mozjs.dll<br>mozglue.dll</p>
<p>以及 Mozilla source server<br><a href="https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_source_server" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Using_the_Mozilla_source_server</a></p>
<p>也可以下载源码包，解压后，当用VS调试时点击调用栈，VS会询问源文件的位置，选择解压后的源文件即可。<br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Source_Code/Downloading_Source_Archives" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Source_Code/Downloading_Source_Archives</a></p>
<h2 id="拦截网络请求"><a href="#拦截网络请求" class="headerlink" title="拦截网络请求"></a>拦截网络请求</h2><p>Firefox 扩展可以拦截网络请求和回复，因此可以用特殊的http url表示模拟的本地文件系统。<br>参考：<br>  <a href="http://stackoverflow.com/questions/2141469/create-firefox-addon-to-watch-and-modify-xhr-requests-reponses" target="_blank" rel="noopener">http://stackoverflow.com/questions/2141469/create-firefox-addon-to-watch-and-modify-xhr-requests-reponses</a><br>  <a href="http://www.softwareishard.com/blog/firebug/nsitraceablechannel-intercept-http-traffic/" target="_blank" rel="noopener">http://www.softwareishard.com/blog/firebug/nsitraceablechannel-intercept-http-traffic/</a><br>  <a href="http://stackoverflow.com/questions/7222577/firefox-extension-cancel-requests-and-emit-fake-responses" target="_blank" rel="noopener">http://stackoverflow.com/questions/7222577/firefox-extension-cancel-requests-and-emit-fake-responses</a><br>  <a href="https://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Intercepting_Page_Loads" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XUL/School_tutorial/Intercepting_Page_Loads</a><br>  <a href="https://developer.mozilla.org/en-US/docs/Observer_Notifications" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Observer_Notifications</a> http-on-opening-request</p>
<ul>
<li><p>The Easy Way: Load Events<br>监听全局浏览器对象 gBrowser 的 “load” 事件。这个事件类似 web 中的 load 事件，是针对tab中的主文档或iframe中的文档的。<br>可以趁机修改DOM，但是不能在DOM构建前取消或修改响应。</p>
</li>
<li><p>HTTP Observers<br>对每个http请求都发出事件。允许在请求发出前修改头，或者取消请求，或者在收到响应后修改响应。<br>使用 nsITraceableChannel，可以在收到响应后修改内容，然后再传递给原来的发起者。<br>相关文档：<br><a href="https://developer.mozilla.org/en-US/docs/Observer_Notifications" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Observer_Notifications</a><br><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/NsITraceableChannel" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/NsITraceableChannel</a><br>但是，看起来请求还是会发到原来请求的url，并不能做成完全合成的请求/响应。</p>
</li>
<li><p>WebProgressListeners<br>针对每个 xul browser 实例（也就是浏览器tab），每个tab打开关闭的时候要添加删除监听器。</p>
</li>
<li><p>XPCOM Solutions<br>Document Loader Service<br>相当于全局 Web Progress Listener.<br>nsIDocumentLoader is nothing but a global Web Progress Listener. You can create an XPCOM component that extends nsIWebProgressListener and use the addProgressListener method in the service to include it. </p>
</li>
</ul>
<p>Content Policy<br>只能用于取消请求。</p>
<h2 id="自定义协议处理器"><a href="#自定义协议处理器" class="headerlink" title="自定义协议处理器"></a>自定义协议处理器</h2><p>Firefox 扩展可以添加自定义协议处理器。<br>  <a href="http://mike.kaply.com/2011/01/18/writing-a-firefox-protocol-handler/" target="_blank" rel="noopener">http://mike.kaply.com/2011/01/18/writing-a-firefox-protocol-handler/</a><br>  <a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProtocolHandler" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProtocolHandler</a></p>
<h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><p><a href="https://developer.mozilla.org/en-US/docs/Displaying_web_content_in_an_extension_without_security_issues" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Displaying_web_content_in_an_extension_without_security_issues</a></p>
<p><a href="https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Interaction_between_privileged_and_non-privileged_pages" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Interaction_between_privileged_and_non-privileged_pages</a></p>
<h3 id="同源规则"><a href="#同源规则" class="headerlink" title="同源规则"></a>同源规则</h3><p>mozilla 平台似乎没有 chrome 那样的命令行或API可以关掉同源规则。参考：<br><a href="http://stackoverflow.com/questions/17711924/disable-cross-domain-web-security-in-firefox" target="_blank" rel="noopener">http://stackoverflow.com/questions/17711924/disable-cross-domain-web-security-in-firefox</a><br><a href="http://stackoverflow.com/questions/17088609/disable-firefox-same-origin-policy" target="_blank" rel="noopener">http://stackoverflow.com/questions/17088609/disable-firefox-same-origin-policy</a><br><a href="http://stackoverflow.com/questions/330427/can-i-disable-sop-same-origin-policy-on-any-browser-for-development" target="_blank" rel="noopener">http://stackoverflow.com/questions/330427/can-i-disable-sop-same-origin-policy-on-any-browser-for-development</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file:_URIs" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file:_URIs</a></p>
<p>Force CORS Firefox Extension<br><a href="http://www-jo.se/f.pfleger/forcecors" target="_blank" rel="noopener">http://www-jo.se/f.pfleger/forcecors</a></p>
<p>过去的FF，可以修改 profile 目录下的 prefs.js，加入<br>user_pref(“capability.principal.myapp.id”, “file:///D:/project/MyHTML/xhrtest.html”);<br>user_pref(“capability.principal.myapp.granted”, “UniversalBrowserRead”);<br>注意 about:config 不显示这类配置。<br>但是看起来这个特性被删除了，不起作用，而且FF关闭时会删除这样的配置。</p>
<p>总结起来就是，最近的FF（28+），不支持放开非特权页面的特权，只有 chrome: 协议的页面能绕开同源限制。参考：<br><a href="https://developer.mozilla.org/en-US/docs/Bypassing_Security_Restrictions_and_Signing_Code" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Bypassing_Security_Restrictions_and_Signing_Code</a></p>
<h3 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h3><p>navigator.mozTCPSocket 或者 navigator.TCPSocket 是可以用于浏览器环境的 TCP Socket 实现。<br>W3C正在讨论中，目前只有 mozilla 实现了，只能在特权代码或者特权 web app 中使用。<br>在 xulrunner 或桌面 firefox 中，目前（40）需要设置 dom.mozTCPSocket.enabled = true 来启用（<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1079648）。" target="_blank" rel="noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=1079648）。</a></p>
<h2 id="mozilla-跨不同权限页面的交互"><a href="#mozilla-跨不同权限页面的交互" class="headerlink" title="mozilla 跨不同权限页面的交互"></a>mozilla 跨不同权限页面的交互</h2><h3 id="frame-嵌入"><a href="#frame-嵌入" class="headerlink" title="frame 嵌入"></a>frame 嵌入</h3><p>特权页面中可以嵌入非特权页面，但反过来不行，只会显示一个空白页。</p>
<h3 id="权限"><a href="#权限" class="headerlink" title="权限"></a>权限</h3><p>给非特权页面的 WebIDL 添加的扩展方法，特权页面并不能有效访问，可能是因为安全限制：<br><a href="https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Interaction_between_privileged_and_non-privileged_pages" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Interaction_between_privileged_and_non-privileged_pages</a><br>Gecko prevents chrome to access custom object properties added by the content, because that can create security holes.<br>Never invoke the web page’s JavaScript functions from your extension - doing this increases the chance of creating a security hole, where a malicious web page can trick the browser to run its code with extended privileges (just like your extension) with, for example, the ability to delete local files.</p>
<h3 id="通信"><a href="#通信" class="headerlink" title="通信"></a>通信</h3><ul>
<li>web message<br>特权页面可以给非特权页面发送 web message；但从非特权页面发给特权页面似乎没有效果。</li>
</ul>
<h2 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h2><h3 id="dbus"><a href="#dbus" class="headerlink" title="dbus"></a>dbus</h3><ul>
<li><p>mozjs-dbus<br><a href="https://github.com/codebutler/mozjs-dbus/wiki" target="_blank" rel="noopener">https://github.com/codebutler/mozjs-dbus/wiki</a><br>makes it possible for Mozilla/Javascript-based applications and extensions to interoperable with<br>D-Bus, which allows for deep integration with the Linux desktop.<br>代码相当老了（5年）。</p>
</li>
<li><p>Browser DBus Bridge<br><a href="http://sandbox.movial.com/wiki/index.php/Browser_DBus_Bridge" target="_blank" rel="noopener">http://sandbox.movial.com/wiki/index.php/Browser_DBus_Bridge</a><br>The Browser D-Bus Bridge is a JavaScript D-Bus bindings implementation for web browsers. The Bridge allows privileged JavaScript code to talk to the D-Bus, both session and system bus (if not prohibited by the D-Bus configuration).</p>
</li>
</ul>
<p>The bridge currently supports Gecko-based and WebKit-based browsers. Each of these have their own implementation of the Bridge due to technical differences in the integration, but support the same API on the JavaScript side.<br>代码相当老了。</p>
<ul>
<li>D-Bus and other Linux desktop integration improvements, DBuzilla<br><a href="http://zenit.senecac.on.ca/wiki/index.php/D-Bus_and_other_Linux_desktop_integration_improvements" target="_blank" rel="noopener">http://zenit.senecac.on.ca/wiki/index.php/D-Bus_and_other_Linux_desktop_integration_improvements</a><br>代码相当老了（7年）。</li>
</ul>
<h2 id="嵌入"><a href="#嵌入" class="headerlink" title="嵌入"></a>嵌入</h2><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://developer.mozilla.org/en-US/docs/Gecko/Embedding_Mozilla/API_overview" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Gecko/Embedding_Mozilla/API_overview</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Gecko/Embedding_Mozilla/Roll_your_own_browser" target="_blank" rel="noopener">Roll your own browser: An embedding how-to</a> on MDN. (out dated)</p>
<p>将Mozilla源码里的内嵌Gecko示例winEmbed工程移植到VC (1.9)<br>  <a href="http://blog.csdn.net/mzlogin/article/details/7292310" target="_blank" rel="noopener">http://blog.csdn.net/mzlogin/article/details/7292310</a></p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h3><ul>
<li>nsIWebBrowser</li>
</ul>
<p>This is the primary interface to the WebBrowser component.</p>
<ul>
<li><p>nsIWebBrowserSetup<br>SETUP_IS_CHROME_WRAPPER=7<br>Boolean. Marks whether the browser is a chrome wrapper. A value of PR_TRUE means the browser is a chrome wrapper. The default value is PR_FALSE. </p>
</li>
<li><p>nsIWebBrowserChrome</p>
</li>
</ul>
<p>This interface provides access to the window containing an nsWebBrowser instance.</p>
<ul>
<li><p>nsIChromeRegistry<br><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChromeRegistry" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIChromeRegistry</a></p>
</li>
<li><p>nsIXULAppInfo<br>In XULRunner applications nsIXULAppInfo obtains app-specific information from application.ini.<br><a href="https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIXULAppInfo" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIXULAppInfo</a></p>
</li>
<li><p>nsIXULRuntime<br>Provides information about the XUL runtime to allow extensions and XUL applications to determine information about the XUL runtime. </p>
</li>
<li><p>nsIAppShell<br>Interface for the native event system layer. This interface is designed to be used on the main application thread only. </p>
</li>
<li><p>nsIAppStartup<br>This interface is intended to be used as application startup service. It also helps in quitting applications as well. </p>
</li>
<li><p>nsIAppShellService<br>Provides the AppShellService. </p>
</li>
<li><p>nsIFile/nsILocalFile<br>创建<br>var localFile = Components.classes[“@mozilla.org/file/local;1”]</p>
<pre><code>.createInstance(Components.interfaces.nsILocalFile);</code></pre><p>或者<br>Components.utils.import(“resource://gre/modules/FileUtils.jsm”);</p>
</li>
</ul>
<p>var file = new FileUtils.File(“/home”);</p>
<p>初始化<br>localFile.initWithPath(in AString filePath);<br>  js 中直接传入string，geckofx中传入nsAString对象。</p>
<h3 id="应用的解析"><a href="#应用的解析" class="headerlink" title="应用的解析"></a>应用的解析</h3><ul>
<li>application.ini 的解析<br>browser/app/nsBrowserApp.cpp 或者<br>xulrunner/app/nsXULRunnerApp.cpp</li>
</ul>
<p><a href="http://mxr.mozilla.org/mozilla-central/source/xulrunner/app/nsXULRunnerApp.cpp" target="_blank" rel="noopener">http://mxr.mozilla.org/mozilla-central/source/xulrunner/app/nsXULRunnerApp.cpp</a></p>
<p>277   nsCOMPtr<nsIFile> appDataLF;<br>278   rv = XRE_GetFileFromPath(appDataFile, getter_AddRefs(appDataLF));<br>279   if (NS_FAILED(rv)) {<br>280     Output(true, “Error: unrecognized application.ini path.\n”);<br>281     return 2;<br>282   }<br>283<br>284   AutoAppData appData(appDataLF);<br>285   if (!appData) {<br>286     Output(true, “Error: couldn’t parse application.ini.\n”);<br>287     return 2;<br>288   }<br>290   return XRE_main(argc, argv, appData, 0);</p>
<p>解析代码的实现在<br><a href="http://mxr.mozilla.org/mozilla-central/source/toolkit/xre/CreateAppData.cpp#15" target="_blank" rel="noopener">http://mxr.mozilla.org/mozilla-central/source/toolkit/xre/CreateAppData.cpp#15</a></p>
<p>nsresult XRE_CreateAppData(nsIFile* aINIFile, nsXREAppData **aAppData)</p>
<p>xul 应用入口函数是 XRE_main<br><a href="http://mxr.mozilla.org/mozilla-central/source/toolkit/xre/nsAppRunner.cpp#4227" target="_blank" rel="noopener">http://mxr.mozilla.org/mozilla-central/source/toolkit/xre/nsAppRunner.cpp#4227</a><br> XRE_main(int argc, char* argv[], const nsXREAppData* aAppData, uint32_t aFlags)</p>
<p><a href="http://mxr.mozilla.org/mozilla-central/source/toolkit/xre/nsAppRunner.cpp#2719" target="_blank" rel="noopener">http://mxr.mozilla.org/mozilla-central/source/toolkit/xre/nsAppRunner.cpp#2719</a><br>2718 // Encapsulates startup and shutdown state for XRE_main<br>2719 class XREMain</p>
<ul>
<li>chrome.manifest 的解析<br><a href="http://mxr.mozilla.org/mozilla-central/source/xpcom/build/nsXULAppAPI.h#263" target="_blank" rel="noopener">http://mxr.mozilla.org/mozilla-central/source/xpcom/build/nsXULAppAPI.h#263</a><br>240 /<em>*<br>241  * Register XPCOM components found in an array of files/directories.<br>242  * This method may be called at any time before or after XRE_main or<br>243  * XRE_InitEmbedding.<br>244  *<br>245  * @param aFiles An array of files or directories.<br>246  * @param aFileCount the number of items in the aFiles array.<br>247  * @note appdir/components is registered automatically.<br>248  *<br>249  * NS_COMPONENT_LOCATION specifies a location to search for binary XPCOM<br>250  * components as well as component/chrome manifest files.<br>251  *<br>252  * NS_SKIN_LOCATION specifies a location to search for chrome manifest files<br>253  * which are only allowed to register only skin packages and style overlays.<br>254  */<br>255 enum NSLocationType<br>256 {<br>257   NS_COMPONENT_LOCATION,<br>258   NS_SKIN_LOCATION,<br>259   NS_BOOTSTRAPPED_LOCATION<br>260 };<br>261<br>262 XRE_API(nsresult,<br>263         XRE_AddManifestLocation, (NSLocationType aType,<br>264                                   nsIFile</em> aLocation))</li>
</ul>
<p>另一个可能的方法是 nsIComponentManager.addBootstrappedManifestLocation((in nsILocalFile aLocation)<br>geckofx 中的代码例子：<br>            var chromeDir = Xpcom.CreateInstance<nsILocalFile> (“@mozilla.org/file/local;1”);<br>            chromeDir.InitWithPath (new nsAString (“D:\project\MBEditor.js.git\mozApp”));<br>            Xpcom.ComponentManager.AddBootstrappedManifestLocation (chromeDir);</p>
<h2 id="JS-引擎：SpiderMonkey"><a href="#JS-引擎：SpiderMonkey" class="headerlink" title="JS 引擎：SpiderMonkey"></a>JS 引擎：SpiderMonkey</h2><p><a href="https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_User_Guide" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_User_Guide</a></p>
<h3 id="垃圾回收"><a href="#垃圾回收" class="headerlink" title="垃圾回收"></a>垃圾回收</h3><p>JS_AddRoot/JS_RemoveRoot<br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_reference/JS_AddRoot" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_reference/JS_AddRoot</a><br>The JS_Add*Root and functions add a C/C++ variable to the garbage collector’s root set, the set of variables used as starting points each time the collector checks to see what memory is reachable. The garbage collector aggressively collects and recycles memory that it deems unreachable, so roots are often necessary to protect data from being prematurely collected.</p>
<h3 id="mozjs-函数签名"><a href="#mozjs-函数签名" class="headerlink" title="mozjs 函数签名"></a>mozjs 函数签名</h3><p>?JS_EvaluateUCScript@@YA_NPAUJSContext@@V?$Handle@PAVJSObject@@@JS@@PB_WIPBDIV?$MutableHandle@VValue@JS@@@3@@Z<br>?JS_ExecuteScript@@YA_NPAUJSContext@@PAVJSObject@@PAVJSScript@@PAVValue@JS@@@Z</p>
<p>bool JS_EvaluateUCScript(struct JSContext *,class JS::Handle&lt;class JSObject *&gt;,wchar_t const *,unsigned int,char const *,unsigned int,class JS::MutableHandle<class JS::Value>)<br>bool JS_ExecuteScript(struct JSContext *,class JSObject *,class JSScript *,class JS::Value *)</p>
<p>DomMessageEventArgs</p>
<p>internal string ConvertValueToString(JsVal value)<br><a href="https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_GetStringChars" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_GetStringChars</a></p>
<p>wchar_t const * JS_GetStringCharsZAndLength(struct JSContext *,class JSString *,unsigned int *)<br>?JS_GetStringCharsZAndLength@@YAPB_WPAUJSContext@@PAVJSString@@PAI@Z</p>
<p>wchar_t const * JS_GetStringCharsZ(struct JSContext *,class JSString *)<br>?JS_GetStringCharsZ@@YAPB_WPAUJSContext@@PAVJSString@@@Z</p>
<p>wchar_t const * JS_GetStringCharsAndLength(struct JSContext *,class JSString *,unsigned int *)<br>?JS_GetStringCharsAndLength@@YAPB_WPAUJSContext@@PAVJSString@@PAI@Z</p>
<p>unsigned int JS_GetStringLength(class JSString *)<br>?JS_GetStringLength@@YAIPAVJSString@@@Z</p>
<p>?JS_EvaluateUCScript@@YA_NPAUJSContext@@V?$Handle@PAVJSObject@@@JS@@PB_WIPBDIV?$MutableHandle@VValue@JS@@@3@@Z<br>?JS_ExecuteScript@@YA_NPAUJSContext@@PAVJSObject@@PAVJSScript@@PAVValue@JS@@@Z</p>
<p>bool JS_EvaluateUCScript(struct JSContext *,class JS::Handle&lt;class JSObject *&gt;,wchar_t const *,unsigned int,char const *,unsigned int,class JS::MutableHandle<class JS::Value>)<br>bool JS_ExecuteScript(struct JSContext *,class JSObject *,class JSScript *,class JS::Value *)</p>
<p>DomMessageEventArgs</p>
<p>internal string ConvertValueToString(JsVal value)<br><a href="https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_GetStringChars" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/SpiderMonkey/JSAPI_Reference/JS_GetStringChars</a></p>
<p>wchar_t const * JS_GetStringCharsZAndLength(struct JSContext *,class JSString *,unsigned int *)<br>?JS_GetStringCharsZAndLength@@YAPB_WPAUJSContext@@PAVJSString@@PAI@Z</p>
<p>wchar_t const * JS_GetStringCharsZ(struct JSContext *,class JSString *)<br>?JS_GetStringCharsZ@@YAPB_WPAUJSContext@@PAVJSString@@@Z</p>
<p>wchar_t const * JS_GetStringCharsAndLength(struct JSContext *,class JSString *,unsigned int *)<br>?JS_GetStringCharsAndLength@@YAPB_WPAUJSContext@@PAVJSString@@PAI@Z</p>
<p>unsigned int JS_GetStringLength(class JSString *)<br>?JS_GetStringLength@@YAIPAVJSString@@@Z</p>
<h2 id="omni"><a href="#omni" class="headerlink" title="omni"></a>omni</h2><p>omni.ja 文件是个特殊的 zip 文件（windows explorer 可打开，7zip不行），里面包含moz平台的界面的xul/css/js代码，包括调试器(devtools)等。</p>
<p>omni.ja 这个文件名有特殊意义。与 xul.dll (或.so) 同一目录的 omni.ja 会被 xul.dll 自动加载；<br>与 xul 应用的 application.ini 同一目录的 omni.ja 也会被自动加载。</p>
<p>加载 omni.ja 时，会通过其内部根目录下的 chrome.manifest 来注册。</p>
<p>如果要修改、调试 xulrunner/firefox 的 omni.ja 的代码，可以将它解压在其所在的目录，再把它改名/删除。<br>正确的压缩命令：zip -qr9XD omni.ja *</p>
<p>firefox 除了在顶层目录（xul.dll所在的目录）有一个 omni.ja，还在 browser/ 目录下有一个 omni.ja。前者与 xulrunner 的相同，后者是只有 firefox 需要的文件。</p>
<p>参考：<br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/About_omni.ja_%28formerly_omni.jar%29" target="_blank" rel="noopener">About omni.ja (formerly omni.jar)</a><br><a href="https://blog.mozilla.org/mwu/2010/08/13/omnijar-how-does-it-work/" target="_blank" rel="noopener">Omnijar. How does it work?</a><br><a href="https://blog.mozilla.org/tglek/2010/09/14/firefox-4-jar-jar-jar/" target="_blank" rel="noopener">Firefox 4: jar jar jar</a></p>
<h2 id="本地化（中文化）-i18n"><a href="#本地化（中文化）-i18n" class="headerlink" title="本地化（中文化） i18n"></a>本地化（中文化） i18n</h2><p>xulrunner 的发行版没有中文版，所以有些界面，如错误页面，是英文的。<br>界面相关的资源在 omni.ja 文件中，这是个特殊的zip文件，参考<br><a href="https://developer.mozilla.org/zh-CN/docs/Mozilla/About_omni.ja_%28formerly_omni.jar%29" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Mozilla/About_omni.ja_%28formerly_omni.jar%29</a></p>
<p>可以用中文版 firefox 的 omni.ja 文件来替换，从而将 xulrunner 改为中文版。要注意选择与 xulrunner 版本号相同的 firefox。</p>
<p>geckofx 中，js alert/prompt 等对话框还是有英文，因为用了自定义的对话框。<br>解决办法是修改自定义对话框中的文字，或者用xulrunner本身的对话框。参考：<br>GeckoWebBrowser.UseCustomPrompt() 和 d:\Geckofx-Winforms\PromptService.cs<br><a href="http://localhost" target="_blank" rel="noopener">http://localhost</a><br>javascript:confirm(‘hh’)</p>
<h2 id="下载-TODO"><a href="#下载-TODO" class="headerlink" title="下载 TODO"></a>下载 TODO</h2><h2 id="插件-plugin"><a href="#插件-plugin" class="headerlink" title="插件/plugin"></a>插件/plugin</h2><h3 id="禁用个别插件"><a href="#禁用个别插件" class="headerlink" title="禁用个别插件"></a>禁用个别插件</h3><p><a href="http://serverfault.com/questions/340195/disable-certain-firefox-plugins-system-wide-by-default" target="_blank" rel="noopener">http://serverfault.com/questions/340195/disable-certain-firefox-plugins-system-wide-by-default</a><br>Disable Certain Firefox Plugins System-wide by Default</p>
<p>The plugins’ settings are now integrated partially in about:config as of Firefox 22, and fully in 23+. The key names are plugin.state.* where * denotes the internal naming scheme used by Firefox for the discovered plugins. The values (integer) are 0 for disabled (Never Activate in Firefox Tools (Alt + T) &gt; Add-ons &gt; Plugins), 1 for click-to-play (Ask to Activate), and 2 for enabled (Always Activate). Firefox 22 has 0 and 2, and 23+ includes all the three states. The state Ask to Activate (1) is triggered after toggling plugins.click_to_play to true in about:config.</p>
<p>One way to get the correct names used by Firefox is from a reference/IT PC. Toggle the default states of all the discovered plugins (Firefox Tools (Alt + T) &gt; Add-ons &gt; Plugins) once, to reveal the corresponding plugin.state.* keys in about:config.</p>
<p>VLC:<br>plugin.state.npvlc</p>
<p>Acrobat:<br>plugin.state.nppdf<br>注意这不影响 pdf.js。</p>
<p>Java:<br>plugin.state.java</p>
<p>Flash:<br>plugin.state.flash</p>
<p>Silverlight:<br>plugin.state.npctrl</p>
<p>在禁用后：<br>object标签如果有替代内容，则显示替代内容；如果没有，firefox 显示一个黑色窗口写着“此插件已被禁用”，xulrunner/geckofx只有一个黑窗，没有提示（可能是bug）。</p>
<h3 id="禁用全部插件"><a href="#禁用全部插件" class="headerlink" title="禁用全部插件"></a>禁用全部插件</h3><p>“plugin.disable” = true </p>
<h2 id="下载和未知内容的处理"><a href="#下载和未知内容的处理" class="headerlink" title="下载和未知内容的处理"></a>下载和未知内容的处理</h2><p>当触发a[download] 或未知类型的链接时，浏览器一般会弹出对话框提示是否用其它应用程序打开，或者下载保存链接。<br>但xulrunner应用、geckofx则有一些麻烦，有时候会出错（firefox28, xulrunner 29）。</p>
<h2 id="web控制台"><a href="#web控制台" class="headerlink" title="web控制台"></a>web控制台</h2><p>有时firefox的控制台显示“Web 控制台的日志记录API (console.log, console.info, console.warn, console.error) 已被此页面的脚本禁用。”<br>网页中的console.log是输出不了信息的。这可能是因为某些扩展的问题。尝试禁用一些扩展，看看问题是否解决了。参考：<br>Firefox的Web控制台禁用？<a href="http://codego.net/382392/" target="_blank" rel="noopener">http://codego.net/382392/</a></p>
<h2 id="内存使用，内存泄露-（memory-usage-amp-leak）"><a href="#内存使用，内存泄露-（memory-usage-amp-leak）" class="headerlink" title="内存使用，内存泄露 （memory usage &amp; leak）"></a>内存使用，内存泄露 （memory usage &amp; leak）</h2><p>A better about:memory: stage 1.75<br>  <a href="https://blog.mozilla.org/nnethercote/2011/05/23/a-better-aboutmemory-stage-1-75/" target="_blank" rel="noopener">https://blog.mozilla.org/nnethercote/2011/05/23/a-better-aboutmemory-stage-1-75/</a></p>
<p>How to read Firefox “about:memory” correctly?<br>  <a href="http://stackoverflow.com/questions/7146108/how-to-read-firefox-aboutmemory-correctly" target="_blank" rel="noopener">http://stackoverflow.com/questions/7146108/how-to-read-firefox-aboutmemory-correctly</a></p>
<p>Zombie compartments<br>  <a href="https://developer.mozilla.org/en-US/docs/Zombie_compartments" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Zombie_compartments</a></p>
<p>Per-class JS object and shape measurements in Firefox’s about:memory<br>  <a href="https://blog.mozilla.org/nnethercote/2014/08/29/per-class-js-object-and-shape-measurements-in-firefoxs-aboutmemory/" target="_blank" rel="noopener">https://blog.mozilla.org/nnethercote/2014/08/29/per-class-js-object-and-shape-measurements-in-firefoxs-aboutmemory/</a></p>
<p>MemShrink’s 3rd birthday<br>  <a href="https://blog.mozilla.org/nnethercote/2014/06/16/memshrinks-3rd-birthday/" target="_blank" rel="noopener">https://blog.mozilla.org/nnethercote/2014/06/16/memshrinks-3rd-birthday/</a></p>
<p>MemShrink progress<br>  <a href="https://blog.mozilla.org/nnethercote/category/aboutcompartments/" target="_blank" rel="noopener">https://blog.mozilla.org/nnethercote/category/aboutcompartments/</a></p>
<p>Firefox 15 plugs the add-on leaks<br>  <a href="https://blog.mozilla.org/nnethercote/2012/07/19/firefox-15-plugs-the-add-on-leaks/" target="_blank" rel="noopener">https://blog.mozilla.org/nnethercote/2012/07/19/firefox-15-plugs-the-add-on-leaks/</a></p>
<p>Leak Monitor Extension<br>  <a href="http://dbaron.org/mozilla/leak-monitor/" target="_blank" rel="noopener">http://dbaron.org/mozilla/leak-monitor/</a></p>
<p>Firefox memory leak detection tool<br>  <a href="http://www.squarefree.com/2006/01/13/memory-leak-detection-tool/" target="_blank" rel="noopener">http://www.squarefree.com/2006/01/13/memory-leak-detection-tool/</a></p>
<p>Please file good memory leak bugs<br>  <a href="http://dbaron.org/log/2006-01#e20060110a" target="_blank" rel="noopener">http://dbaron.org/log/2006-01#e20060110a</a></p>
<p>System-wide memory measurement for Firefox OS<br>  <a href="https://blog.mozilla.org/nnethercote/2013/12/17/system-wide-memory-measurement-for-firefox-os/" target="_blank" rel="noopener">https://blog.mozilla.org/nnethercote/2013/12/17/system-wide-memory-measurement-for-firefox-os/</a></p>
<h3 id="ghost-windows"><a href="#ghost-windows" class="headerlink" title="ghost-windows"></a>ghost-windows</h3><p>What is a “ghost window”?<br>  <a href="http://forum.palemoon.org/viewtopic.php?f=26&amp;t=3476" target="_blank" rel="noopener">http://forum.palemoon.org/viewtopic.php?f=26&amp;t=3476</a></p>
<p>Report number of ghost windows in telemetry<br>  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=737857" target="_blank" rel="noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=737857</a></p>
<h2 id="直接执行特权js代码"><a href="#直接执行特权js代码" class="headerlink" title="直接执行特权js代码"></a>直接执行特权js代码</h2><p>TODO<br>geckofx 中，不创建 browser 对象，直接创建 AutoJSContext:<br> new AutoJSContext()<br> new AutoJSContext(GlobalJSContextHolder.BackstageJSContext)<br>但这样的代码都没有特权，找不到 Components 对象。</p>
<h2 id="综合代码片段"><a href="#综合代码片段" class="headerlink" title="综合代码片段"></a>综合代码片段</h2><p>Code_snippets/Miscellaneous<br>  <a href="https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Miscellaneous" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/Code_snippets/Miscellaneous</a><br>包括：<br>  Saving an arbitrary URL to a local file<br>  Operating system detection</p>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="UcWORK统一桌面系统"><a href="#UcWORK统一桌面系统" class="headerlink" title="UcWORK统一桌面系统"></a>UcWORK统一桌面系统</h3><p><a href="http://www.qqtech.com/ucwork.htm" target="_blank" rel="noopener">http://www.qqtech.com/ucwork.htm</a></p>
<pre><code>UcWORK基于桌面应用的设计思想，采用mozilla技术框架，并进行多方面的扩展实现，UcWork是主平台/框架，其它应用可嵌入到UcWork中，这是我们的主推目标。此种情况是“我为主，人为辅”。
客户或代理商(第三方)可以在界面和服务器层扩展应用。界面和服务层通过UcBUS(即DBUS)交互。在服务层，UcWork除提供DBus接口外，还可提供面向服务层的API接口，供第三方服务层开发调用。</code></pre><h3 id="XULApp-StarterKit"><a href="#XULApp-StarterKit" class="headerlink" title="XULApp StarterKit"></a>XULApp StarterKit</h3><p><a href="https://github.com/racklin/xulapp-starterkit" target="_blank" rel="noopener">https://github.com/racklin/xulapp-starterkit</a></p>
<p>XULApp StarterKit is a generic framework for XULRunner applications, like Rich Client Platform .</p>
<p>It provides the “plumbing” that, before, every developer had to write themselves—saving state, connecting actions to menu items, toolbar items and keyboard shortcuts; window management, add-ons mechanism, update mechanism and so on.</p>
<h2 id="链接-内容处理方式"><a href="#链接-内容处理方式" class="headerlink" title="链接/内容处理方式"></a>链接/内容处理方式</h2><p>Document Loading - From Load Start to Finding a Handler<br>  <a href="http://www-archive.mozilla.org/docs/docshell/uri-load-start.html" target="_blank" rel="noopener">http://www-archive.mozilla.org/docs/docshell/uri-load-start.html</a><br>  <a href="https://developer.mozilla.org/en-US/docs/Document_Loading_-_From_Load_Start_to_Finding_a_Handler" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Document_Loading_-_From_Load_Start_to_Finding_a_Handler</a></p>
<p>nsIContentPolicy<br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentPolicy" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIContentPolicy</a><br>Interface for content policy mechanism. Implementations of this interface can be used to control loading of various types of out-of-line content, or processing of certain types of inline content</p>
<p>nsILinkHandler<br>  an internal interface used for link clicks</p>
<p>nsIURIContentListener<br>  this gives embedders a chance to abort the load if this URI type is something they want to handle in the embedding app.<br>  <a href="http://www-archive.mozilla.org/projects/embedding/embedapiref/embedapi67.html#1086464" target="_blank" rel="noopener">http://www-archive.mozilla.org/projects/embedding/embedapiref/embedapi67.html#1086464</a><br>  onStartURIOpen() Gives the original content listener first crack at stopping a load before it happens.<br>  doContent() Notifies the content listener to hook up an nsIStreamListener capable of consuming the data stream.<br>  canHandleContent() Indicates whether the content listener is capable of handling the content. </p>
<p>NS_CONTENT_LISTENER_CATEGORYMANAGER_ENTRY of category manager</p>
<p>nsIStreamListener</p>
<p>nsIExternalHelperAppService<br>  <a href="https://developer.mozilla.org/en-US/docs/Helper_Apps_%28and_a_bit_of_Save_As%29" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Helper_Apps_%28and_a_bit_of_Save_As%29</a></p>
<p>  nsIHelperAppLauncher</p>
<p>  nsExternalAppHandler details</p>
<pre><code>Implements nsIStreamListener.
Gets notifications from Necko as the data comes in.
Four primary tasks:
    Sets up temporary file and instantiate the nsIHelperAppLauncherDialog in OnStartRequest.
    Puts the data in the file as OnDataAvailable notifications come in.
    Knows how to launch a helper application on the data based on the nsIMIMEInfo.
    Knows how to save the data to disk at a given location if the user decides to do so. </code></pre><h2 id="下载download"><a href="#下载download" class="headerlink" title="下载download"></a>下载download</h2><p>nsIDownloader<br>  <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDownloader" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDownloader</a></p>
<p>Downloads.jsm<br>  <a href="https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Downloads.jsm" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Downloads.jsm</a></p>
<p>nsIDownloadManager<br>  <a href="https://bitbucket.org/geckofx/geckofx-29.0/issue/73/download-completed-event-the-right-way" target="_blank" rel="noopener">https://bitbucket.org/geckofx/geckofx-29.0/issue/73/download-completed-event-the-right-way</a></p>
<p>Gecko.LauncherDialog.Download<br>  <a href="https://bitbucket.org/geckofx/geckofx-29.0/issue/34/how-to-download-files-using-this-engine" target="_blank" rel="noopener">https://bitbucket.org/geckofx/geckofx-29.0/issue/34/how-to-download-files-using-this-engine</a></p>
<p>base/mozglue/GeckoLoader.java.in:80:    private static void setupDownloadEnviron<br>ment(Context context)</p>
<p>base/updater/UpdateService.java:212:        int autoDownloadPolicy = getAutoDown<br>loadPolicy();</p>
<p>chrome/content/downloads.js:90:  handleClickEvent: function dl_handleClickEvent(<br>aDownload) {</p>
<h2 id="gecko-事件"><a href="#gecko-事件" class="headerlink" title="gecko 事件"></a>gecko 事件</h2><p><a href="https://developer.mozilla.org/en-US/docs/Observer_Notifications" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Observer_Notifications</a></p>
<h2 id="特殊协议"><a href="#特殊协议" class="headerlink" title="特殊协议"></a>特殊协议</h2><h3 id="jar-协议"><a href="#jar-协议" class="headerlink" title="jar 协议"></a>jar 协议</h3><p>与 java 的 jar 协议没什么区别。语法是 jar:sub-url!/path-to/file-in-zip<br>注意’!’之后的路径总是以’/‘开头，不管zip中的实际条目名是否以’/‘开头。<br>jar协议的效果与file、http等没有本质的不同。不过，目前播放音视频时有个限制：未播放的部分不能seek，而且也不一定能正确显示总时长。<br>在android版mozilla上，点击jar协议引用的非web文件，例如.doc，也无法调动外部程序来打开（这应该是个bug）。</p>
<h2 id="新的嵌入-API"><a href="#新的嵌入-API" class="headerlink" title="+ 新的嵌入 API"></a>+ 新的嵌入 API</h2><p><a href="https://wiki.mozilla.org/Embedding/IPCLiteAPI" target="_blank" rel="noopener">https://wiki.mozilla.org/Embedding/IPCLiteAPI</a></p>
<h2 id="外部进程的创建和管理"><a href="#外部进程的创建和管理" class="headerlink" title="外部进程的创建和管理"></a>外部进程的创建和管理</h2><p>gecko 实现了一套与 node.js child_process 兼容的 API：</p>
<p><a href="https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/system_child_process" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Add-ons/SDK/Low-Level_APIs/system_child_process</a></p>
<p>// Import SDK Stuff<br>var COMMONJS_URI = ‘resource://gre/modules/commonjs’;<br>var { require } = Components.utils.import(COMMONJS_URI + ‘/toolkit/require.js’, {});<br>var child_process = require(‘sdk/system/child_process’);</p>
<p>//var ls = child_process.spawn(‘ls’, [‘.’]);<br>var ls = child_process.spawn(‘D:\software\UnxUtils\usr\local\wbin\ls.exe’, [‘D:\‘], {encoding: ‘GBK’});<br>//var ls = child_process.spawn(‘C:\Windows\System32\ipconfig.exe’, {encoding: null}); // null 得到的是按字节值直接转化的字符串</p>
<p>//ls.stdout.setEncoding(‘GBK’); //stdout.setEncoding() 目前无效<br>ls.stdout.on(‘data’, function (data) {<br>  console.log(‘stdout(‘ + data.length + ‘): ‘, data);<br>});</p>
<p>ls.stderr.on(‘data’, function (data) {<br>  console.log(‘stderr: ‘ + data);<br>});</p>
<p>ls.on(‘close’, function (code) {<br>  console.log(‘child process exited with code ‘ + code);<br>});</p>
<p>ls.on(‘error’, function (err) {<br>  console.log(‘child process error ‘, err);<br>});</p>
<p>实现代码的位置在<br>omni.jar!\modules\commonjs\sdk\system/child_process.js<br>omni.jar!\jsloader\resource\gre\modules\commonjs\sdk\system/child_process.js</p>
<p>stdout.setEncoding() 目前无效。<br>child_process.spawn(cmd, args, {encoding: ‘GBK’}) 在 Firefox 46 上有效，但 52a2 上无效。<br>也不能向 stdin 写入非ASCII字符。<br>参考：<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1180409" target="_blank" rel="noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=1180409</a></p>
<h2 id="JS-Ctypes"><a href="#JS-Ctypes" class="headerlink" title="JS-Ctypes"></a>JS-Ctypes</h2><p>JS 直接调用 C api.<br>js-ctypes allows application and extension code to call back and forth to native code written in C. C++ support is limited, see bug 505907 for full support. Unlike binary XPCOM components, It allows developers to ship a single binary for use with multiple versions of Firefox.</p>
<p>二进制数据优化-Harmony typed objects (nés binary data)<br>  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=578700" target="_blank" rel="noopener">https://bugzilla.mozilla.org/show_bug.cgi?id=578700</a><br>  <a href="http://wiki.ecmascript.org/doku.php?id=harmony:typed_objects" target="_blank" rel="noopener">http://wiki.ecmascript.org/doku.php?id=harmony:typed_objects</a><br>  <a href="https://github.com/Yoric/js-js-ctypes" target="_blank" rel="noopener">https://github.com/Yoric/js-js-ctypes</a></p>
<p>ChromeWorker<br>  <a href="https://developer.mozilla.org/en-US/docs/Web/API/ChromeWorker" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/API/ChromeWorker</a><br>  If you’re developing privileged code, and would like to create a worker that can use js-ctypes to perform calls to native code, you can do so by using ChromeWorker instead of the standard Worker object. </p>
<h2 id="web-app"><a href="#web-app" class="headerlink" title="web app"></a>web app</h2><p>mozilla web app 是运行于 firefox OS, 桌面 firefox，移动 firefox 的 web app，三者具有大致统一的规范。<br>mozilla web app 是基于 web 标准的，再加上一些希望成为 web 标准的扩展 api。因此与firefox扩展和xulrunner应用不同，不能使用mozilla特有的底层API，包括XPCOM。<br>事实上，mozilla web app 与 chrome web app 在概念上很相似，互相移植也比较容易。</p>
<h3 id="packaged-app"><a href="#packaged-app" class="headerlink" title="packaged app"></a>packaged app</h3><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>web app 目前似乎只能通过http安装，如果通过file安装会产生invalid url错误。</p>
<h3 id="desktop-web-app"><a href="#desktop-web-app" class="headerlink" title="desktop web app"></a>desktop web app</h3><p>安装后会产生一个类似普通应用程序的入口，在windows上就是一个exe文件，例如<br>“C:\Users\duanyao\AppData\Roaming\xhrcontenttypetest-facc7b2fa7338eec4c5fd305b78b8e71\xhr content type test.exe”<br>并且也提供了反安装程序。</p>
<h3 id="android-web-app"><a href="#android-web-app" class="headerlink" title="android web app"></a>android web app</h3><p>出了从 firefox 中安装，也可以将web app打包为 apk，详见“Open Web Apps for Android”。</p>
<p>mozilla-apk-cli<br>  npm install -g mozilla-apk-cli<br>  mozilla-apk-cli ./www my_test_app.apk<br>  mozilla-apk-cli is only for testing and debugging your new Android app locally.</p>
<h3 id="参考-1"><a href="#参考-1" class="headerlink" title="参考"></a>参考</h3><p>Writing your first Firefox OS app<br>  <a href="http://www.adobe.com/devnet/html5/articles/writing-your-first-firefox-os-app.html" target="_blank" rel="noopener">http://www.adobe.com/devnet/html5/articles/writing-your-first-firefox-os-app.html</a><br>Getting Started with Firefox OS: Hosted and Packaged Apps<br>  <a href="http://www.sitepoint.com/getting-started-with-firefox-os-hosted-and-packaged-apps/" target="_blank" rel="noopener">http://www.sitepoint.com/getting-started-with-firefox-os-hosted-and-packaged-apps/</a><br>Packaged apps<br>  <a href="https://developer.mozilla.org/en-US/Marketplace/Options/Packaged_apps" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Marketplace/Options/Packaged_apps</a><br>Open Web Apps for Android<br>  <a href="https://developer.mozilla.org/en-US/Marketplace/Options/Open_web_apps_for_android" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/Marketplace/Options/Open_web_apps_for_android</a></p>
<h2 id="firefox-html"><a href="#firefox-html" class="headerlink" title="firefox.html"></a>firefox.html</h2><p>  Firefox.html is an experiment: trying to re-implement the Firefox UI in HTML.<br>  <a href="https://github.com/paulrouget/firefox.html" target="_blank" rel="noopener">https://github.com/paulrouget/firefox.html</a></p>
<h2 id="GeckoView"><a href="#GeckoView" class="headerlink" title="GeckoView"></a>GeckoView</h2><p><a href="http://ftp.mozilla.org/pub/mozilla.org/mobile/nightly/latest-mozilla-central-android/" target="_blank" rel="noopener">http://ftp.mozilla.org/pub/mozilla.org/mobile/nightly/latest-mozilla-central-android/</a></p>
<p>未特别指出时包为 org.mozilla.gecko</p>
<h3 id="GeckoView-1"><a href="#GeckoView-1" class="headerlink" title="GeckoView"></a>GeckoView</h3><p>mobile/android/base/GeckoView.java</p>
<p>public Browser addBrowser(String url)<br>public void removeBrowser(Browser browser)<br>public void setCurrentBrowser(Browser browser)<br>public Browser getCurrentBrowser()<br>public List<Browser> getBrowsers()<br>public void setChromeDelegate(ChromeDelegate chrome)<br>public void setContentDelegate(ContentDelegate content)<br>public static void setGeckoInterface(final BaseGeckoInterface geckoInterface)<br>public static GeckoAppShell.GeckoInterface getGeckoInterface()</p>
<p>GeckoView.Browser</p>
<p>public void loadUrl(String url)<br>public void reload()<br>public void stop()<br>public boolean canGoBack()<br>public void goBack()<br>public boolean canGoForward()<br>public void goForward()</p>
<h3 id="interface-GeckoView-ContentDelegate"><a href="#interface-GeckoView-ContentDelegate" class="headerlink" title="interface GeckoView.ContentDelegate"></a>interface GeckoView.ContentDelegate</h3><p>默认空实现 GeckoViewContent<br>onPageStart<br>onPageStop<br>onPageShow<br>onReceivedTitle</p>
<h3 id="interface-GeckoView-ChromeDelegate"><a href="#interface-GeckoView-ChromeDelegate" class="headerlink" title="interface GeckoView.ChromeDelegate"></a>interface GeckoView.ChromeDelegate</h3><p>默认实现 GeckoViewChrome<br>onReady<br>onAlert<br>onPrompt<br>onConfirm<br>onDebugRequest</p>
<h3 id="GeckoAppShell"><a href="#GeckoAppShell" class="headerlink" title="GeckoAppShell"></a>GeckoAppShell</h3><p>mobile/android/base/GeckoAppShell.java</p>
<p>//Adds a listener for a gecko event. This method is thread-safe and may be called at any time.<br>public static void registerEventListener(String event, GeckoEventListener listener)<br>public static void unregisterEventListener(String event, GeckoEventListener listener)</p>
<pre><code>GeckoAppShell.registerEventListener(&quot;Gecko:Ready&quot;, this);
GeckoAppShell.registerEventListener(&quot;Content:StateChange&quot;, this);
GeckoAppShell.registerEventListener(&quot;Content:LoadError&quot;, this);
GeckoAppShell.registerEventListener(&quot;Content:PageShow&quot;, this);
GeckoAppShell.registerEventListener(&quot;DOMTitleChanged&quot;, this);
GeckoAppShell.registerEventListener(&quot;Link:Favicon&quot;, this);
GeckoAppShell.registerEventListener(&quot;Prompt:Show&quot;, this);
GeckoAppShell.registerEventListener(&quot;Prompt:ShowTop&quot;, this);</code></pre><p>base/Tabs.java:87:        registerEventListener(“Session:RestoreEnd”);<br>base/Tabs.java:88:        registerEventListener(“SessionHistory:New”);<br>base/Tabs.java:89:        registerEventListener(“SessionHistory:Back”);<br>base/Tabs.java:90:        registerEventListener(“SessionHistory:Forward”);<br>base/Tabs.java:91:        registerEventListener(“SessionHistory:Goto”);<br>base/Tabs.java:92:        registerEventListener(“SessionHistory:Purge”);<br>base/Tabs.java:93:        registerEventListener(“Tab:Added”);<br>base/Tabs.java:94:        registerEventListener(“Tab:Close”);<br>base/Tabs.java:95:        registerEventListener(“Tab:Select”);<br>base/Tabs.java:96:        registerEventListener(“Content:LocationChange”);<br>base/Tabs.java:97:        registerEventListener(“Content:SecurityChange”);<br>base/Tabs.java:98:        registerEventListener(“Content:ReaderEnabled”);<br>base/Tabs.java:99:        registerEventListener(“Content:StateChange”);<br>base/Tabs.java:100:        registerEventListener(“Content:LoadError”);<br>base/Tabs.java:101:        registerEventListener(“Content:PageShow”);<br>base/Tabs.java:102:        registerEventListener(“DOMContentLoaded”);<br>base/Tabs.java:103:        registerEventListener(“DOMTitleChanged”);<br>base/Tabs.java:104:        registerEventListener(“Link:Favicon”);<br>base/Tabs.java:105:        registerEventListener(“Link:Feed”);<br>base/Tabs.java:106:        registerEventListener(“Link:OpenSearch”);<br>base/Tabs.java:107:        registerEventListener(“DesktopMode:Changed”);<br>base/Tabs.java:108:        registerEventListener(“Tab:ViewportMetadata”);</p>
<p>base/GeckoApp.java:1517:        registerEventListener(“log”);<br>base/GeckoApp.java:1518:        registerEventListener(“Reader:ListCountRequest”);<br>base/GeckoApp.java:1519:        registerEventListener(“Reader:ListStatusRequest”);<br>base/GeckoApp.java:1520:        registerEventListener(“Reader:Added”);<br>base/GeckoApp.java:1521:        registerEventListener(“Reader:Removed”);<br>base/GeckoApp.java:1522:        registerEventListener(“Reader:Share”);<br>base/GeckoApp.java:1523:        registerEventListener(“Reader:FaviconRequest”);<br>base/GeckoApp.java:1524:        registerEventListener(“onCameraCapture”);<br>base/GeckoApp.java:1525:        registerEventListener(“Menu:Add”);<br>base/GeckoApp.java:1526:        registerEventListener(“Menu:Remove”);<br>base/GeckoApp.java:1527:        registerEventListener(“Menu:Update”);<br>base/GeckoApp.java:1528:        registerEventListener(“Gecko:Ready”);<br>base/GeckoApp.java:1529:        registerEventListener(“Gecko:DelayedStartup”);<br>base/GeckoApp.java:1530:        registerEventListener(“Toast:Show”);<br>base/GeckoApp.java:1531:        registerEventListener(“DOMFullScreen:Start”);<br>base/GeckoApp.java:1532:        registerEventListener(“DOMFullScreen:Stop”);<br>base/GeckoApp.java:1533:        registerEventListener(“ToggleChrome:Hide”);<br>base/GeckoApp.java:1534:        registerEventListener(“ToggleChrome:Show”);<br>base/GeckoApp.java:1535:        registerEventListener(“ToggleChrome:Focus”);<br>base/GeckoApp.java:1536:        registerEventListener(“Permissions:Data”);<br>base/GeckoApp.java:1537:        registerEventListener(“Session:StatePurged”);<br>base/GeckoApp.java:1538:        registerEventListener(“Bookmark:Insert”);<br>base/GeckoApp.java:1539:        registerEventListener(“Accessibility:Event”);<br>base/GeckoApp.java:1540:        registerEventListener(“Accessibility:Ready”);<br>base/GeckoApp.java:1541:        registerEventListener(“Shortcut:Remove”);<br>base/GeckoApp.java:1542:        registerEventListener(“Share:Text”);<br>base/GeckoApp.java:1543:        registerEventListener(“Share:Image”);<br>base/GeckoApp.java:1544:        registerEventListener(“Image:SetAs”);<br>base/GeckoApp.java:1545:        registerEventListener(“Sanitize:ClearHistory”);<br>base/GeckoApp.java:1546:        registerEventListener(“Update:Check”);<br>base/GeckoApp.java:1547:        registerEventListener(“Update:Download”);<br>base/GeckoApp.java:1548:        registerEventListener(“Update:Install”);<br>base/GeckoApp.java:1549:        registerEventListener(“PrivateBrowsing:Data”);<br>base/GeckoApp.java:1550:        registerEventListener(“Contact:Add”);<br>base/GeckoApp.java:1551:        registerEventListener(“Intent:Open”);<br>base/GeckoApp.java:1552:        registerEventListener(“Intent:GetHandlers”);<br>base/GeckoApp.java:1553:        registerEventListener(“Locale:Set”);<br>base/GeckoApp.java:1554:        registerEventListener(“NativeApp:IsDebuggable”);<br>base/GeckoApp.java:1555:        registerEventListener(“SystemUI:Visibility”);</p>
<h3 id="click"><a href="#click" class="headerlink" title="click"></a>click</h3><p>chrome/content/browser.js:1709:    Services.obs.addObserver(this, “PageActions:C<br>licked”, false);<br>chrome/content/browser.js:1710:    Services.obs.addObserver(this, “PageActions:L<br>ongClicked”, false);</p>
<h3 id="components-HelperAppDialog-js"><a href="#components-HelperAppDialog-js" class="headerlink" title="components/HelperAppDialog.js"></a>components/HelperAppDialog.js</h3><h3 id="HelperApps"><a href="#HelperApps" class="headerlink" title="HelperApps"></a>HelperApps</h3><p>mobile/android/chrome/content/HelperApps.js<br><a href="https://hg.mozilla.org/integration/fx-team/rev/dd3dd64aa432" target="_blank" rel="noopener">https://hg.mozilla.org/integration/fx-team/rev/dd3dd64aa432</a><br>  getAppsForUri</p>
<h3 id="PrefsHelper"><a href="#PrefsHelper" class="headerlink" title="PrefsHelper"></a>PrefsHelper</h3><h2 id="内存管理-GC-CC"><a href="#内存管理-GC-CC" class="headerlink" title="内存管理/GC/CC"></a>内存管理/GC/CC</h2><p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Language_Bindings/Components.utils.forceGC" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Language_Bindings/Components.utils.forceGC</a><br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Language_Bindings/Components.utils.schedulePreciseGC" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Language_Bindings/Components.utils.schedulePreciseGC</a><br><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Interfacing_with_the_XPCOM_cycle_collector" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Interfacing_with_the_XPCOM_cycle_collector</a></p>
<p>触发 CC:<br>var domWindowUtils = window.QueryInterface(Components.interfaces.nsIInterfaceRequestor)<br>                     .getInterface(Components.interfaces.nsIDOMWindowUtils);<br>domWindowUtils.cycleCollect()</p>
<p>触发 JS GC:<br>异步：<br>Components.utils.schedulePreciseGC(function(){})<br>同步：<br>Components.utils.forceGC()</p>

      

      
        <div class="page-reward">
          <a href="javascript:;" class="page-reward-btn tooltip-top">
            <div class="tooltip tooltip-east">
            <span class="tooltip-item">
              赏
            </span>
            <span class="tooltip-content">
              <span class="tooltip-text">
                <span class="tooltip-inner">
                  <p class="reward-p"><i class="icon icon-quo-left"></i>谢谢你请我吃糖果<i class="icon icon-quo-right"></i></p>
                  <div class="reward-box">
                    
                    
                  </div>
                </span>
              </span>
            </span>
          </div>
          </a>
        </div>
      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags icon"></i>
		<ul class="article-tag-list">
			 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color4">XUL</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color5">XULRunner</a>
        		</li>
      		 
        		<li class="article-tag-list-item">
        			<a href="javascript:void(0)" class="js-tag article-tag-list-link color3">Firefox</a>
        		</li>
      		
		</ul>
	</div>

      

      

      
        
<div class="share-btn share-icons tooltip-left">
  <div class="tooltip tooltip-east">
    <span class="tooltip-item">
      <a href="javascript:;" class="share-sns share-outer">
        <i class="icon icon-share"></i>
      </a>
    </span>
    <span class="tooltip-content">
      <div class="share-wrap">
        <div class="share-icons">
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="icon icon-weibo"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="icon icon-weixin"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="icon icon-qq"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="icon icon-douban"></i>
          </a>
          <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a>
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="icon icon-facebook"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="icon icon-twitter"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="icon icon-google"></i>
          </a>
        </div>
      </div>
    </span>
  </div>
</div>

<div class="page-modal wx-share js-wx-box">
    <a class="close js-modal-close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//pan.baidu.com/share/qrcode?url=https://huangxok.github.io/2017/01/13/XULRunner-Gecko-Firefox/" alt="微信分享二维码">
    </div>
</div>

<div class="mask js-mask"></div>
      
      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2017/03/03/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E7%AC%94%E8%AE%B0/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          函数式编程笔记
        
      </div>
    </a>
  
  
    <a href="/2017/01/10/webpack-note/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">&#39;webpack-note&#39;</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>


<aside class="wrap-side-operation">
    <div class="mod-side-operation">
        
        <div class="jump-container" id="js-jump-container" style="display:none;">
            <a href="javascript:void(0)" class="mod-side-operation__jump-to-top">
                <i class="icon-font icon-back"></i>
            </a>
            <div id="js-jump-plan-container" class="jump-plan-container" style="top: -11px;">
                <i class="icon-font icon-plane jump-plane"></i>
            </div>
        </div>
        
        
    </div>
</aside>



  
  
  

  

  

  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2020 HKmaster
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		toc_hide_index: true,
		root: "/",
		innerArchive: true,
		showTags: false
	}
</script>

<script>!function(t){function n(e){if(r[e])return r[e].exports;var i=r[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var r={};n.m=t,n.c=r,n.p="./",n(0)}([function(t,n,r){r(195),t.exports=r(191)},function(t,n,r){var e=r(3),i=r(52),o=r(27),u=r(28),c=r(53),f="prototype",a=function(t,n,r){var s,l,h,v,p=t&a.F,d=t&a.G,y=t&a.S,g=t&a.P,b=t&a.B,m=d?e:y?e[n]||(e[n]={}):(e[n]||{})[f],x=d?i:i[n]||(i[n]={}),w=x[f]||(x[f]={});d&&(r=n);for(s in r)l=!p&&m&&void 0!==m[s],h=(l?m:r)[s],v=b&&l?c(h,e):g&&"function"==typeof h?c(Function.call,h):h,m&&u(m,s,h,t&a.U),x[s]!=h&&o(x,s,v),g&&w[s]!=h&&(w[s]=h)};e.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(6);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(126)("wks"),i=r(76),o=r(3).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,r){var e=r(94),i=r(33);t.exports=function(t){return e(i(t))}},function(t,n,r){t.exports=!r(4)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(2),i=r(167),o=r(50),u=Object.defineProperty;n.f=r(10)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){t.exports=!r(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(14),i=r(22);t.exports=r(12)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(20),i=r(58),o=r(42),u=Object.defineProperty;n.f=r(12)?Object.defineProperty:function(t,n,r){if(e(t),n=o(n,!0),e(r),i)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(40)("wks"),i=r(23),o=r(5).Symbol,u="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=u&&o[t]||(u?o:i)("Symbol."+t))}).store=e},function(t,n,r){var e=r(67),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){var e=r(46);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(63),i=r(34);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(21);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(11),i=r(66);t.exports=r(10)?function(t,n,r){return e.f(t,n,i(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n,r){var e=r(3),i=r(27),o=r(24),u=r(76)("src"),c="toString",f=Function[c],a=(""+f).split(c);r(52).inspectSource=function(t){return f.call(t)},(t.exports=function(t,n,r,c){var f="function"==typeof r;f&&(o(r,"name")||i(r,"name",n)),t[n]!==r&&(f&&(o(r,u)||i(r,u,t[n]?""+t[n]:a.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:i(t,n,r):(delete t[n],i(t,n,r)))})(Function.prototype,c,function(){return"function"==typeof this&&this[u]||f.call(this)})},function(t,n,r){var e=r(1),i=r(4),o=r(46),u=function(t,n,r,e){var i=String(o(t)),u="<"+n;return""!==r&&(u+=" "+r+'="'+String(e).replace(/"/g,"&quot;")+'"'),u+">"+i+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(u),e(e.P+e.F*i(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(115),i=r(46);t.exports=function(t){return e(i(t))}},function(t,n,r){var e=r(116),i=r(66),o=r(30),u=r(50),c=r(24),f=r(167),a=Object.getOwnPropertyDescriptor;n.f=r(10)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(24),i=r(17),o=r(145)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n){t.exports={}},function(t,n){t.exports=!0},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(14).f,i=r(8),o=r(15)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(40)("keys"),i=r(23);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(5),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(21);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(36),u=r(44),c=r(14).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){n.f=r(15)},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n,r){var e=r(4);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(53),i=r(115),o=r(17),u=r(16),c=r(203);t.exports=function(t,n){var r=1==t,f=2==t,a=3==t,s=4==t,l=6==t,h=5==t||l,v=n||c;return function(n,c,p){for(var d,y,g=o(n),b=i(g),m=e(c,p,3),x=u(b.length),w=0,S=r?v(n,x):f?v(n,0):void 0;x>w;w++)if((h||w in b)&&(d=b[w],y=m(d,w,g),t))if(r)S[w]=y;else if(y)switch(t){case 3:return!0;case 5:return d;case 6:return w;case 2:S.push(d)}else if(s)return!1;return l?-1:a||s?s:S}}},function(t,n,r){var e=r(1),i=r(52),o=r(4);t.exports=function(t,n){var r=(i.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*o(function(){r(1)}),"Object",u)}},function(t,n,r){var e=r(6);t.exports=function(t,n){if(!e(t))return t;var r,i;if(n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!e(i=r.call(t)))return i;if(!n&&"function"==typeof(r=t.toString)&&!e(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,n,r){var e=r(5),i=r(25),o=r(91),u=r(13),c="prototype",f=function(t,n,r){var a,s,l,h=t&f.F,v=t&f.G,p=t&f.S,d=t&f.P,y=t&f.B,g=t&f.W,b=v?i:i[n]||(i[n]={}),m=b[c],x=v?e:p?e[n]:(e[n]||{})[c];v&&(r=n);for(a in r)(s=!h&&x&&void 0!==x[a])&&a in b||(l=s?x[a]:r[a],b[a]=v&&"function"!=typeof x[a]?r[a]:y&&s?o(l,e):g&&x[a]==l?function(t){var n=function(n,r,e){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,r)}return new t(n,r,e)}return t.apply(this,arguments)};return n[c]=t[c],n}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((b.virtual||(b.virtual={}))[a]=l,t&f.R&&m&&!m[a]&&u(m,a,l)))};f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,t.exports=f},function(t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,n,r){var e=r(26);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(183),i=r(1),o=r(126)("metadata"),u=o.store||(o.store=new(r(186))),c=function(t,n,r){var i=u.get(t);if(!i){if(!r)return;u.set(t,i=new e)}var o=i.get(n);if(!o){if(!r)return;i.set(n,o=new e)}return o},f=function(t,n,r){var e=c(n,r,!1);return void 0!==e&&e.has(t)},a=function(t,n,r){var e=c(n,r,!1);return void 0===e?void 0:e.get(t)},s=function(t,n,r,e){c(r,e,!0).set(t,n)},l=function(t,n){var r=c(t,n,!1),e=[];return r&&r.forEach(function(t,n){e.push(n)}),e},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},v=function(t){i(i.S,"Reflect",t)};t.exports={store:u,map:c,has:f,get:a,set:s,keys:l,key:h,exp:v}},function(t,n,r){"use strict";if(r(10)){var e=r(69),i=r(3),o=r(4),u=r(1),c=r(127),f=r(152),a=r(53),s=r(68),l=r(66),h=r(27),v=r(73),p=r(67),d=r(16),y=r(75),g=r(50),b=r(24),m=r(180),x=r(114),w=r(6),S=r(17),_=r(137),O=r(70),E=r(32),P=r(71).f,j=r(154),F=r(76),M=r(7),A=r(48),N=r(117),T=r(146),I=r(155),k=r(80),L=r(123),R=r(74),C=r(130),D=r(160),U=r(11),W=r(31),G=U.f,B=W.f,V=i.RangeError,z=i.TypeError,q=i.Uint8Array,K="ArrayBuffer",J="Shared"+K,Y="BYTES_PER_ELEMENT",H="prototype",$=Array[H],X=f.ArrayBuffer,Q=f.DataView,Z=A(0),tt=A(2),nt=A(3),rt=A(4),et=A(5),it=A(6),ot=N(!0),ut=N(!1),ct=I.values,ft=I.keys,at=I.entries,st=$.lastIndexOf,lt=$.reduce,ht=$.reduceRight,vt=$.join,pt=$.sort,dt=$.slice,yt=$.toString,gt=$.toLocaleString,bt=M("iterator"),mt=M("toStringTag"),xt=F("typed_constructor"),wt=F("def_constructor"),St=c.CONSTR,_t=c.TYPED,Ot=c.VIEW,Et="Wrong length!",Pt=A(1,function(t,n){return Tt(T(t,t[wt]),n)}),jt=o(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ft=!!q&&!!q[H].set&&o(function(){new q(1).set({})}),Mt=function(t,n){if(void 0===t)throw z(Et);var r=+t,e=d(t);if(n&&!m(r,e))throw V(Et);return e},At=function(t,n){var r=p(t);if(r<0||r%n)throw V("Wrong offset!");return r},Nt=function(t){if(w(t)&&_t in t)return t;throw z(t+" is not a typed array!")},Tt=function(t,n){if(!(w(t)&&xt in t))throw z("It is not a typed array constructor!");return new t(n)},It=function(t,n){return kt(T(t,t[wt]),n)},kt=function(t,n){for(var r=0,e=n.length,i=Tt(t,e);e>r;)i[r]=n[r++];return i},Lt=function(t,n,r){G(t,n,{get:function(){return this._d[r]}})},Rt=function(t){var n,r,e,i,o,u,c=S(t),f=arguments.length,s=f>1?arguments[1]:void 0,l=void 0!==s,h=j(c);if(void 0!=h&&!_(h)){for(u=h.call(c),e=[],n=0;!(o=u.next()).done;n++)e.push(o.value);c=e}for(l&&f>2&&(s=a(s,arguments[2],2)),n=0,r=d(c.length),i=Tt(this,r);r>n;n++)i[n]=l?s(c[n],n):c[n];return i},Ct=function(){for(var t=0,n=arguments.length,r=Tt(this,n);n>t;)r[t]=arguments[t++];return r},Dt=!!q&&o(function(){gt.call(new q(1))}),Ut=function(){return gt.apply(Dt?dt.call(Nt(this)):Nt(this),arguments)},Wt={copyWithin:function(t,n){return D.call(Nt(this),t,n,arguments.length>2?arguments[2]:void 0)},every:function(t){return rt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return C.apply(Nt(this),arguments)},filter:function(t){return It(this,tt(Nt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return et(Nt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Nt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Nt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ut(Nt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Nt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return vt.apply(Nt(this),arguments)},lastIndexOf:function(t){return st.apply(Nt(this),arguments)},map:function(t){return Pt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Nt(this),arguments)},reduceRight:function(t){return ht.apply(Nt(this),arguments)},reverse:function(){for(var t,n=this,r=Nt(n).length,e=Math.floor(r/2),i=0;i<e;)t=n[i],n[i++]=n[--r],n[r]=t;return n},some:function(t){return nt(Nt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return pt.call(Nt(this),t)},subarray:function(t,n){var r=Nt(this),e=r.length,i=y(t,e);return new(T(r,r[wt]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,d((void 0===n?e:y(n,e))-i))}},Gt=function(t,n){return It(this,dt.call(Nt(this),t,n))},Bt=function(t){Nt(this);var n=At(arguments[1],1),r=this.length,e=S(t),i=d(e.length),o=0;if(i+n>r)throw V(Et);for(;o<i;)this[n+o]=e[o++]},Vt={entries:function(){return at.call(Nt(this))},keys:function(){return ft.call(Nt(this))},values:function(){return ct.call(Nt(this))}},zt=function(t,n){return w(t)&&t[_t]&&"symbol"!=typeof n&&n in t&&String(+n)==String(n)},qt=function(t,n){return zt(t,n=g(n,!0))?l(2,t[n]):B(t,n)},Kt=function(t,n,r){return!(zt(t,n=g(n,!0))&&w(r)&&b(r,"value"))||b(r,"get")||b(r,"set")||r.configurable||b(r,"writable")&&!r.writable||b(r,"enumerable")&&!r.enumerable?G(t,n,r):(t[n]=r.value,t)};St||(W.f=qt,U.f=Kt),u(u.S+u.F*!St,"Object",{getOwnPropertyDescriptor:qt,defineProperty:Kt}),o(function(){yt.call({})})&&(yt=gt=function(){return vt.call(this)});var Jt=v({},Wt);v(Jt,Vt),h(Jt,bt,Vt.values),v(Jt,{slice:Gt,set:Bt,constructor:function(){},toString:yt,toLocaleString:Ut}),Lt(Jt,"buffer","b"),Lt(Jt,"byteOffset","o"),Lt(Jt,"byteLength","l"),Lt(Jt,"length","e"),G(Jt,mt,{get:function(){return this[_t]}}),t.exports=function(t,n,r,f){f=!!f;var a=t+(f?"Clamped":"")+"Array",l="Uint8Array"!=a,v="get"+t,p="set"+t,y=i[a],g=y||{},b=y&&E(y),m=!y||!c.ABV,S={},_=y&&y[H],j=function(t,r){var e=t._d;return e.v[v](r*n+e.o,jt)},F=function(t,r,e){var i=t._d;f&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),i.v[p](r*n+i.o,e,jt)},M=function(t,n){G(t,n,{get:function(){return j(this,n)},set:function(t){return F(this,n,t)},enumerable:!0})};m?(y=r(function(t,r,e,i){s(t,y,a,"_d");var o,u,c,f,l=0,v=0;if(w(r)){if(!(r instanceof X||(f=x(r))==K||f==J))return _t in r?kt(y,r):Rt.call(y,r);o=r,v=At(e,n);var p=r.byteLength;if(void 0===i){if(p%n)throw V(Et);if((u=p-v)<0)throw V(Et)}else if((u=d(i)*n)+v>p)throw V(Et);c=u/n}else c=Mt(r,!0),u=c*n,o=new X(u);for(h(t,"_d",{b:o,o:v,l:u,e:c,v:new Q(o)});l<c;)M(t,l++)}),_=y[H]=O(Jt),h(_,"constructor",y)):L(function(t){new y(null),new y(t)},!0)||(y=r(function(t,r,e,i){s(t,y,a);var o;return w(r)?r instanceof X||(o=x(r))==K||o==J?void 0!==i?new g(r,At(e,n),i):void 0!==e?new g(r,At(e,n)):new g(r):_t in r?kt(y,r):Rt.call(y,r):new g(Mt(r,l))}),Z(b!==Function.prototype?P(g).concat(P(b)):P(g),function(t){t in y||h(y,t,g[t])}),y[H]=_,e||(_.constructor=y));var A=_[bt],N=!!A&&("values"==A.name||void 0==A.name),T=Vt.values;h(y,xt,!0),h(_,_t,a),h(_,Ot,!0),h(_,wt,y),(f?new y(1)[mt]==a:mt in _)||G(_,mt,{get:function(){return a}}),S[a]=y,u(u.G+u.W+u.F*(y!=g),S),u(u.S,a,{BYTES_PER_ELEMENT:n,from:Rt,of:Ct}),Y in _||h(_,Y,n),u(u.P,a,Wt),R(a),u(u.P+u.F*Ft,a,{set:Bt}),u(u.P+u.F*!N,a,Vt),u(u.P+u.F*(_.toString!=yt),a,{toString:yt}),u(u.P+u.F*o(function(){new y(1).slice()}),a,{slice:Gt}),u(u.P+u.F*(o(function(){return[1,2].toLocaleString()!=new y([1,2]).toLocaleString()})||!o(function(){_.toLocaleString.call([1,2])})),a,{toLocaleString:Ut}),k[a]=N?A:T,e||N||h(_,bt,T)}}else t.exports=function(){}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),i=r(5).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n,r){t.exports=!r(12)&&!r(18)(function(){return 7!=Object.defineProperty(r(57)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){"use strict";var e=r(36),i=r(51),o=r(64),u=r(13),c=r(8),f=r(35),a=r(96),s=r(38),l=r(103),h=r(15)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n,r){var e=r(20),i=r(100),o=r(34),u=r(39)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(57)("iframe"),e=o.length;for(n.style.display="none",r(93).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(63),i=r(34).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(8),i=r(9),o=r(90)(!1),u=r(39)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){t.exports=r(13)},function(t,n,r){var e=r(76)("meta"),i=r(6),o=r(24),u=r(11).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(4)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n){t.exports=function(t,n,r,e){if(!(t instanceof n)||void 0!==e&&e in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,n){t.exports=!1},function(t,n,r){var e=r(2),i=r(173),o=r(133),u=r(145)("IE_PROTO"),c=function(){},f="prototype",a=function(){var t,n=r(132)("iframe"),e=o.length;for(n.style.display="none",r(135).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;e--;)delete a[f][o[e]];return a()};t.exports=Object.create||function(t,n){var r;return null!==t?(c[f]=e(t),r=new c,c[f]=null,r[u]=t):r=a(),void 0===n?r:i(r,n)}},function(t,n,r){var e=r(175),i=r(133).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,i)}},function(t,n,r){var e=r(175),i=r(133);t.exports=Object.keys||function(t){return e(t,i)}},function(t,n,r){var e=r(28);t.exports=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t}},function(t,n,r){"use strict";var e=r(3),i=r(11),o=r(10),u=r(7)("species");t.exports=function(t){var n=e[t];o&&n&&!n[u]&&i.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,r){var e=r(67),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n){var r=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+e).toString(36))}},function(t,n,r){var e=r(33);t.exports=function(t){return Object(e(t))}},function(t,n,r){var e=r(7)("unscopables"),i=Array.prototype;void 0==i[e]&&r(27)(i,e,{}),t.exports=function(t){i[e][t]=!0}},function(t,n,r){var e=r(53),i=r(169),o=r(137),u=r(2),c=r(16),f=r(154),a={},s={},n=t.exports=function(t,n,r,l,h){var v,p,d,y,g=h?function(){return t}:f(t),b=e(r,l,n?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(v=c(t.length);v>m;m++)if((y=n?b(u(p=t[m])[0],p[1]):b(t[m]))===a||y===s)return y}else for(d=g.call(t);!(p=d.next()).done;)if((y=i(d,b,p.value,n))===a||y===s)return y};n.BREAK=a,n.RETURN=s},function(t,n){t.exports={}},function(t,n,r){var e=r(11).f,i=r(24),o=r(7)("toStringTag");t.exports=function(t,n,r){t&&!i(t=r?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,r){var e=r(1),i=r(46),o=r(4),u=r(150),c="["+u+"]",f="​",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var i={},c=o(function(){return!!u[t]()||f[t]()!=f}),a=i[t]=c?n(h):u[t];r&&(i[r]=a),e(e.P+e.F*c,"String",i)},h=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n,r){t.exports={default:r(86),__esModule:!0}},function(t,n,r){t.exports={default:r(87),__esModule:!0}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}n.__esModule=!0;var i=r(84),o=e(i),u=r(83),c=e(u),f="function"==typeof c.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":typeof t};n.default="function"==typeof c.default&&"symbol"===f(o.default)?function(t){return void 0===t?"undefined":f(t)}:function(t){return t&&"function"==typeof c.default&&t.constructor===c.default&&t!==c.default.prototype?"symbol":void 0===t?"undefined":f(t)}},function(t,n,r){r(110),r(108),r(111),r(112),t.exports=r(25).Symbol},function(t,n,r){r(109),r(113),t.exports=r(44).f("iterator")},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n){t.exports=function(){}},function(t,n,r){var e=r(9),i=r(106),o=r(105);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(88);t.exports=function(t,n,r){if(e(t),void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,i){return t.call(n,r,e,i)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(19),i=r(62),o=r(37);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){t.exports=r(5).document&&document.documentElement},function(t,n,r){var e=r(56);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n,r){var e=r(56);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(60),i=r(22),o=r(38),u={};r(13)(u,r(15)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){var e=r(19),i=r(9);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){var e=r(23)("meta"),i=r(21),o=r(8),u=r(14).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(18)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},h=function(t,n){if(!o(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},v=function(t){return a&&p.NEED&&f(t)&&!o(t,e)&&s(t),t},p=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:h,onFreeze:v}},function(t,n,r){var e=r(14),i=r(20),o=r(19);t.exports=r(12)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(37),i=r(22),o=r(9),u=r(42),c=r(8),f=r(58),a=Object.getOwnPropertyDescriptor;n.f=r(12)?a:function(t,n){if(t=o(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return i(!e.f.call(t,n),t[n])}},function(t,n,r){var e=r(9),i=r(61).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(8),i=r(77),o=r(39)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n,r){var e=r(41),i=r(33);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(41),i=Math.max,o=Math.min;t.exports=function(t,n){return t=e(t),t<0?i(t+n,0):o(t,n)}},function(t,n,r){var e=r(41),i=Math.min;t.exports=function(t){return t>0?i(e(t),9007199254740991):0}},function(t,n,r){"use strict";var e=r(89),i=r(97),o=r(35),u=r(9);t.exports=r(59)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){},function(t,n,r){"use strict";var e=r(104)(!0);r(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";var e=r(5),i=r(8),o=r(12),u=r(51),c=r(64),f=r(99).KEY,a=r(18),s=r(40),l=r(38),h=r(23),v=r(15),p=r(44),d=r(43),y=r(98),g=r(92),b=r(95),m=r(20),x=r(9),w=r(42),S=r(22),_=r(60),O=r(102),E=r(101),P=r(14),j=r(19),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(61).f=O.f=Z,r(37).f=X,r(62).f=tt,o&&!r(36)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(13)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){r(43)("asyncIterator")},function(t,n,r){r(43)("observable")},function(t,n,r){r(107);for(var e=r(5),i=r(13),o=r(35),u=r(15)("toStringTag"),c=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],f=0;f<5;f++){var a=c[f],s=e[a],l=s&&s.prototype;l&&!l[u]&&i(l,u,a),o[a]=o.Array}},function(t,n,r){var e=r(45),i=r(7)("toStringTag"),o="Arguments"==e(function(){return arguments}()),u=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,r,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=u(n=Object(t),i))?r:o?e(n):"Object"==(c=e(n))&&"function"==typeof n.callee?"Arguments":c}},function(t,n,r){var e=r(45);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(30),i=r(16),o=r(75);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=i(f.length),s=o(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){"use strict";var e=r(3),i=r(1),o=r(28),u=r(73),c=r(65),f=r(79),a=r(68),s=r(6),l=r(4),h=r(123),v=r(81),p=r(136);t.exports=function(t,n,r,d,y,g){var b=e[t],m=b,x=y?"set":"add",w=m&&m.prototype,S={},_=function(t){var n=w[t];o(w,t,"delete"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!s(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!s(t)?void 0:n.call(this,0===t?0:t)}:"add"==t?function(t){return n.call(this,0===t?0:t),this}:function(t,r){return n.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var O=new m,E=O[x](g?{}:-0,1)!=O,P=l(function(){O.has(1)}),j=h(function(t){new m(t)}),F=!g&&l(function(){for(var t=new m,n=5;n--;)t[x](n,n);return!t.has(-0)});j||(m=n(function(n,r){a(n,m,t);var e=p(new b,n,m);return void 0!=r&&f(r,y,e[x],e),e}),m.prototype=w,w.constructor=m),(P||F)&&(_("delete"),_("has"),y&&_("get")),(F||E)&&_(x),g&&w.clear&&delete w.clear}else m=d.getConstructor(n,t,y,x),u(m.prototype,r),c.NEED=!0;return v(m,t),S[t]=m,i(i.G+i.W+i.F*(m!=b),S),g||d.setStrong(m,t,y),m}},function(t,n,r){"use strict";var e=r(27),i=r(28),o=r(4),u=r(46),c=r(7);t.exports=function(t,n,r){var f=c(t),a=r(u,f,""[t]),s=a[0],l=a[1];o(function(){var n={};return n[f]=function(){return 7},7!=""[t](n)})&&(i(String.prototype,t,s),e(RegExp.prototype,f,2==n?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)}))}
},function(t,n,r){"use strict";var e=r(2);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},function(t,n){t.exports=function(t,n,r){var e=void 0===r;switch(n.length){case 0:return e?t():t.call(r);case 1:return e?t(n[0]):t.call(r,n[0]);case 2:return e?t(n[0],n[1]):t.call(r,n[0],n[1]);case 3:return e?t(n[0],n[1],n[2]):t.call(r,n[0],n[1],n[2]);case 4:return e?t(n[0],n[1],n[2],n[3]):t.call(r,n[0],n[1],n[2],n[3])}return t.apply(r,n)}},function(t,n,r){var e=r(6),i=r(45),o=r(7)("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[o])?!!n:"RegExp"==i(t))}},function(t,n,r){var e=r(7)("iterator"),i=!1;try{var o=[7][e]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!i)return!1;var r=!1;try{var o=[7],u=o[e]();u.next=function(){return{done:r=!0}},o[e]=function(){return u},t(o)}catch(t){}return r}},function(t,n,r){t.exports=r(69)||!r(4)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(3)[t]})},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(3),i="__core-js_shared__",o=e[i]||(e[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){for(var e,i=r(3),o=r(27),u=r(76),c=u("typed_array"),f=u("view"),a=!(!i.ArrayBuffer||!i.DataView),s=a,l=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(e=i[h[l++]])?(o(e.prototype,c,!0),o(e.prototype,f,!0)):s=!1;t.exports={ABV:a,CONSTR:s,TYPED:c,VIEW:f}},function(t,n){"use strict";var r={versions:function(){var t=window.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:-1==t.indexOf("MicroMessenger")}}()};t.exports=r},function(t,n,r){"use strict";var e=r(85),i=function(t){return t&&t.__esModule?t:{default:t}}(e),o=function(){function t(t,n,e){return n||e?String.fromCharCode(n||e):r[t]||t}function n(t){return e[t]}var r={"&quot;":'"',"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" "},e={};for(var u in r)e[r[u]]=u;return r["&apos;"]="'",e["'"]="&#39;",{encode:function(t){return t?(""+t).replace(/['<> "&]/g,n).replace(/\r?\n/g,"<br/>").replace(/\s/g,"&nbsp;"):""},decode:function(n){return n?(""+n).replace(/<br\s*\/?>/gi,"\n").replace(/&quot;|&lt;|&gt;|&amp;|&nbsp;|&apos;|&#(\d+);|&#(\d+)/g,t).replace(/\u00a0/g," "):""},encodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},encodeBase16forJSON:function(t){if(!t)return t;t=t.replace(/[\u4E00-\u9FBF]/gi,function(t){return escape(t).replace("%u","\\u")});for(var n=[],r=0,e=t.length;e>r;r++)n.push(t.charCodeAt(r).toString(16).toUpperCase());return n.join("")},decodeBase16:function(t){if(!t)return t;t+="";for(var n=[],r=0,e=t.length;e>r;r+=2)n.push(String.fromCharCode("0x"+t.slice(r,r+2)));return n.join("")},encodeObject:function(t){if(t instanceof Array)for(var n=0,r=t.length;r>n;n++)t[n]=o.encodeObject(t[n]);else if("object"==(void 0===t?"undefined":(0,i.default)(t)))for(var e in t)t[e]=o.encodeObject(t[e]);else if("string"==typeof t)return o.encode(t);return t},loadScript:function(t){var n=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(n),n.setAttribute("src",t)},addLoadEvent:function(t){var n=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){n(),t()}}}}();t.exports=o},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=function(t){for(var n=e(this),r=o(n.length),u=arguments.length,c=i(u>1?arguments[1]:void 0,r),f=u>2?arguments[2]:void 0,a=void 0===f?r:i(f,r);a>c;)n[c++]=t;return n}},function(t,n,r){"use strict";var e=r(11),i=r(66);t.exports=function(t,n,r){n in t?e.f(t,n,i(0,r)):t[n]=r}},function(t,n,r){var e=r(6),i=r(3).document,o=e(i)&&e(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,r){var e=r(7)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){t.exports=r(3).document&&document.documentElement},function(t,n,r){var e=r(6),i=r(144).set;t.exports=function(t,n,r){var o,u=n.constructor;return u!==r&&"function"==typeof u&&(o=u.prototype)!==r.prototype&&e(o)&&i&&i(t,o),t}},function(t,n,r){var e=r(80),i=r(7)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(e.Array===t||o[i]===t)}},function(t,n,r){var e=r(45);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){"use strict";var e=r(70),i=r(66),o=r(81),u={};r(27)(u,r(7)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:i(1,r)}),o(t,n+" Iterator")}},function(t,n,r){"use strict";var e=r(69),i=r(1),o=r(28),u=r(27),c=r(24),f=r(80),a=r(139),s=r(81),l=r(32),h=r(7)("iterator"),v=!([].keys&&"next"in[].keys()),p="keys",d="values",y=function(){return this};t.exports=function(t,n,r,g,b,m,x){a(r,n,g);var w,S,_,O=function(t){if(!v&&t in F)return F[t];switch(t){case p:case d:return function(){return new r(this,t)}}return function(){return new r(this,t)}},E=n+" Iterator",P=b==d,j=!1,F=t.prototype,M=F[h]||F["@@iterator"]||b&&F[b],A=M||O(b),N=b?P?O("entries"):A:void 0,T="Array"==n?F.entries||M:M;if(T&&(_=l(T.call(new t)))!==Object.prototype&&(s(_,E,!0),e||c(_,h)||u(_,h,y)),P&&M&&M.name!==d&&(j=!0,A=function(){return M.call(this)}),e&&!x||!v&&!j&&F[h]||u(F,h,A),f[n]=A,f[E]=y,b)if(w={values:P?A:O(d),keys:m?A:O(p),entries:N},x)for(S in w)S in F||o(F,S,w[S]);else i(i.P+i.F*(v||j),n,w);return w}},function(t,n){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,n){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,n,r){var e=r(3),i=r(151).set,o=e.MutationObserver||e.WebKitMutationObserver,u=e.process,c=e.Promise,f="process"==r(45)(u);t.exports=function(){var t,n,r,a=function(){var e,i;for(f&&(e=u.domain)&&e.exit();t;){i=t.fn,t=t.next;try{i()}catch(e){throw t?r():n=void 0,e}}n=void 0,e&&e.enter()};if(f)r=function(){u.nextTick(a)};else if(o){var s=!0,l=document.createTextNode("");new o(a).observe(l,{characterData:!0}),r=function(){l.data=s=!s}}else if(c&&c.resolve){var h=c.resolve();r=function(){h.then(a)}}else r=function(){i.call(e,a)};return function(e){var i={fn:e,next:void 0};n&&(n.next=i),t||(t=i,r()),n=i}}},function(t,n,r){var e=r(6),i=r(2),o=function(t,n){if(i(t),!e(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{e=r(53)(Function.call,r(31).f(Object.prototype,"__proto__").set,2),e(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return o(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:o}},function(t,n,r){var e=r(126)("keys"),i=r(76);t.exports=function(t){return e[t]||(e[t]=i(t))}},function(t,n,r){var e=r(2),i=r(26),o=r(7)("species");t.exports=function(t,n){var r,u=e(t).constructor;return void 0===u||void 0==(r=e(u)[o])?n:i(r)}},function(t,n,r){var e=r(67),i=r(46);t.exports=function(t){return function(n,r){var o,u,c=String(i(n)),f=e(r),a=c.length;return f<0||f>=a?t?"":void 0:(o=c.charCodeAt(f),o<55296||o>56319||f+1===a||(u=c.charCodeAt(f+1))<56320||u>57343?t?c.charAt(f):o:t?c.slice(f,f+2):u-56320+(o-55296<<10)+65536)}}},function(t,n,r){var e=r(122),i=r(46);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,n,r){"use strict";var e=r(67),i=r(46);t.exports=function(t){var n=String(i(this)),r="",o=e(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(n+=n))1&o&&(r+=n);return r}},function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,n,r){var e,i,o,u=r(53),c=r(121),f=r(135),a=r(132),s=r(3),l=s.process,h=s.setImmediate,v=s.clearImmediate,p=s.MessageChannel,d=0,y={},g="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var n=y[t];delete y[t],n()}},m=function(t){b.call(t.data)};h&&v||(h=function(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return y[++d]=function(){c("function"==typeof t?t:Function(t),n)},e(d),d},v=function(t){delete y[t]},"process"==r(45)(l)?e=function(t){l.nextTick(u(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=m,e=u(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(e=function(t){s.postMessage(t+"","*")},s.addEventListener("message",m,!1)):e=g in a("script")?function(t){f.appendChild(a("script"))[g]=function(){f.removeChild(this),b.call(t)}}:function(t){setTimeout(u(b,t,1),0)}),t.exports={set:h,clear:v}},function(t,n,r){"use strict";var e=r(3),i=r(10),o=r(69),u=r(127),c=r(27),f=r(73),a=r(4),s=r(68),l=r(67),h=r(16),v=r(71).f,p=r(11).f,d=r(130),y=r(81),g="ArrayBuffer",b="DataView",m="prototype",x="Wrong length!",w="Wrong index!",S=e[g],_=e[b],O=e.Math,E=e.RangeError,P=e.Infinity,j=S,F=O.abs,M=O.pow,A=O.floor,N=O.log,T=O.LN2,I="buffer",k="byteLength",L="byteOffset",R=i?"_b":I,C=i?"_l":k,D=i?"_o":L,U=function(t,n,r){var e,i,o,u=Array(r),c=8*r-n-1,f=(1<<c)-1,a=f>>1,s=23===n?M(2,-24)-M(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=F(t),t!=t||t===P?(i=t!=t?1:0,e=f):(e=A(N(t)/T),t*(o=M(2,-e))<1&&(e--,o*=2),t+=e+a>=1?s/o:s*M(2,1-a),t*o>=2&&(e++,o/=2),e+a>=f?(i=0,e=f):e+a>=1?(i=(t*o-1)*M(2,n),e+=a):(i=t*M(2,a-1)*M(2,n),e=0));n>=8;u[l++]=255&i,i/=256,n-=8);for(e=e<<n|i,c+=n;c>0;u[l++]=255&e,e/=256,c-=8);return u[--l]|=128*h,u},W=function(t,n,r){var e,i=8*r-n-1,o=(1<<i)-1,u=o>>1,c=i-7,f=r-1,a=t[f--],s=127&a;for(a>>=7;c>0;s=256*s+t[f],f--,c-=8);for(e=s&(1<<-c)-1,s>>=-c,c+=n;c>0;e=256*e+t[f],f--,c-=8);if(0===s)s=1-u;else{if(s===o)return e?NaN:a?-P:P;e+=M(2,n),s-=u}return(a?-1:1)*e*M(2,s-n)},G=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},B=function(t){return[255&t]},V=function(t){return[255&t,t>>8&255]},z=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},q=function(t){return U(t,52,8)},K=function(t){return U(t,23,4)},J=function(t,n,r){p(t[m],n,{get:function(){return this[r]}})},Y=function(t,n,r,e){var i=+r,o=l(i);if(i!=o||o<0||o+n>t[C])throw E(w);var u=t[R]._b,c=o+t[D],f=u.slice(c,c+n);return e?f:f.reverse()},H=function(t,n,r,e,i,o){var u=+r,c=l(u);if(u!=c||c<0||c+n>t[C])throw E(w);for(var f=t[R]._b,a=c+t[D],s=e(+i),h=0;h<n;h++)f[a+h]=s[o?h:n-h-1]},$=function(t,n){s(t,S,g);var r=+n,e=h(r);if(r!=e)throw E(x);return e};if(u.ABV){if(!a(function(){new S})||!a(function(){new S(.5)})){S=function(t){return new j($(this,t))};for(var X,Q=S[m]=j[m],Z=v(j),tt=0;Z.length>tt;)(X=Z[tt++])in S||c(S,X,j[X]);o||(Q.constructor=S)}var nt=new _(new S(2)),rt=_[m].setInt8;nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||f(_[m],{setInt8:function(t,n){rt.call(this,t,n<<24>>24)},setUint8:function(t,n){rt.call(this,t,n<<24>>24)}},!0)}else S=function(t){var n=$(this,t);this._b=d.call(Array(n),0),this[C]=n},_=function(t,n,r){s(this,_,b),s(t,S,b);var e=t[C],i=l(n);if(i<0||i>e)throw E("Wrong offset!");if(r=void 0===r?e-i:h(r),i+r>e)throw E(x);this[R]=t,this[D]=i,this[C]=r},i&&(J(S,k,"_l"),J(_,I,"_b"),J(_,k,"_l"),J(_,L,"_o")),f(_[m],{getInt8:function(t){return Y(this,1,t)[0]<<24>>24},getUint8:function(t){return Y(this,1,t)[0]},getInt16:function(t){var n=Y(this,2,t,arguments[1]);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=Y(this,2,t,arguments[1]);return n[1]<<8|n[0]},getInt32:function(t){return G(Y(this,4,t,arguments[1]))},getUint32:function(t){return G(Y(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return W(Y(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return W(Y(this,8,t,arguments[1]),52,8)},setInt8:function(t,n){H(this,1,t,B,n)},setUint8:function(t,n){H(this,1,t,B,n)},setInt16:function(t,n){H(this,2,t,V,n,arguments[2])},setUint16:function(t,n){H(this,2,t,V,n,arguments[2])},setInt32:function(t,n){H(this,4,t,z,n,arguments[2])},setUint32:function(t,n){H(this,4,t,z,n,arguments[2])},setFloat32:function(t,n){H(this,4,t,K,n,arguments[2])},setFloat64:function(t,n){H(this,8,t,q,n,arguments[2])}});y(S,g),y(_,b),c(_[m],u.VIEW,!0),n[g]=S,n[b]=_},function(t,n,r){var e=r(3),i=r(52),o=r(69),u=r(182),c=r(11).f;t.exports=function(t){var n=i.Symbol||(i.Symbol=o?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(114),i=r(7)("iterator"),o=r(80);t.exports=r(52).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[e(t)]}},function(t,n,r){"use strict";var e=r(78),i=r(170),o=r(80),u=r(30);t.exports=r(140)(Array,"Array",function(t,n){this._t=u(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==n?i(0,r):"values"==n?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){function r(t,n){t.classList?t.classList.add(n):t.className+=" "+n}t.exports=r},function(t,n){function r(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi");t.className=t.className.replace(r," ")}}t.exports=r},function(t,n){function r(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function i(t){if(s===setTimeout)return setTimeout(t,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(n){try{return s.call(null,t,0)}catch(n){return s.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(n){try{return l.call(null,t)}catch(n){return l.call(this,t)}}}function u(){d&&v&&(d=!1,v.length?p=v.concat(p):y=-1,p.length&&c())}function c(){if(!d){var t=i(u);d=!0;for(var n=p.length;n;){for(v=p,p=[];++y<n;)v&&v[y].run();y=-1,n=p.length}v=null,d=!1,o(t)}}function f(t,n){this.fun=t,this.array=n}function a(){}var s,l,h=t.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(t){s=r}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var v,p=[],d=!1,y=-1;h.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];p.push(new f(t,n)),1!==p.length||d||i(c)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=a,h.addListener=a,h.once=a,h.off=a,h.removeListener=a,h.removeAllListeners=a,h.emit=a,h.prependListener=a,h.prependOnceListener=a,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,n,r){var e=r(45);t.exports=function(t,n){if("number"!=typeof t&&"Number"!=e(t))throw TypeError(n);return+t}},function(t,n,r){"use strict";var e=r(17),i=r(75),o=r(16);t.exports=[].copyWithin||function(t,n){var r=e(this),u=o(r.length),c=i(t,u),f=i(n,u),a=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===a?u:i(a,u))-f,u-c),l=1;for(f<c&&c<f+s&&(l=-1,f+=s-1,c+=s-1);s-- >0;)f in r?r[c]=r[f]:delete r[c],c+=l,f+=l;return r}},function(t,n,r){var e=r(79);t.exports=function(t,n){var r=[];return e(t,!1,r.push,r,n),r}},function(t,n,r){var e=r(26),i=r(17),o=r(115),u=r(16);t.exports=function(t,n,r,c,f){e(n);var a=i(t),s=o(a),l=u(a.length),h=f?l-1:0,v=f?-1:1;if(r<2)for(;;){if(h in s){c=s[h],h+=v;break}if(h+=v,f?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;f?h>=0:l>h;h+=v)h in s&&(c=n(c,s[h],h,a));return c}},function(t,n,r){"use strict";var e=r(26),i=r(6),o=r(121),u=[].slice,c={},f=function(t,n,r){if(!(n in c)){for(var e=[],i=0;i<n;i++)e[i]="a["+i+"]";c[n]=Function("F,a","return new F("+e.join(",")+")")}return c[n](t,r)};t.exports=Function.bind||function(t){var n=e(this),r=u.call(arguments,1),c=function(){var e=r.concat(u.call(arguments));return this instanceof c?f(n,e.length,e):o(n,e,t)};return i(n.prototype)&&(c.prototype=n.prototype),c}},function(t,n,r){"use strict";var e=r(11).f,i=r(70),o=r(73),u=r(53),c=r(68),f=r(46),a=r(79),s=r(140),l=r(170),h=r(74),v=r(10),p=r(65).fastKey,d=v?"_s":"size",y=function(t,n){var r,e=p(n);if("F"!==e)return t._i[e];for(r=t._f;r;r=r.n)if(r.k==n)return r};t.exports={getConstructor:function(t,n,r,s){var l=t(function(t,e){c(t,l,n,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[d]=0,void 0!=e&&a(e,r,t[s],t)});return o(l.prototype,{clear:function(){for(var t=this,n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[d]=0},delete:function(t){var n=this,r=y(n,t);if(r){var e=r.n,i=r.p;delete n._i[r.i],r.r=!0,i&&(i.n=e),e&&(e.p=i),n._f==r&&(n._f=e),n._l==r&&(n._l=i),n[d]--}return!!r},forEach:function(t){c(this,l,"forEach");for(var n,r=u(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(this,t)}}),v&&e(l.prototype,"size",{get:function(){return f(this[d])}}),l},def:function(t,n,r){var e,i,o=y(t,n);return o?o.v=r:(t._l=o={i:i=p(n,!0),k:n,v:r,p:e=t._l,n:void 0,r:!1},t._f||(t._f=o),e&&(e.n=o),t[d]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,n,r){s(t,n,function(t,n){this._t=t,this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==n?l(0,r.k):"values"==n?l(0,r.v):l(0,[r.k,r.v]):(t._t=void 0,l(1))},r?"entries":"values",!r,!0),h(n)}}},function(t,n,r){var e=r(114),i=r(161);t.exports=function(t){return function(){if(e(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,n,r){"use strict";var e=r(73),i=r(65).getWeak,o=r(2),u=r(6),c=r(68),f=r(79),a=r(48),s=r(24),l=a(5),h=a(6),v=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,n){return l(t.a,function(t){return t[0]===n})};d.prototype={get:function(t){var n=y(this,t);if(n)return n[1]},has:function(t){return!!y(this,t)},set:function(t,n){var r=y(this,t);r?r[1]=n:this.a.push([t,n])},delete:function(t){var n=h(this.a,function(n){return n[0]===t});return~n&&this.a.splice(n,1),!!~n}},t.exports={getConstructor:function(t,n,r,o){var a=t(function(t,e){c(t,a,n,"_i"),t._i=v++,t._l=void 0,void 0!=e&&f(e,r,t[o],t)});return e(a.prototype,{delete:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).delete(t):n&&s(n,this._i)&&delete n[this._i]},has:function(t){if(!u(t))return!1;var n=i(t);return!0===n?p(this).has(t):n&&s(n,this._i)}}),a},def:function(t,n,r){var e=i(o(n),!0);return!0===e?p(t).set(n,r):e[t._i]=r,t},ufstore:p}},function(t,n,r){t.exports=!r(10)&&!r(4)(function(){return 7!=Object.defineProperty(r(132)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(6),i=Math.floor;t.exports=function(t){return!e(t)&&isFinite(t)&&i(t)===t}},function(t,n,r){var e=r(2);t.exports=function(t,n,r,i){try{return i?n(e(r)[0],r[1]):n(r)}catch(n){var o=t.return;throw void 0!==o&&e(o.call(t)),n}}},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,n,r){"use strict";var e=r(72),i=r(125),o=r(116),u=r(17),c=r(115),f=Object.assign;t.exports=!f||r(4)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=i.f,l=o.f;f>a;)for(var h,v=c(arguments[a++]),p=s?e(v).concat(s(v)):e(v),d=p.length,y=0;d>y;)l.call(v,h=p[y++])&&(r[h]=v[h]);return r}:f},function(t,n,r){var e=r(11),i=r(2),o=r(72);t.exports=r(10)?Object.defineProperties:function(t,n){i(t);for(var r,u=o(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(30),i=r(71).f,o={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==o.call(t)?c(t):i(e(t))}},function(t,n,r){var e=r(24),i=r(30),o=r(117)(!1),u=r(145)("IE_PROTO");t.exports=function(t,n){var r,c=i(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~o(a,r)||a.push(r));return a}},function(t,n,r){var e=r(72),i=r(30),o=r(116).f;t.exports=function(t){return function(n){for(var r,u=i(n),c=e(u),f=c.length,a=0,s=[];f>a;)o.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){var e=r(71),i=r(125),o=r(2),u=r(3).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(o(t)),r=i.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(3).parseFloat,i=r(82).trim;t.exports=1/e(r(150)+"-0")!=-1/0?function(t){var n=i(String(t),3),r=e(n);return 0===r&&"-"==n.charAt(0)?-0:r}:e},function(t,n,r){var e=r(3).parseInt,i=r(82).trim,o=r(150),u=/^[\-+]?0[xX]/;t.exports=8!==e(o+"08")||22!==e(o+"0x16")?function(t,n){var r=i(String(t),3);return e(r,n>>>0||(u.test(r)?16:10))}:e},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(16),i=r(149),o=r(46);t.exports=function(t,n,r,u){var c=String(o(t)),f=c.length,a=void 0===r?" ":String(r),s=e(n);if(s<=f||""==a)return c;var l=s-f,h=i.call(a,Math.ceil(l/a.length));return h.length>l&&(h=h.slice(0,l)),u?h+c:c+h}},function(t,n,r){n.f=r(7)},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var n=e.getEntry(this,t);return n&&n.v},set:function(t,n){return e.def(this,0===t?0:t,n)}},e,!0)},function(t,n,r){r(10)&&"g"!=/./g.flags&&r(11).f(RegExp.prototype,"flags",{configurable:!0,get:r(120)})},function(t,n,r){"use strict";var e=r(164);t.exports=r(118)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t=0===t?0:t,t)}},e)},function(t,n,r){"use strict";var e,i=r(48)(0),o=r(28),u=r(65),c=r(172),f=r(166),a=r(6),s=u.getWeak,l=Object.isExtensible,h=f.ufstore,v={},p=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},d={get:function(t){if(a(t)){var n=s(t);return!0===n?h(this).get(t):n?n[this._i]:void 0}},set:function(t,n){return f.def(this,t,n)}},y=t.exports=r(118)("WeakMap",p,d,f,!0,!0);7!=(new y).set((Object.freeze||Object)(v),7).get(v)&&(e=f.getConstructor(p),c(e.prototype,d),u.NEED=!0,i(["delete","has","get","set"],function(t){var n=y.prototype,r=n[t];o(n,t,function(n,i){if(a(n)&&!l(n)){this._f||(this._f=new e);var o=this._f[t](n,i);return"set"==t?this:o}return r.call(this,n,i)})}))},,,,function(t,n){"use strict";function r(){var t=document.querySelector("#page-nav");if(t&&!document.querySelector("#page-nav .extend.prev")&&(t.innerHTML='<a class="extend prev disabled" rel="prev">&laquo; Prev</a>'+t.innerHTML),t&&!document.querySelector("#page-nav .extend.next")&&(t.innerHTML=t.innerHTML+'<a class="extend next disabled" rel="next">Next &raquo;</a>'),yiliaConfig&&yiliaConfig.open_in_new){document.querySelectorAll(".article-entry a:not(.article-more-a)").forEach(function(t){var n=t.getAttribute("target");n&&""!==n||t.setAttribute("target","_blank")})}if(yiliaConfig&&yiliaConfig.toc_hide_index){document.querySelectorAll(".toc-number").forEach(function(t){t.style.display="none"})}var n=document.querySelector("#js-aboutme");n&&0!==n.length&&(n.innerHTML=n.innerText)}t.exports={init:r}},function(t,n,r){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}function i(t,n){var r=/\/|index.html/g;return t.replace(r,"")===n.replace(r,"")}function o(){for(var t=document.querySelectorAll(".js-header-menu li a"),n=window.location.pathname,r=0,e=t.length;r<e;r++){var o=t[r];i(n,o.getAttribute("href"))&&(0,h.default)(o,"active")}}function u(t){for(var n=t.offsetLeft,r=t.offsetParent;null!==r;)n+=r.offsetLeft,r=r.offsetParent;return n}function c(t){for(var n=t.offsetTop,r=t.offsetParent;null!==r;)n+=r.offsetTop,r=r.offsetParent;return n}function f(t,n,r,e,i){var o=u(t),f=c(t)-n;if(f-r<=i){var a=t.$newDom;a||(a=t.cloneNode(!0),(0,d.default)(t,a),t.$newDom=a,a.style.position="fixed",a.style.top=(r||f)+"px",a.style.left=o+"px",a.style.zIndex=e||2,a.style.width="100%",a.style.color="#fff"),a.style.visibility="visible",t.style.visibility="hidden"}else{t.style.visibility="visible";var s=t.$newDom;s&&(s.style.visibility="hidden")}}function a(){var t=document.querySelector(".js-overlay"),n=document.querySelector(".js-header-menu");f(t,document.body.scrollTop,-63,2,0),f(n,document.body.scrollTop,1,3,0)}function s(){document.querySelector("#container").addEventListener("scroll",function(t){a()}),window.addEventListener("scroll",function(t){a()}),a()}var l=r(156),h=e(l),v=r(157),p=(e(v),r(382)),d=e(p),y=r(128),g=e(y),b=r(190),m=e(b),x=r(129);(function(){g.default.versions.mobile&&window.screen.width<800&&(o(),s())})(),(0,x.addLoadEvent)(function(){m.default.init()}),t.exports={}},,,,function(t,n,r){(function(t){"use strict";function n(t,n,r){t[n]||Object[e](t,n,{writable:!0,configurable:!0,value:r})}if(r(381),r(391),r(198),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(n,function(){return this}())},,,function(t,n,r){r(210),t.exports=r(52).RegExp.escape},,,,function(t,n,r){var e=r(6),i=r(138),o=r(7)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,r){var e=r(202);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){"use strict";var e=r(2),i=r(50),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(e(this),t!=o)}},function(t,n,r){var e=r(72),i=r(125),o=r(116);t.exports=function(t){var n=e(t),r=i.f;if(r)for(var u,c=r(t),f=o.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(72),i=r(30);t.exports=function(t,n){for(var r,o=i(t),u=e(o),c=u.length,f=0;c>f;)if(o[r=u[f++]]===n)return r}},function(t,n,r){"use strict";var e=r(208),i=r(121),o=r(26);t.exports=function(){for(var t=o(this),n=arguments.length,r=Array(n),u=0,c=e._,f=!1;n>u;)(r[u]=arguments[u++])===c&&(f=!0);return function(){var e,o=this,u=arguments.length,a=0,s=0;if(!f&&!u)return i(t,r,o);if(e=r.slice(),f)for(;n>a;a++)e[a]===c&&(e[a]=arguments[s++]);for(;u>s;)e.push(arguments[s++]);return i(t,e,o)}}},function(t,n,r){t.exports=r(3)},function(t,n){t.exports=function(t,n){var r=n===Object(n)?function(t){return n[t]}:n;return function(n){return String(n).replace(t,r)}}},function(t,n,r){var e=r(1),i=r(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");e(e.S,"RegExp",{escape:function(t){return i(t)}})},function(t,n,r){var e=r(1);e(e.P,"Array",{copyWithin:r(160)}),r(78)("copyWithin")},function(t,n,r){"use strict";var e=r(1),i=r(48)(4);e(e.P+e.F*!r(47)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.P,"Array",{fill:r(130)}),r(78)("fill")},function(t,n,r){"use strict";var e=r(1),i=r(48)(2);e(e.P+e.F*!r(47)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(6),o="findIndex",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(5),o="find",u=!0;o in[]&&Array(1)[o](function(){u=!1}),e(e.P+e.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)(o)},function(t,n,r){"use strict";var e=r(1),i=r(48)(0),o=r(47)([].forEach,!0);e(e.P+e.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(53),i=r(1),o=r(17),u=r(169),c=r(137),f=r(16),a=r(131),s=r(154);i(i.S+i.F*!r(123)(function(t){Array.from(t)}),"Array",{from:function(t){var n,r,i,l,h=o(t),v="function"==typeof this?this:Array,p=arguments.length,d=p>1?arguments[1]:void 0,y=void 0!==d,g=0,b=s(h);if(y&&(d=e(d,p>2?arguments[2]:void 0,2)),void 0==b||v==Array&&c(b))for(n=f(h.length),r=new v(n);n>g;g++)a(r,g,y?d(h[g],g):h[g]);else for(l=b.call(h),r=new v;!(i=l.next()).done;g++)a(r,g,y?u(l,d,[i.value,g],!0):i.value);return r.length=g,r}})},function(t,n,r){"use strict";var e=r(1),i=r(117)(!1),o=[].indexOf,u=!!o&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(47)(o)),"Array",{indexOf:function(t){return u?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,n,r){var e=r(1);e(e.S,"Array",{isArray:r(138)})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=[].join;e(e.P+e.F*(r(115)!=Object||!r(47)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,n,r){"use strict";var e=r(1),i=r(30),o=r(67),u=r(16),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(47)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=i(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,o(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(1);e(e.P+e.F*!r(47)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(131);e(e.S+e.F*r(4)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)i(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){"use strict";var e=r(1),i=r(162);e(e.P+e.F*!r(47)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(135),o=r(45),u=r(75),c=r(16),f=[].slice;e(e.P+e.F*r(4)(function(){i&&f.call(i)}),"Array",{slice:function(t,n){var r=c(this.length),e=o(this);if(n=void 0===n?r:n,"Array"==e)return f.call(this,t,n);for(var i=u(t,r),a=u(n,r),s=c(a-i),l=Array(s),h=0;h<s;h++)l[h]="String"==e?this.charAt(i+h):this[i+h];return l}})},function(t,n,r){"use strict";var e=r(1),i=r(48)(3);e(e.P+e.F*!r(47)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,n,r){"use strict";var e=r(1),i=r(26),o=r(17),u=r(4),c=[].sort,f=[1,2,3];e(e.P+e.F*(u(function(){f.sort(void 0)})||!u(function(){f.sort(null)})||!r(47)(c)),"Array",{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},function(t,n,r){r(74)("Array")},function(t,n,r){var e=r(1);e(e.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=Date.prototype.getTime,u=function(t){return t>9?t:"0"+t};e(e.P+e.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){
if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,n=t.getUTCFullYear(),r=t.getUTCMilliseconds(),e=n<0?"-":n>9999?"+":"";return e+("00000"+Math.abs(n)).slice(e?-6:-4)+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate())+"T"+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds())+"."+(r>99?r:"0"+u(r))+"Z"}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50);e(e.P+e.F*r(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var n=i(this),r=o(n);return"number"!=typeof r||isFinite(r)?n.toISOString():null}})},function(t,n,r){var e=r(7)("toPrimitive"),i=Date.prototype;e in i||r(27)(i,e,r(204))},function(t,n,r){var e=Date.prototype,i="Invalid Date",o="toString",u=e[o],c=e.getTime;new Date(NaN)+""!=i&&r(28)(e,o,function(){var t=c.call(this);return t===t?u.call(this):i})},function(t,n,r){var e=r(1);e(e.P,"Function",{bind:r(163)})},function(t,n,r){"use strict";var e=r(6),i=r(32),o=r(7)("hasInstance"),u=Function.prototype;o in u||r(11).f(u,o,{value:function(t){if("function"!=typeof this||!e(t))return!1;if(!e(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,n,r){var e=r(11).f,i=r(66),o=r(24),u=Function.prototype,c="name",f=Object.isExtensible||function(){return!0};c in u||r(10)&&e(u,c,{configurable:!0,get:function(){try{var t=this,n=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,c)||!f(t)||e(t,c,i(5,n)),n}catch(t){return""}}})},function(t,n,r){var e=r(1),i=r(171),o=Math.sqrt,u=Math.acosh;e(e.S+e.F*!(u&&710==Math.floor(u(Number.MAX_VALUE))&&u(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,n,r){function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=r(1),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:e})},function(t,n,r){var e=r(1),i=Math.atanh;e(e.S+e.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,n,r){var e=r(1),i=r(142);e(e.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,n,r){var e=r(1),i=Math.exp;e(e.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,n,r){var e=r(1),i=r(141);e(e.S+e.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,n,r){var e=r(1),i=r(142),o=Math.pow,u=o(2,-52),c=o(2,-23),f=o(2,127)*(2-c),a=o(2,-126),s=function(t){return t+1/u-1/u};e(e.S,"Math",{fround:function(t){var n,r,e=Math.abs(t),o=i(t);return e<a?o*s(e/a/c)*a*c:(n=(1+c/u)*e,r=n-(n-e),r>f||r!=r?o*(1/0):o*r)}})},function(t,n,r){var e=r(1),i=Math.abs;e(e.S,"Math",{hypot:function(t,n){for(var r,e,o=0,u=0,c=arguments.length,f=0;u<c;)r=i(arguments[u++]),f<r?(e=f/r,o=o*e*e+1,f=r):r>0?(e=r/f,o+=e*e):o+=r;return f===1/0?1/0:f*Math.sqrt(o)}})},function(t,n,r){var e=r(1),i=Math.imul;e(e.S+e.F*r(4)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,n){var r=65535,e=+t,i=+n,o=r&e,u=r&i;return 0|o*u+((r&e>>>16)*u+o*(r&i>>>16)<<16>>>0)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},function(t,n,r){var e=r(1);e(e.S,"Math",{log1p:r(171)})},function(t,n,r){var e=r(1);e(e.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,n,r){var e=r(1);e(e.S,"Math",{sign:r(142)})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S+e.F*r(4)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,n,r){var e=r(1),i=r(141),o=Math.exp;e(e.S,"Math",{tanh:function(t){var n=i(t=+t),r=i(-t);return n==1/0?1:r==1/0?-1:(n-r)/(o(t)+o(-t))}})},function(t,n,r){var e=r(1);e(e.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(45),u=r(136),c=r(50),f=r(4),a=r(71).f,s=r(31).f,l=r(11).f,h=r(82).trim,v="Number",p=e[v],d=p,y=p.prototype,g=o(r(70)(y))==v,b="trim"in String.prototype,m=function(t){var n=c(t,!1);if("string"==typeof n&&n.length>2){n=b?n.trim():h(n,3);var r,e,i,o=n.charCodeAt(0);if(43===o||45===o){if(88===(r=n.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:e=2,i=49;break;case 79:case 111:e=8,i=55;break;default:return+n}for(var u,f=n.slice(2),a=0,s=f.length;a<s;a++)if((u=f.charCodeAt(a))<48||u>i)return NaN;return parseInt(f,e)}}return+n};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var n=arguments.length<1?0:t,r=this;return r instanceof p&&(g?f(function(){y.valueOf.call(r)}):o(r)!=v)?u(new d(m(n)),r,p):m(n)};for(var x,w=r(10)?a(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)i(d,x=w[S])&&!i(p,x)&&l(p,x,s(d,x));p.prototype=y,y.constructor=p,r(28)(e,v,p)}},function(t,n,r){var e=r(1);e(e.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,n,r){var e=r(1),i=r(3).isFinite;e(e.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,n,r){var e=r(1);e(e.S,"Number",{isInteger:r(168)})},function(t,n,r){var e=r(1);e(e.S,"Number",{isNaN:function(t){return t!=t}})},function(t,n,r){var e=r(1),i=r(168),o=Math.abs;e(e.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,n,r){var e=r(1);e(e.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,n,r){var e=r(1);e(e.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,n,r){var e=r(1),i=r(178);e(e.S+e.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.S+e.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,n,r){"use strict";var e=r(1),i=r(67),o=r(159),u=r(149),c=1..toFixed,f=Math.floor,a=[0,0,0,0,0,0],s="Number.toFixed: incorrect invocation!",l="0",h=function(t,n){for(var r=-1,e=n;++r<6;)e+=t*a[r],a[r]=e%1e7,e=f(e/1e7)},v=function(t){for(var n=6,r=0;--n>=0;)r+=a[n],a[n]=f(r/t),r=r%t*1e7},p=function(){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==a[t]){var r=String(a[t]);n=""===n?r:n+u.call(l,7-r.length)+r}return n},d=function(t,n,r){return 0===n?r:n%2==1?d(t,n-1,r*t):d(t*t,n/2,r)},y=function(t){for(var n=0,r=t;r>=4096;)n+=12,r/=4096;for(;r>=2;)n+=1,r/=2;return n};e(e.P+e.F*(!!c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(4)(function(){c.call({})})),"Number",{toFixed:function(t){var n,r,e,c,f=o(this,s),a=i(t),g="",b=l;if(a<0||a>20)throw RangeError(s);if(f!=f)return"NaN";if(f<=-1e21||f>=1e21)return String(f);if(f<0&&(g="-",f=-f),f>1e-21)if(n=y(f*d(2,69,1))-69,r=n<0?f*d(2,-n,1):f/d(2,n,1),r*=4503599627370496,(n=52-n)>0){for(h(0,r),e=a;e>=7;)h(1e7,0),e-=7;for(h(d(10,e,1),0),e=n-1;e>=23;)v(1<<23),e-=23;v(1<<e),h(1,1),v(2),b=p()}else h(0,r),h(1<<-n,0),b=p()+u.call(l,a);return a>0?(c=b.length,b=g+(c<=a?"0."+u.call(l,a-c)+b:b.slice(0,c-a)+"."+b.slice(c-a))):b=g+b,b}})},function(t,n,r){"use strict";var e=r(1),i=r(4),o=r(159),u=1..toPrecision;e(e.P+e.F*(i(function(){return"1"!==u.call(1,void 0)})||!i(function(){u.call({})})),"Number",{toPrecision:function(t){var n=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?u.call(n):u.call(n,t)}})},function(t,n,r){var e=r(1);e(e.S+e.F,"Object",{assign:r(172)})},function(t,n,r){var e=r(1);e(e.S,"Object",{create:r(70)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperties:r(173)})},function(t,n,r){var e=r(1);e(e.S+e.F*!r(10),"Object",{defineProperty:r(11).f})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("freeze",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(30),i=r(31).f;r(49)("getOwnPropertyDescriptor",function(){return function(t,n){return i(e(t),n)}})},function(t,n,r){r(49)("getOwnPropertyNames",function(){return r(174).f})},function(t,n,r){var e=r(17),i=r(32);r(49)("getPrototypeOf",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6);r(49)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(6);r(49)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(6);r(49)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(1);e(e.S,"Object",{is:r(180)})},function(t,n,r){var e=r(17),i=r(72);r(49)("keys",function(){return function(t){return i(e(t))}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("preventExtensions",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(6),i=r(65).onFreeze;r(49)("seal",function(t){return function(n){return t&&e(n)?t(i(n)):n}})},function(t,n,r){var e=r(1);e(e.S,"Object",{setPrototypeOf:r(144).set})},function(t,n,r){"use strict";var e=r(114),i={};i[r(7)("toStringTag")]="z",i+""!="[object z]"&&r(28)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(1),i=r(178);e(e.G+e.F*(parseFloat!=i),{parseFloat:i})},function(t,n,r){var e=r(1),i=r(179);e(e.G+e.F*(parseInt!=i),{parseInt:i})},function(t,n,r){"use strict";var e,i,o,u=r(69),c=r(3),f=r(53),a=r(114),s=r(1),l=r(6),h=r(26),v=r(68),p=r(79),d=r(146),y=r(151).set,g=r(143)(),b="Promise",m=c.TypeError,x=c.process,w=c[b],x=c.process,S="process"==a(x),_=function(){},O=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[r(7)("species")]=function(t){t(_,_)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(_)instanceof n}catch(t){}}(),E=function(t,n){return t===n||t===w&&n===o},P=function(t){var n;return!(!l(t)||"function"!=typeof(n=t.then))&&n},j=function(t){return E(w,t)?new F(t):new i(t)},F=i=function(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw m("Bad Promise constructor");n=t,r=e}),this.resolve=h(n),this.reject=h(r)},M=function(t){try{t()}catch(t){return{error:t}}},A=function(t,n){if(!t._n){t._n=!0;var r=t._c;g(function(){for(var e=t._v,i=1==t._s,o=0;r.length>o;)!function(n){var r,o,u=i?n.ok:n.fail,c=n.resolve,f=n.reject,a=n.domain;try{u?(i||(2==t._h&&I(t),t._h=1),!0===u?r=e:(a&&a.enter(),r=u(e),a&&a.exit()),r===n.promise?f(m("Promise-chain cycle")):(o=P(r))?o.call(r,c,f):c(r)):f(e)}catch(t){f(t)}}(r[o++]);t._c=[],t._n=!1,n&&!t._h&&N(t)})}},N=function(t){y.call(c,function(){var n,r,e,i=t._v;if(T(t)&&(n=M(function(){S?x.emit("unhandledRejection",i,t):(r=c.onunhandledrejection)?r({promise:t,reason:i}):(e=c.console)&&e.error&&e.error("Unhandled promise rejection",i)}),t._h=S||T(t)?2:1),t._a=void 0,n)throw n.error})},T=function(t){if(1==t._h)return!1;for(var n,r=t._a||t._c,e=0;r.length>e;)if(n=r[e++],n.fail||!T(n.promise))return!1;return!0},I=function(t){y.call(c,function(){var n;S?x.emit("rejectionHandled",t):(n=c.onrejectionhandled)&&n({promise:t,reason:t._v})})},k=function(t){var n=this;n._d||(n._d=!0,n=n._w||n,n._v=t,n._s=2,n._a||(n._a=n._c.slice()),A(n,!0))},L=function(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(n=P(t))?g(function(){var e={_w:r,_d:!1};try{n.call(t,f(L,e,1),f(k,e,1))}catch(t){k.call(e,t)}}):(r._v=t,r._s=1,A(r,!1))}catch(t){k.call({_w:r,_d:!1},t)}}};O||(w=function(t){v(this,w,b,"_h"),h(t),e.call(this);try{t(f(L,this,1),f(k,this,1))}catch(t){k.call(this,t)}},e=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},e.prototype=r(73)(w.prototype,{then:function(t,n){var r=j(d(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=S?x.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),F=function(){var t=new e;this.promise=t,this.resolve=f(L,t,1),this.reject=f(k,t,1)}),s(s.G+s.W+s.F*!O,{Promise:w}),r(81)(w,b),r(74)(b),o=r(52)[b],s(s.S+s.F*!O,b,{reject:function(t){var n=j(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(u||!O),b,{resolve:function(t){if(t instanceof w&&E(t.constructor,this))return t;var n=j(this);return(0,n.resolve)(t),n.promise}}),s(s.S+s.F*!(O&&r(123)(function(t){w.all(t).catch(_)})),b,{all:function(t){var n=this,r=j(n),e=r.resolve,i=r.reject,o=M(function(){var r=[],o=0,u=1;p(t,!1,function(t){var c=o++,f=!1;r.push(void 0),u++,n.resolve(t).then(function(t){f||(f=!0,r[c]=t,--u||e(r))},i)}),--u||e(r)});return o&&i(o.error),r.promise},race:function(t){var n=this,r=j(n),e=r.reject,i=M(function(){p(t,!1,function(t){n.resolve(t).then(r.resolve,e)})});return i&&e(i.error),r.promise}})},function(t,n,r){var e=r(1),i=r(26),o=r(2),u=(r(3).Reflect||{}).apply,c=Function.apply;e(e.S+e.F*!r(4)(function(){u(function(){})}),"Reflect",{apply:function(t,n,r){var e=i(t),f=o(r);return u?u(e,n,f):c.call(e,n,f)}})},function(t,n,r){var e=r(1),i=r(70),o=r(26),u=r(2),c=r(6),f=r(4),a=r(163),s=(r(3).Reflect||{}).construct,l=f(function(){function t(){}return!(s(function(){},[],t)instanceof t)}),h=!f(function(){s(function(){})});e(e.S+e.F*(l||h),"Reflect",{construct:function(t,n){o(t),u(n);var r=arguments.length<3?t:o(arguments[2]);if(h&&!l)return s(t,n,r);if(t==r){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var e=[null];return e.push.apply(e,n),new(a.apply(t,e))}var f=r.prototype,v=i(c(f)?f:Object.prototype),p=Function.apply.call(t,v,n);return c(p)?p:v}})},function(t,n,r){var e=r(11),i=r(1),o=r(2),u=r(50);i(i.S+i.F*r(4)(function(){Reflect.defineProperty(e.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,n,r){o(t),n=u(n,!0),o(r);try{return e.f(t,n,r),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(31).f,o=r(2);e(e.S,"Reflect",{deleteProperty:function(t,n){var r=i(o(t),n);return!(r&&!r.configurable)&&delete t[n]}})},function(t,n,r){"use strict";var e=r(1),i=r(2),o=function(t){this._t=i(t),this._i=0;var n,r=this._k=[];for(n in t)r.push(n)};r(139)(o,"Object",function(){var t,n=this,r=n._k;do{if(n._i>=r.length)return{value:void 0,done:!0}}while(!((t=r[n._i++])in n._t));return{value:t,done:!1}}),e(e.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,n,r){var e=r(31),i=r(1),o=r(2);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,n){return e.f(o(t),n)}})},function(t,n,r){var e=r(1),i=r(32),o=r(2);e(e.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,n,r){function e(t,n){var r,c,s=arguments.length<3?t:arguments[2];return a(t)===s?t[n]:(r=i.f(t,n))?u(r,"value")?r.value:void 0!==r.get?r.get.call(s):void 0:f(c=o(t))?e(c,n,s):void 0}var i=r(31),o=r(32),u=r(24),c=r(1),f=r(6),a=r(2);c(c.S,"Reflect",{get:e})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{has:function(t,n){return n in t}})},function(t,n,r){var e=r(1),i=r(2),o=Object.isExtensible;e(e.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,n,r){var e=r(1);e(e.S,"Reflect",{ownKeys:r(177)})},function(t,n,r){var e=r(1),i=r(2),o=Object.preventExtensions;e(e.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,n,r){var e=r(1),i=r(144);i&&e(e.S,"Reflect",{setPrototypeOf:function(t,n){i.check(t,n);try{return i.set(t,n),!0}catch(t){return!1}}})},function(t,n,r){function e(t,n,r){var f,h,v=arguments.length<4?t:arguments[3],p=o.f(s(t),n);if(!p){if(l(h=u(t)))return e(h,n,r,v);p=a(0)}return c(p,"value")?!(!1===p.writable||!l(v)||(f=o.f(v,n)||a(0),f.value=r,i.f(v,n,f),0)):void 0!==p.set&&(p.set.call(v,r),!0)}var i=r(11),o=r(31),u=r(32),c=r(24),f=r(1),a=r(66),s=r(2),l=r(6);f(f.S,"Reflect",{set:e})},function(t,n,r){var e=r(3),i=r(136),o=r(11).f,u=r(71).f,c=r(122),f=r(120),a=e.RegExp,s=a,l=a.prototype,h=/a/g,v=/a/g,p=new a(h)!==h;if(r(10)&&(!p||r(4)(function(){return v[r(7)("match")]=!1,a(h)!=h||a(v)==v||"/a/i"!=a(h,"i")}))){a=function(t,n){var r=this instanceof a,e=c(t),o=void 0===n;return!r&&e&&t.constructor===a&&o?t:i(p?new s(e&&!o?t.source:t,n):s((e=t instanceof a)?t.source:t,e&&o?f.call(t):n),r?this:l,a)};for(var d=u(s),y=0;d.length>y;)!function(t){t in a||o(a,t,{configurable:!0,get:function(){return s[t]},set:function(n){s[t]=n}})}(d[y++]);l.constructor=a,a.prototype=l,r(28)(e,"RegExp",a)}r(74)("RegExp")},function(t,n,r){r(119)("match",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("replace",2,function(t,n,r){return[function(e,i){"use strict";var o=t(this),u=void 0==e?void 0:e[n];return void 0!==u?u.call(e,o,i):r.call(String(o),e,i)},r]})},function(t,n,r){r(119)("search",1,function(t,n,r){return[function(r){"use strict";var e=t(this),i=void 0==r?void 0:r[n];return void 0!==i?i.call(r,e):new RegExp(r)[n](String(e))},r]})},function(t,n,r){r(119)("split",2,function(t,n,e){"use strict";var i=r(122),o=e,u=[].push,c="split",f="length",a="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[f]||2!="ab"[c](/(?:ab)*/)[f]||4!="."[c](/(.?)(.?)/)[f]||"."[c](/()()/)[f]>1||""[c](/.?/)[f]){var s=void 0===/()??/.exec("")[1];e=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!i(t))return o.call(r,t,n);var e,c,l,h,v,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===n?4294967295:n>>>0,b=new RegExp(t.source,d+"g");for(s||(e=new RegExp("^"+b.source+"$(?!\\s)",d));(c=b.exec(r))&&!((l=c.index+c[0][f])>y&&(p.push(r.slice(y,c.index)),!s&&c[f]>1&&c[0].replace(e,function(){for(v=1;v<arguments[f]-2;v++)void 0===arguments[v]&&(c[v]=void 0)}),c[f]>1&&c.index<r[f]&&u.apply(p,c.slice(1)),h=c[0][f],y=l,p[f]>=g));)b[a]===c.index&&b[a]++;return y===r[f]?!h&&b.test("")||p.push(""):p.push(r.slice(y)),p[f]>g?p.slice(0,g):p}}else"0"[c](void 0,0)[f]&&(e=function(t,n){return void 0===t&&0===n?[]:o.call(this,t,n)});return[function(r,i){var o=t(this),u=void 0==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},e]})},function(t,n,r){"use strict";r(184);var e=r(2),i=r(120),o=r(10),u="toString",c=/./[u],f=function(t){r(28)(RegExp.prototype,u,t,!0)};r(4)(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?f(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):c.name!=u&&f(function(){return c.call(this)})},function(t,n,r){"use strict";r(29)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){"use strict";r(29)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){"use strict";r(29)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){"use strict";r(29)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!1);e(e.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="endsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{endsWith:function(t){var n=o(this,t,u),r=arguments.length>1?arguments[1]:void 0,e=i(n.length),f=void 0===r?e:Math.min(i(r),e),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,r){"use strict";r(29)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){"use strict";r(29)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){"use strict";r(29)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){var e=r(1),i=r(75),o=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],i(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?o(n):o(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){"use strict";var e=r(1),i=r(148),o="includes";e(e.P+e.F*r(134)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,n,r){"use strict";r(29)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){"use strict";var e=r(147)(!0);r(140)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,r=this._i;return r>=n.length?{value:void 0,done:!0}:(t=e(n,r),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){"use strict";r(29)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){var e=r(1),i=r(30),o=r(16);e(e.S,"String",{raw:function(t){for(var n=i(t.raw),r=o(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){var e=r(1);e(e.P,"String",{repeat:r(149)})},function(t,n,r){"use strict";r(29)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){"use strict";var e=r(1),i=r(16),o=r(148),u="startsWith",c=""[u];e(e.P+e.F*r(134)(u),"String",{startsWith:function(t){var n=o(this,t,u),r=i(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),e=String(t);return c?c.call(n,e,r):n.slice(r,r+e.length)===e}})},function(t,n,r){"use strict";r(29)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){"use strict";r(29)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){"use strict";r(29)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){"use strict";r(82)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){"use strict";var e=r(3),i=r(24),o=r(10),u=r(1),c=r(28),f=r(65).KEY,a=r(4),s=r(126),l=r(81),h=r(76),v=r(7),p=r(182),d=r(153),y=r(206),g=r(205),b=r(138),m=r(2),x=r(30),w=r(50),S=r(66),_=r(70),O=r(174),E=r(31),P=r(11),j=r(72),F=E.f,M=P.f,A=O.f,N=e.Symbol,T=e.JSON,I=T&&T.stringify,k="prototype",L=v("_hidden"),R=v("toPrimitive"),C={}.propertyIsEnumerable,D=s("symbol-registry"),U=s("symbols"),W=s("op-symbols"),G=Object[k],B="function"==typeof N,V=e.QObject,z=!V||!V[k]||!V[k].findChild,q=o&&a(function(){return 7!=_(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],M(t,n,r),e&&t!==G&&M(G,n,e)}:M,K=function(t){var n=U[t]=_(N[k]);return n._k=t,n},J=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},Y=function(t,n,r){return t===G&&Y(W,n,r),m(t),n=w(n,!0),m(r),i(U,n)?(r.enumerable?(i(t,L)&&t[L][n]&&(t[L][n]=!1),r=_(r,{enumerable:S(0,!1)})):(i(t,L)||M(t,L,S(1,{})),t[L][n]=!0),q(t,n,r)):M(t,n,r)},H=function(t,n){m(t);for(var r,e=g(n=x(n)),i=0,o=e.length;o>i;)Y(t,r=e[i++],n[r]);return t},$=function(t,n){return void 0===n?_(t):H(_(t),n)},X=function(t){var n=C.call(this,t=w(t,!0));return!(this===G&&i(U,t)&&!i(W,t))&&(!(n||!i(this,t)||!i(U,t)||i(this,L)&&this[L][t])||n)},Q=function(t,n){if(t=x(t),n=w(n,!0),t!==G||!i(U,n)||i(W,n)){var r=F(t,n);return!r||!i(U,n)||i(t,L)&&t[L][n]||(r.enumerable=!0),r}},Z=function(t){for(var n,r=A(x(t)),e=[],o=0;r.length>o;)i(U,n=r[o++])||n==L||n==f||e.push(n);return e},tt=function(t){for(var n,r=t===G,e=A(r?W:x(t)),o=[],u=0;e.length>u;)!i(U,n=e[u++])||r&&!i(G,n)||o.push(U[n]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),n=function(r){this===G&&n.call(W,r),i(this,L)&&i(this[L],t)&&(this[L][t]=!1),q(this,t,S(1,r))};return o&&z&&q(G,t,{configurable:!0,set:n}),K(t)},c(N[k],"toString",function(){return this._k}),E.f=Q,P.f=Y,r(71).f=O.f=Z,r(116).f=X,r(125).f=tt,o&&!r(69)&&c(G,"propertyIsEnumerable",X,!0),p.f=function(t){return K(v(t))}),u(u.G+u.W+u.F*!B,{Symbol:N});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)v(nt[rt++]);for(var nt=j(v.store),rt=0;nt.length>rt;)d(nt[rt++]);u(u.S+u.F*!B,"Symbol",{for:function(t){return i(D,t+="")?D[t]:D[t]=N(t)},keyFor:function(t){if(J(t))return y(D,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),u(u.S+u.F*!B,"Object",{create:$,defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),T&&u(u.S+u.F*(!B||a(function(){var t=N();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var n,r,e=[t],i=1;arguments.length>i;)e.push(arguments[i++]);return n=e[1],"function"==typeof n&&(r=n),!r&&b(n)||(n=function(t,n){if(r&&(n=r.call(this,t,n)),!J(n))return n}),e[1]=n,I.apply(T,e)}}}),N[k][R]||r(27)(N[k],R,N[k].valueOf),l(N,"Symbol"),l(Math,"Math",!0),l(e.JSON,"JSON",!0)},function(t,n,r){"use strict";var e=r(1),i=r(127),o=r(152),u=r(2),c=r(75),f=r(16),a=r(6),s=r(3).ArrayBuffer,l=r(146),h=o.ArrayBuffer,v=o.DataView,p=i.ABV&&s.isView,d=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";e(e.G+e.W+e.F*(s!==h),{ArrayBuffer:h}),e(e.S+e.F*!i.CONSTR,g,{isView:function(t){return p&&p(t)||a(t)&&y in t}}),e(e.P+e.U+e.F*r(4)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,n){if(void 0!==d&&void 0===n)return d.call(u(this),t);for(var r=u(this).byteLength,e=c(t,r),i=c(void 0===n?r:n,r),o=new(l(this,h))(f(i-e)),a=new v(this),s=new v(o),p=0;e<i;)s.setUint8(p++,a.getUint8(e++));return o}}),r(74)(g)},function(t,n,r){var e=r(1);e(e.G+e.W+e.F*!r(127).ABV,{DataView:r(152).DataView})},function(t,n,r){r(55)("Float32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Float64",8,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Int8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint16",2,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint32",4,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}})},function(t,n,r){r(55)("Uint8",1,function(t){return function(n,r,e){return t(this,n,r,e)}},!0)},function(t,n,r){"use strict";var e=r(166);r(118)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return e.def(this,t,!0)}},e,!1,!0)},function(t,n,r){"use strict";var e=r(1),i=r(117)(!0);e(e.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(78)("includes")},function(t,n,r){var e=r(1),i=r(143)(),o=r(3).process,u="process"==r(45)(o);e(e.G,{asap:function(t){var n=u&&o.domain;i(n?n.bind(t):t)}})},function(t,n,r){var e=r(1),i=r(45);e(e.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Map",{toJSON:r(165)("Map")})},function(t,n,r){var e=r(1);e(e.S,"Math",{iaddh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o+(e>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{imulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>16,f=i>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>16)+((o*f>>>0)+(a&r)>>16)}})},function(t,n,r){var e=r(1);e(e.S,"Math",{isubh:function(t,n,r,e){var i=t>>>0,o=n>>>0,u=r>>>0;return o-(e>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})},function(t,n,r){var e=r(1);e(e.S,"Math",{umulh:function(t,n){var r=65535,e=+t,i=+n,o=e&r,u=i&r,c=e>>>16,f=i>>>16,a=(c*u>>>0)+(o*u>>>16);return c*f+(a>>>16)+((o*f>>>0)+(a&r)>>>16)}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineGetter__:function(t,n){u.f(i(this),t,{get:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(26),u=r(11);r(10)&&e(e.P+r(124),"Object",{__defineSetter__:function(t,n){u.f(i(this),t,{set:o(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(1),i=r(176)(!0);e(e.S,"Object",{entries:function(t){return i(t)}})},function(t,n,r){var e=r(1),i=r(177),o=r(30),u=r(31),c=r(131);e(e.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,r=o(t),e=u.f,f=i(r),a={},s=0;f.length>s;)c(a,n=f[s++],e(r,n));return a}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupGetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){"use strict";var e=r(1),i=r(17),o=r(50),u=r(32),c=r(31).f;r(10)&&e(e.P+r(124),"Object",{__lookupSetter__:function(t){var n,r=i(this),e=o(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})},function(t,n,r){var e=r(1),i=r(176)(!1);e(e.S,"Object",{values:function(t){return i(t)}})},function(t,n,r){"use strict";var e=r(1),i=r(3),o=r(52),u=r(143)(),c=r(7)("observable"),f=r(26),a=r(2),s=r(68),l=r(73),h=r(27),v=r(79),p=v.RETURN,d=function(t){return null==t?void 0:f(t)},y=function(t){var n=t._c;n&&(t._c=void 0,n())},g=function(t){return void 0===t._o},b=function(t){g(t)||(t._o=void 0,y(t))},m=function(t,n){a(t),this._c=void 0,this._o=t,t=new x(this);try{var r=n(t),e=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){e.unsubscribe()}:f(r),this._c=r)}catch(n){return void t.error(n)}g(this)&&y(this)};m.prototype=l({},{unsubscribe:function(){b(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var n=this._s;if(!g(n)){var r=n._o;try{var e=d(r.next);if(e)return e.call(r,t)}catch(t){try{b(n)}finally{throw t}}}},error:function(t){var n=this._s;if(g(n))throw t;var r=n._o;n._o=void 0;try{var e=d(r.error);if(!e)throw t;t=e.call(r,t)}catch(t){try{y(n)}finally{throw t}}return y(n),t},complete:function(t){var n=this._s;if(!g(n)){var r=n._o;n._o=void 0;try{var e=d(r.complete);t=e?e.call(r,t):void 0}catch(t){try{y(n)}finally{throw t}}return y(n),t}}});var w=function(t){s(this,w,"Observable","_f")._f=f(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var n=this;return new(o.Promise||i.Promise)(function(r,e){f(t);var i=n.subscribe({next:function(n){try{return t(n)}catch(t){e(t),i.unsubscribe()}},error:e,complete:r})})}}),l(w,{from:function(t){var n="function"==typeof this?this:w,r=d(a(t)[c]);if(r){var e=a(r.call(t));return e.constructor===n?e:new n(function(t){return e.subscribe(t)})}return new n(function(n){var r=!1;return u(function(){if(!r){try{if(v(t,!1,function(t){if(n.next(t),r)return p})===p)return}catch(t){if(r)throw t;return void n.error(t)}n.complete()}}),function(){r=!0}})},of:function(){for(var t=0,n=arguments.length,r=Array(n);t<n;)r[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var n=!1;return u(function(){if(!n){for(var e=0;e<r.length;++e)if(t.next(r[e]),n)return;t.complete()}}),function(){n=!0}})}}),h(w.prototype,c,function(){return this}),e(e.G,{Observable:w}),r(74)("Observable")},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.set;e.exp({defineMetadata:function(t,n,r,e){u(t,n,i(r),o(e))}})},function(t,n,r){var e=r(54),i=r(2),o=e.key,u=e.map,c=e.store;e.exp({deleteMetadata:function(t,n){var r=arguments.length<3?void 0:o(arguments[2]),e=u(i(n),r,!1);if(void 0===e||!e.delete(t))return!1;if(e.size)return!0;var f=c.get(n);return f.delete(r),!!f.size||c.delete(n)}})},function(t,n,r){var e=r(185),i=r(161),o=r(54),u=r(2),c=r(32),f=o.keys,a=o.key,s=function(t,n){var r=f(t,n),o=c(t);if(null===o)return r;var u=s(o,n);return u.length?r.length?i(new e(r.concat(u))):u:r};o.exp({getMetadataKeys:function(t){return s(u(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.get,f=e.key,a=function(t,n,r){if(u(t,n,r))return c(t,n,r);var e=o(n);return null!==e?a(t,e,r):void 0};e.exp({getMetadata:function(t,n){return a(t,i(n),arguments.length<3?void 0:f(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.keys,u=e.key;e.exp({getOwnMetadataKeys:function(t){
return o(i(t),arguments.length<2?void 0:u(arguments[1]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.get,u=e.key;e.exp({getOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(32),u=e.has,c=e.key,f=function(t,n,r){if(u(t,n,r))return!0;var e=o(n);return null!==e&&f(t,e,r)};e.exp({hasMetadata:function(t,n){return f(t,i(n),arguments.length<3?void 0:c(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=e.has,u=e.key;e.exp({hasOwnMetadata:function(t,n){return o(t,i(n),arguments.length<3?void 0:u(arguments[2]))}})},function(t,n,r){var e=r(54),i=r(2),o=r(26),u=e.key,c=e.set;e.exp({metadata:function(t,n){return function(r,e){c(t,n,(void 0!==e?i:o)(r),u(e))}}})},function(t,n,r){var e=r(1);e(e.P+e.R,"Set",{toJSON:r(165)("Set")})},function(t,n,r){"use strict";var e=r(1),i=r(147)(!0);e(e.P,"String",{at:function(t){return i(this,t)}})},function(t,n,r){"use strict";var e=r(1),i=r(46),o=r(16),u=r(122),c=r(120),f=RegExp.prototype,a=function(t,n){this._r=t,this._s=n};r(139)(a,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),e(e.P,"String",{matchAll:function(t){if(i(this),!u(t))throw TypeError(t+" is not a regexp!");var n=String(this),r="flags"in f?String(t.flags):c.call(t),e=new RegExp(t.source,~r.indexOf("g")?r:"g"+r);return e.lastIndex=o(t.lastIndex),new a(e,n)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,n,r){"use strict";var e=r(1),i=r(181);e(e.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,n,r){"use strict";r(82)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,n,r){"use strict";r(82)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,n,r){r(153)("asyncIterator")},function(t,n,r){r(153)("observable")},function(t,n,r){var e=r(1);e(e.S,"System",{global:r(3)})},function(t,n,r){for(var e=r(155),i=r(28),o=r(3),u=r(27),c=r(80),f=r(7),a=f("iterator"),s=f("toStringTag"),l=c.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],v=0;v<5;v++){var p,d=h[v],y=o[d],g=y&&y.prototype;if(g){g[a]||u(g,a,l),g[s]||u(g,s,d),c[d]=l;for(p in e)g[p]||i(g,p,e[p],!0)}}},function(t,n,r){var e=r(1),i=r(151);e(e.G+e.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,n,r){var e=r(3),i=r(1),o=r(121),u=r(207),c=e.navigator,f=!!c&&/MSIE .\./.test(c.userAgent),a=function(t){return f?function(n,r){return t(o(u,[].slice.call(arguments,2),"function"==typeof n?n:Function(n)),r)}:t};i(i.G+i.B+i.F*f,{setTimeout:a(e.setTimeout),setInterval:a(e.setInterval)})},function(t,n,r){r(330),r(269),r(271),r(270),r(273),r(275),r(280),r(274),r(272),r(282),r(281),r(277),r(278),r(276),r(268),r(279),r(283),r(284),r(236),r(238),r(237),r(286),r(285),r(256),r(266),r(267),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(317),r(322),r(329),r(320),r(312),r(313),r(318),r(323),r(325),r(308),r(309),r(310),r(311),r(314),r(315),r(316),r(319),r(321),r(324),r(326),r(327),r(328),r(231),r(233),r(232),r(235),r(234),r(220),r(218),r(224),r(221),r(227),r(229),r(217),r(223),r(214),r(228),r(212),r(226),r(225),r(219),r(222),r(211),r(213),r(216),r(215),r(230),r(155),r(302),r(307),r(184),r(303),r(304),r(305),r(306),r(287),r(183),r(185),r(186),r(342),r(331),r(332),r(337),r(340),r(341),r(335),r(338),r(336),r(339),r(333),r(334),r(288),r(289),r(290),r(291),r(292),r(295),r(293),r(294),r(296),r(297),r(298),r(299),r(301),r(300),r(343),r(369),r(372),r(371),r(373),r(374),r(370),r(375),r(376),r(354),r(357),r(353),r(351),r(352),r(355),r(356),r(346),r(368),r(377),r(345),r(347),r(349),r(348),r(350),r(359),r(360),r(362),r(361),r(364),r(363),r(365),r(366),r(367),r(344),r(358),r(380),r(379),r(378),t.exports=r(52)},function(t,n){function r(t,n){if("string"==typeof n)return t.insertAdjacentHTML("afterend",n);var r=t.nextSibling;return r?t.parentNode.insertBefore(n,r):t.parentNode.appendChild(n)}t.exports=r},,,,,,,,,function(t,n,r){(function(n,r){!function(n){"use strict";function e(t,n,r,e){var i=n&&n.prototype instanceof o?n:o,u=Object.create(i.prototype),c=new p(e||[]);return u._invoke=s(t,r,c),u}function i(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(t){return{type:"throw",arg:t}}}function o(){}function u(){}function c(){}function f(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(r,e,o,u){var c=i(t[r],t,e);if("throw"!==c.type){var f=c.arg,a=f.value;return a&&"object"==typeof a&&m.call(a,"__await")?Promise.resolve(a.__await).then(function(t){n("next",t,o,u)},function(t){n("throw",t,o,u)}):Promise.resolve(a).then(function(t){f.value=t,o(f)},u)}u(c.arg)}function e(t,r){function e(){return new Promise(function(e,i){n(t,r,e,i)})}return o=o?o.then(e,e):e()}"object"==typeof r&&r.domain&&(n=r.domain.bind(n));var o;this._invoke=e}function s(t,n,r){var e=P;return function(o,u){if(e===F)throw new Error("Generator is already running");if(e===M){if("throw"===o)throw u;return y()}for(r.method=o,r.arg=u;;){var c=r.delegate;if(c){var f=l(c,r);if(f){if(f===A)continue;return f}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===P)throw e=M,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=F;var a=i(t,n,r);if("normal"===a.type){if(e=r.done?M:j,a.arg===A)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(e=M,r.method="throw",r.arg=a.arg)}}}function l(t,n){var r=t.iterator[n.method];if(r===g){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=g,l(t,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var e=i(r,t.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,A;var o=e.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=g),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function h(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function v(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function d(t){if(t){var n=t[w];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function n(){for(;++r<t.length;)if(m.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=g,n.done=!0,n};return e.next=e}}return{next:y}}function y(){return{value:g,done:!0}}var g,b=Object.prototype,m=b.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",S=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag",O="object"==typeof t,E=n.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=n.regeneratorRuntime=O?t.exports:{},E.wrap=e;var P="suspendedStart",j="suspendedYield",F="executing",M="completed",A={},N={};N[w]=function(){return this};var T=Object.getPrototypeOf,I=T&&T(T(d([])));I&&I!==b&&m.call(I,w)&&(N=I);var k=c.prototype=o.prototype=Object.create(N);u.prototype=k.constructor=c,c.constructor=u,c[_]=u.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===u||"GeneratorFunction"===(n.displayName||n.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,_ in t||(t[_]="GeneratorFunction")),t.prototype=Object.create(k),t},E.awrap=function(t){return{__await:t}},f(a.prototype),a.prototype[S]=function(){return this},E.AsyncIterator=a,E.async=function(t,n,r,i){var o=new a(e(t,n,r,i));return E.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},f(k),k[_]="Generator",k.toString=function(){return"[object Generator]"},E.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){for(;n.length;){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},E.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(v),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){function n(n,e){return o.type="throw",o.arg=t,r.next=n,e&&(r.method="next",r.arg=g),!!e}if(this.done)throw t;for(var r=this,e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=m.call(i,"catchLoc"),c=m.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),A},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),v(r),A}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var i=e.arg;v(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:d(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=g),A}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(n,function(){return this}(),r(158))}])</script><script src="/./main.0cf68a.js"></script><script>!function(){!function(e){var t=document.createElement("script");document.getElementsByTagName("body")[0].appendChild(t),t.setAttribute("src",e)}("/slider.e37972.js")}()</script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-nav header-menu">
    
    
      
      
      
    
      
      
      
    
      
      
      
    
    

    <ul style="width: 70%">
    
    
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'innerArchive')"><a href="javascript:void(0)" q-class="active:innerArchive">所有文章</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'friends')"><a href="javascript:void(0)" q-class="active:friends">友链</a></li>
      
        
      
      <li style="width: 33.333333333333336%" q-on="click: openSlider(e, 'aboutme')"><a href="javascript:void(0)" q-class="active:aboutme">关于我</a></li>
      
        
    </ul>
  </div>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">Epub</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">OPF</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">HTML</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">XHTML</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">NextT</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Theme</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">hexo</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">hammerJS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">touch</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">pen</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">算法</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">排序</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">node</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">grunt</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">gruntfile</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">debug</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">css</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">counter</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">计数器</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">prototype</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">object</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">原型</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">__proto__</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">ajax</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">cros</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">JXGGraph</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">Board</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">jxggraph</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">shape</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">link</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">链接</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">curry</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">compose</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">函数式</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">react</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">JS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">虚拟dom</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">mvvm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color2">postmessage</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">message</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">h5API</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">web通信</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color1">函数式编程</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color4">XUL</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color5">XULRunner</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)" class="js-tag color3">Firefox</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、请确保node版本大于6.2<br/>2、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            3、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: false
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    
    	<section class="tools-section tools-section-friends" q-show="friends">
  		
        <ul class="search-ul">
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接1</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接2</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接3</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接4</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接5</a>
            </li>
          
            <li class="search-li">
              <a href="http://localhost:4000/" target="_blank" class="search-title"><i class="icon-quo-left icon"></i>友情链接6</a>
            </li>
          
        </ul>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me" q-show="aboutme">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">很惭愧&lt;br&gt;&lt;br&gt;只做了一点微小的工作&lt;br&gt;谢谢大家</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>